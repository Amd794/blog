<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>悲观锁 on cmdragon&#39;s Blog</title>
    <link>https://blog.cmdragon.cn/tags/%E6%82%B2%E8%A7%82%E9%94%81/</link>
    <description>Recent content in 悲观锁 on cmdragon&#39;s Blog</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 03 May 2025 14:48:01 +0800</lastBuildDate>
    <atom:link href="https://blog.cmdragon.cn/tags/%E6%82%B2%E8%A7%82%E9%94%81/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>异步数据库事务锁：电商库存扣减的防超卖秘籍</title>
      <link>https://blog.cmdragon.cn/posts/dd8b49ce80066db8c2671d365a9e9e32/</link>
      <pubDate>Sat, 03 May 2025 14:48:01 +0800</pubDate>
      <guid>https://blog.cmdragon.cn/posts/dd8b49ce80066db8c2671d365a9e9e32/</guid>
      <description>FastAPI框架中使用Tortoise-ORM进行异步数据库操作时，处理电商库存扣减等需要数据一致性的场景，传统同步操作会导致竞态条件。Tortoise-ORM的异步解决方案需配合事务锁机制，包括悲观锁和乐观锁。悲观锁通过&lt;code&gt;select_for_update()&lt;/code&gt;锁定记录，确保原子操作；乐观锁通过版本号机制实现无锁检测，采用指数退避重试策略避免活锁。高冲突率场景适合悲观锁，低冲突率场景适合乐观锁。</description>
    </item>
  </channel>
</rss>

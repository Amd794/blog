<!DOCTYPE html><html lang=zh-CN,zh-TW,en,default><head><meta charset=utf-8><link href=/images/favicon.ico rel=icon><link rel=apple-touch-icon href=/images/apple-touch-icon.png><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=keywords content=" Nuxt3, Composables, 目录架构, 内置API, 高效应用程序, 构建应用, 学习, cmdragon, 个人网站, 编程, 技术分享, 学习资源, 前端开发, 后端开发, 全栈开发, 编程语言, 开发者社区"><meta name=description content="摘要：“本文深入探讨了Nuxt3 Composables，重点介绍了其目录架构和内置API的高效应用。通过学习本文，读者将能够更好地理解和利用Nuxt3 Composables来构建高效的应用程序。”"><meta name=author content=cmdragon><meta name=baidu-site-verification content=codeva-Q85hVj3vOu><link rel=alternate type=application/atom+xml href=https://blog.cmdragon.cn/atom.xml><link rel=alternate type=application/rss+xml href=https://blog.cmdragon.cn/sitemap.xml><meta property=og:url content=https://blog.cmdragon.cn/2024/06/22/front_end/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%B4%A2%20nuxt3%20composables%EF%BC%9A%E6%8E%8C%E6%8F%A1%E7%9B%AE%E5%BD%95%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%86%85%E7%BD%AEapi%E7%9A%84%E9%AB%98%E6%95%88%E5%BA%94%E7%94%A8/index.html><meta property=og:type content=website><meta property=og:title content="深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用 - cmdragon’s Blog"><meta property=og:description content="深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用, 摘要：“本文深入探讨了Nuxt3 Composables，重点介绍了其目录架构和内置API的高效应用。通过学习本文，读者将能够更好地理解和利用Nuxt3 Composables来构建高效的应用程序。”"><meta property=og:image content=https://api.btstu.cn/sjbz/api.php><meta name=twitter:card content=https://api.btstu.cn/sjbz/api.php><meta property=twitter:domain content=cmdragon.cn><meta property=twitter:url content=https://blog.cmdragon.cn/2024/06/22/front_end/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%B4%A2%20nuxt3%20composables%EF%BC%9A%E6%8E%8C%E6%8F%A1%E7%9B%AE%E5%BD%95%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%86%85%E7%BD%AEapi%E7%9A%84%E9%AB%98%E6%95%88%E5%BA%94%E7%94%A8/index.html><meta name=twitter:title content="深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用 - cmdragon’s Blog"><meta name=twitter:description content="深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用, 摘要：“本文深入探讨了Nuxt3 Composables，重点介绍了其目录架构和内置API的高效应用。通过学习本文，读者将能够更好地理解和利用Nuxt3 Composables来构建高效的应用程序。”"><meta name=twitter:image content=https://api.btstu.cn/sjbz/api.php><script type=text/javascript>((t,e,n,a,c,r)=>{t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(c=e.createElement(a)).async=1,c.src="https://www.clarity.ms/tag/mmt9qkvlod",(r=e.getElementsByTagName(a)[0]).parentNode.insertBefore(c,r)})(window,document,"clarity","script")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2874982874195135" crossorigin=anonymous></script><script charset=UTF-8 id=LA_COLLECT src=//sdk.51.la/js-sdk-pro.min.js></script><script>LA.init({id:"3IdZIMuyj5mvN0Fz",ck:"3IdZIMuyj5mvN0Fz"})</script><meta name=baidu-site-verification content=codeva-1e6idrc8FW><script>(()=>{var e,t,o,r,n=document.getElementsByTagName("link");if(0<n.length)for(i=0;i<n.length;i++)"canonical"==n[i].rel.toLowerCase()&&n[i].href&&(e=n[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,r=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",r?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)})()</script><title>深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用 | cmdragon&#39;s Blog</title><script type=application/ld+json>{
            "@context": "https://schema.org",
            "@type": "NewsArticle",
            "headline": "深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用 - cmdragon’s Blog",
            "image": [
                "https://api.btstu.cn/sjbz/api.php",
                "https://t.alcy.cc/mp/",
                "https://img.xjh.me/random_img.php"
            ],
            "datePublished": "Sun Jun 23 2024 00:00:00 GMT+0800",
            "dateModified": "Sun Jun 23 2024 00:00:00 GMT+0800",
            "aggregateRating": {
                "@type": "AggregateRating",
                "itemReviewed": {
                    "type": "Book",
                    "name": "深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用 - cmdragon’s Blog"
                },
                "ratingValue": 9.5,
                "bestRating": "10",
                "ratingCount": 526
            },
            "publisher":
              {
                    "@type": "Person",
                    "name": "cmdragon",
                    "url": "https://github.com/Amd794"
              },
            "author": [
                {
                    "@type": "Person",
                    "name": "cmdragon",
                    "url": "https://cmdragon.cn/"
                },
                {
                    "@type": "Person",
                    "name": "amd794",
                    "url": "https://github.com/Amd794"
                }
            ]
        }</script><script>(()=>{var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,e)})()</script><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/images/favicon.ico><link rel=stylesheet href=/font/css/fontawesome.min.css><link rel=stylesheet href=/font/css/regular.min.css><link rel=stylesheet href=/font/css/solid.min.css><link rel=stylesheet href=/font/css/brands.min.css><script class=keep-theme-configurations>let KEEP=window.KEEP||{};KEEP.hexo_config={hostname:"blog.cmdragon.cn",root:"/",language:["zh-CN","zh-TW","en","default"],path:"search.json"},KEEP.theme_config={base_info:{primary_color:"#0066cc",title:"cmdragon's Blog",author:"cmdragon",avatar:"/images/avatar.jpg",logo:"/images/logo.svg",favicon:"/images/favicon.ico",apple_touch_icon:"/images/apple-touch-icon.png"},menu:{Home:"/",Archives:"/archives","工具箱":"https://tools.cmdragon.cn",Links:"/links"},first_screen:{enable:!0,background_img:"/images/bg.svg",background_img_dark:"/images/bg.svg",description:"Keep writing and Keep loving.",hitokoto:!0},social_contact:{enable:!0,links:null},scroll:{progress_bar:!0,hide_header:!0},home:{category:!1,tag:!0},post:{author_badge:{enable:!0,level_badge:!1,custom_badge:["炼气","筑基","结丹","元婴","化神","破虚","渡劫","大乘","散仙","真仙","金仙","玄仙","天仙","圣人"]},word_count:{wordcount:!0,min2read:!0},datetime_format:"YYYY-MM-DD HH:mm:ss",copyright_info:!0,share:!0,reward:{enable:!0,img_link:"/images/payment.jpg",text:"打赏作者一包辣条！"}},code_block:{tools:{enable:!0,style:"default"},highlight_theme:"default"},toc:{enable:!0,number:!0,expand_all:!0,init_open:!0,layout:"right"},local_search:{enable:!0,preload:!0},comment:{enable:!1},rss:{enable:!0},lazyload:{enable:!0},cdn:{enable:!1,provider:"cdnjs"},footer:{since:2023,word_count:!1,record:{enable:!1,list:[{code:"粤ICP备2024258322号-2",link:"https://beian.miit.gov.cn"}]},site_deploy:{enable:!0,provider:"github",url:"https://tools.cmdragon.cn/"}},mermaid:{enable:!0,version:"latest"},root:"",source_data:{icons:{"赞赏":{svg:'<svg t="1706412189860" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3855" width="200" height="200"><path d="M984 632.9l-0.2 0.2C953.9 522 885.5 425.4 791.3 360.3c-13.9-9.6-32-10.5-47.8-4.4-150.4 58.7-317.4 58.7-467.7 0-15.8-6.2-33.8-5.2-47.7 4.4C65.4 473.3-12 675.6 35.7 869.7 65 947.3 136.4 1001.2 219 1008.1h594.6c59.8-1.5 115-32.7 147.1-83.2 18-24.9 28.3-54.5 29.8-85.2 15.9-68.3 13.7-139.6-6.5-206.8zM632.4 795h-91.7v61.7c0 16.4-13.3 29.8-29.8 29.8-16.4 0-29.8-13.3-29.8-29.8V795h-91.6c-16.4 0-29.8-13.3-29.8-29.8 0-16.4 13.3-29.8 29.8-29.8h91.6v-61.8h-91.6c-16.4 0-29.8-13.3-29.8-29.8 0-16.4 13.3-29.8 29.8-29.8H447l-68.2-68.2c-8.1-7.5-11.4-18.8-8.7-29.5 2.7-10.7 11.1-19 21.7-21.7 10.7-2.7 22 0.6 29.5 8.7l85.2 85.2 85.2-85.2c11.9-11 30.4-10.7 41.8 0.7 11.5 11.5 11.8 29.9 0.8 41.8L570.4 614h61.7c16.4 0 29.8 13.3 29.8 29.8 0 16.4-13.3 29.8-29.8 29.8h-91.9v61.7h92c16.4 0 29.8 13.3 29.8 29.8 0.2 16.6-13.2 29.9-29.6 29.9z" p-id="3856"></path><path d="M297.6 310.4l0.1-0.2 14.9 14.9c2.5 1.7 5.5 2.4 8.5 2.1 122.8 39.3 254.9 38.3 377.3-2.8 2.1-1.2 4.2-2.3 6.4-3.5 27-22.3 48.2-50.9 61.7-83.2 6.3-14.9 6.3-21.3 12.8-36.2 1-7.5 1.1-13.8 1.4-20.4 0.3-0.7 0.4-1.2 0.7-1.9 6.3-46.9 0-74.5-27.6-95.8-22.9-14.8-49.4-22.9-76.7-23.4-17.9-1.1-35.8 3.4-51.1 12.8h-2c-0.6 0-1.1-0.2-1.5-0.6-0.4-0.4-0.6-0.9-0.6-1.5-29.3-26.3-67.3-40.7-106.6-40.6-38.7-0.5-76.1 14-104.5 40.4-6.3 0-6.3 2.1-8.5 2.1h-2.2c-15.6-6.2-32.3-9.1-49.1-8.5-8.6-0.4-17.2 0.3-25.6 2.1-24.1 1.9-46.4 13.4-62 31.8-14.3 16.9-21.5 38.4-21.1 60.4-2.1 9.2-3.3 18.7-2.4 28.3 6 46.4 26.1 89.5 57.7 123.7z" p-id="3857"></path></svg>',link:"img | /images/payment.jpg"},Wechat:{svg:'<svg t="1718087712961" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1061" width="200" height="200"><path d="M26.54814827 512a485.45185173 485.45185173 0 1 1 970.90370346 0A485.45185173 485.45185173 0 0 1 26.54814827 512z m596.86305173-90.41540693c7.16041493 0 14.19946667 0.60681493 21.3598816 1.2136288C625.71709653 334.62802987 530.2651264 269.2740736 421.46322987 269.2740736 299.61481493 269.2740736 199.85445973 351.13339307 199.85445973 455.26281493c0 60.07466667 33.07140693 109.46939307 88.53428054 147.75940694l-22.14874027 65.839408 77.49025173-38.53274134c27.6707552 5.33997013 50.00154027 10.92266667 77.49025174 10.92266667 6.85700693 0 13.77469653-0.2427264 20.63170346-0.97090347a156.19413333 156.19413333 0 0 1-6.79632533-45.6931552c0-95.51265173 83.01226667-173.00290347 188.3553184-173.00290346h-0.0606816z m-119.17842987-59.3464896c16.6267264 0 27.6707552 10.92266667 27.67075627 27.30666666s-11.04402987 27.30666667-27.67075627 27.30666667c-16.74808853 0-33.37481493-10.92266667-33.37481493-27.30666667 0.30340693-16.384 16.93013333-27.30666667 33.37481493-27.30666666z m-155.04118506 54.73469653c-16.68740693 0-33.37481493-10.92266667-33.37481494-27.30666667 0-16.4446816 16.68740693-27.30666667 33.37481494-27.30666666 16.6267264 0 27.6707552 10.86198507 27.6707552 27.30666666 0 16.2019552-10.92266667 27.30666667-27.6707552 27.30666667z m476.28894826 175.0660736c0-87.38133333-88.5342816-158.56071147-188.11259306-158.5607104-105.40373333 0-188.3553184 71.24005973-188.3553184 158.5607104 0 87.68474027 82.95158507 158.6820736 188.3553184 158.68207467 22.08805973 0 44.4188448-5.58269653 66.50690453-10.92266667l60.86352533 32.9500448-16.68740693-54.73469653c44.2974816-32.9500448 77.42957013-76.7620736 77.42957013-125.97475627z m-249.0974816-27.30666667c-11.10471147 0-22.08805973-10.92266667-22.08805866-21.84533333 0-10.86198507 10.98334827-21.72397013 22.08805866-21.72397013 16.68740693 0 27.6707552 10.92266667 27.6707552 21.78465173 0 10.92266667-11.10471147 21.78465173-27.6707552 21.78465173z m121.84841494 0c-11.04402987 0-22.02737813-10.92266667-22.02737814-21.84533333 0-10.86198507 10.98334827-21.72397013 22.08805974-21.72397013 16.5660448 0 27.6707552 10.92266667 27.6707552 21.78465173 0 10.92266667-11.3474368 21.78465173-27.6707552 21.78465173h-0.0606816z" fill="#333333" p-id="1062"></path></svg>',link:"img | /images/wx_qrcode.jpg"}}},version:"4.1.3"},KEEP.language_ago={second:"%s seconds ago",minute:"%s minutes ago",hour:"%s hours ago",day:"%s days ago",week:"%s weeks ago",month:"%s months ago",year:"%s years ago"},KEEP.language_code_block={copy:"Copy code",copied:"Copied",fold:"Fold code block",folded:"Folded"},KEEP.language_copy_copyright={copy:"Copy copyright info",copied:"Copied",title:"Original post title",author:"Original post author",link:"Original post link"}</script><meta name=generator content="Hexo 7.3.0"></head><body><div class=progress-bar-container><span class=scroll-progress-bar></span></div><main class="page-container border-box"><div class="page-main-content border-box"><div class=page-main-content-top><header class=header-wrapper><div class="border-box header-content"><div class="left border-box"><a class="logo-image border-box" href=/ ><img src=/images/logo.svg alt=logo> </a><a class="site-name border-box" href=/ >cmdragon&#39;s Blog</a></div><div class="right border-box"><div class=pc><ul class=menu-list><li class=menu-item><a class="" href=/ >首页</a></li><li class=menu-item><a class="" href=/archives>归档</a></li><li class=menu-item><a class="" target=_blank rel=noopener href=https://tools.cmdragon.cn>工具箱</a></li><li class=menu-item><a class="" href=/links>友链</a></li><li class="menu-item search search-popup-trigger"><i class="fas search fa-search"></i></li></ul></div><div class=mobile><div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div><div class="icon-item menu-bar"><div class=menu-bar-middle></div></div></div></div></div><div class=header-drawer><ul class=drawer-menu-list><li class="drawer-menu-item flex-center"><a class="" href=/ >首页</a></li><li class="drawer-menu-item flex-center"><a class="" href=/archives>归档</a></li><li class="drawer-menu-item flex-center"><a class="" target=_blank rel=noopener href=https://tools.cmdragon.cn>工具箱</a></li><li class="drawer-menu-item flex-center"><a class="" href=/links>友链</a></li></ul></div><div class=window-mask></div></header></div><div class="page-main-content-middle border-box"><div class="main-content border-box"><div class=fade-in-down-animation><div class="post-page-container border-box"><div class="post-content-container border-box"><div class="post-content-bottom border-box"><h1 class=post-title>深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用</h1><div class="post-header border-box"><div class="avatar-box border-box"><img src=/images/avatar.jpg alt=avatar></div><div class=info-box><div class="author border-box"><span class=name>cmdragon</span> <span class=author-badge>大乘</span></div><div class="meta-info border-box"><div class="post-meta-info-container border-box post"><div class="post-meta-info border-box"><span class="meta-info-item post-create-date"><i class="icon fa-solid fa-calendar-plus"></i>&nbsp; <span class=datetime>2024-06-23 00:00:00</span> </span><span class="meta-info-item post-update-date"><i class="icon fa-solid fa-file-pen"></i>&nbsp; <span class=datetime data-updated="Sat Jun 22 2024 16:00:00 GMT+0000">2024-06-23 00:00:00</span> </span><span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;<ul class=post-category-ul><li class=category-item><a href=/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ >前端开发</a></li></ul></span><span class="post-tag meta-info-item border-box"><ul class=post-tag-ul><li class=tag-item><span class=tag-separator><i class="icon fas fa-hashtag"></i></span><a href=/tags/Nuxt3/ >Nuxt3</a></li><li class=tag-item><span class=tag-separator><i class="icon fas fa-hashtag"></i></span><a href=/tags/Composables/ >Composables</a></li><li class=tag-item><span class=tag-separator><i class="icon fas fa-hashtag"></i></span><a href=/tags/%E7%9B%AE%E5%BD%95%E6%9E%B6%E6%9E%84/ >目录架构</a></li><li class=tag-item><span class=tag-separator><i class="icon fas fa-hashtag"></i></span><a href=/tags/%E5%86%85%E7%BD%AEAPI/ >内置API</a></li><li class=tag-item><span class=tag-separator><i class="icon fas fa-hashtag"></i></span><a href=/tags/%E9%AB%98%E6%95%88%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/ >高效应用程序</a></li><li class=tag-item><span class=tag-separator><i class="icon fas fa-hashtag"></i></span><a href=/tags/%E6%9E%84%E5%BB%BA%E5%BA%94%E7%94%A8/ >构建应用</a></li><li class=tag-item><span class=tag-separator><i class="icon fas fa-hashtag"></i></span><a href=/tags/%E5%AD%A6%E4%B9%A0/ >学习</a></li></ul></span><span class="meta-info-item post-wordcount"><i class="icon fas fa-file-word"></i>&nbsp;<span>12.1k 字</span> </span><span class="meta-info-item post-min2read"><i class="icon fas fa-clock"></i>&nbsp;<span>53 分钟</span></span></div></div></div></div></div><div class="post-content keep-markdown-body"><img lazyload alt=image data-src="https://static.amd794.com/blog/images/2024_06_23 15_00_16.png@blog" title="2024_06_23 15_00_16.png" alt="2024_06_23 15_00_16.png"> <img lazyload alt=image data-src=https://api2.cmdragon.cn/upload/cmder/20250304_012821924.jpg title=cmdragon_cn.png alt=cmdragon_cn.png><h2 id=Nuxt3-Composables><a href=#Nuxt3-Composables class=headerlink title="Nuxt3 Composables"></a>Nuxt3 Composables</h2><h3 id=1-1-Composables-概述><a href=#1-1-Composables-概述 class=headerlink title="1.1 Composables 概述"></a><strong>1.1 Composables 概述</strong></h3><p>Composables 是 Vue 3 中的一种新特性，它允许在组件之间共享可复用的逻辑和计算。Composables 是轻量级的，它们不是真正的组件，而是独立的<br>JavaScript 文件，通常位于<code>~/composables</code>目录下。它们可以包含数据、方法、计算属性等，可以被任何组件导入并使用，从而帮助组织代码，减少重复，并提高代码的可复用性。</p><h3 id=1-2-安装与配置><a href=#1-2-安装与配置 class=headerlink title="1.2 安装与配置"></a><strong>1.2 安装与配置</strong></h3><p>在 Nuxt.js 3 中，由于 Nuxt 本身已经集成了 Vue 3 的 Composables，所以你不需要额外安装。只需在项目中创建一个<code>~/composables</code><br>文件夹，然后在其中创建<code>.js</code>或<code>.ts</code>文件来定义你的 Composables。</p><p>Nuxt 提供了自动导入和使用 Composables 的支持。在需要使用 Composables 的组件中，只需使用<code>import</code>语句导入，例如：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>// components/MyComponent.vue</span><br><span class=line>import &#123; useMyFunction &#125; from &quot;~/composables/myFunction.js&quot;</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const result = useMyFunction();</span><br><span class=line>    // ...</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><h3 id=1-3-使用-Composables-的基本步骤><a href=#1-3-使用-Composables-的基本步骤 class=headerlink title="1.3 使用 Composables 的基本步骤"></a><strong>1.3 使用 Composables 的基本步骤</strong></h3><ol><li><strong>创建 Composables</strong>：在<code>~/composables</code>文件夹中，创建一个文件（如<code>myFunction.js</code>），定义你的函数或计算逻辑。</li><li><strong>导入 Composables</strong>：在需要使用的地方，如组件的<code>setup</code>函数中，导入需要的 Composables。</li><li><strong>使用 Composables</strong>：在导入后，可以直接使用 Composables 中的变量、方法或计算属性。</li><li><strong>更新和响应式</strong>：由于 Vue 3 的响应式系统，当你在 Composables 中修改数据时，依赖于这些数据的组件会自动更新。</li></ol><h3 id=1-4-Composables-与-Vue-3-的响应式系统><a href=#1-4-Composables-与-Vue-3-的响应式系统 class=headerlink title="1.4 Composables 与 Vue 3 的响应式系统"></a><strong>1.4 Composables 与 Vue 3 的响应式系统</strong></h3><p>Composables 中的数据默认是响应式的，因为它们是 Vue 3 组件的一部分。当你在 Composables 中定义一个数据对象或计算属性，并在组件中使用它，Vue<br>的变更检测系统会在数据变化时自动更新组件。例如：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>// myFunction.js</span><br><span class=line>export const myData = ref(0);</span><br><span class=line></span><br><span class=line>export function increment() &#123;</span><br><span class=line>  myData.value++;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在组件中：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>import &#123; myData, increment &#125; from &quot;~/composables/myFunction.js&quot;</span><br><span class=line></span><br><span class=line>setup() &#123;</span><br><span class=line>  onMounted(() =&gt; increment()); // 初始化</span><br><span class=line>  watch(myData, () =&gt; console.log(&#x27;Data updated!&#x27;)); // 监听数据变化</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>当<code>myData</code>的值改变时，组件中的<code>watch</code>会触发。这就是 Composables 和 Vue 3 响应式系统协同工作的基本方式。</p><h2 id=核心-Composables><a href=#核心-Composables class=headerlink title="核心 Composables"></a>核心 Composables</h2><h3 id=2-1-useFetch><a href=#2-1-useFetch class=headerlink title="2.1 useFetch"></a>2.1 useFetch</h3><p><code>useFetch</code>是 Nuxt 3 提供的一个核心 Composables，用于简化从 API 获取数据的过程。它封装了异步数据获取的逻辑，使得在组件中获取数据变得简单和直观。</p><h4 id=基本用法><a href=#基本用法 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><ol><li><strong>导入 useFetch</strong>：在组件中导入<code>useFetch</code>。</li><li><strong>使用 useFetch</strong>：在组件的<code>setup</code>函数中调用<code>useFetch</code>，并传入一个 URL 或一个返回 URL 的函数。</li></ol><p>示例代码如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre></td><td class=code><pre><span class=line>// components/MyComponent.vue</span><br><span class=line>import &#123; useFetch &#125; from &#x27;#app&#x27;; // 使用 Nuxt 3 的内置 useFetch</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const &#123; data, pending, error &#125; = useFetch(&#x27;/api/data&#x27;);</span><br><span class=line></span><br><span class=line>    return &#123;</span><br><span class=line>      data,</span><br><span class=line>      pending,</span><br><span class=line>      error</span><br><span class=line>    &#125;;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>useFetch</code>被用来获取<code>/api/data</code>的数据。<code>data</code>包含从 API 返回的数据，<code>pending</code><br>是一个布尔值，表示请求是否正在进行中，<code>error</code>包含任何可能发生的错误。</p><h4 id=进阶用法><a href=#进阶用法 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><p><code>useFetch</code>也支持更高级的用法，例如自定义请求选项、处理响应和错误等。</p><ol><li><strong>自定义请求选项</strong>：可以传递一个对象作为第二个参数，来配置请求，如设置请求方法、头部信息等。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>setup() &#123;</span><br><span class=line>  const &#123; data, pending, error &#125; = useFetch(&#x27;/api/data&#x27;, &#123; method: &#x27;POST&#x27;, headers: &#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125; &#125;);</span><br><span class=line></span><br><span class=line>  return &#123;</span><br><span class=line>    data,</span><br><span class=line>    pending,</span><br><span class=line>    error</span><br><span class=line>  &#125;;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>处理响应和错误</strong>：可以添加额外的逻辑来处理响应数据或错误。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>setup() &#123;</span><br><span class=line>  const &#123; data, pending, error &#125; = useFetch(&#x27;/api/data&#x27;);</span><br><span class=line></span><br><span class=line>  if (error.value) &#123;</span><br><span class=line>    console.error(&#x27;Error fetching data:&#x27;, error.value);</span><br><span class=line>  &#125;</span><br><span class=line></span><br><span class=line>  return &#123;</span><br><span class=line>    data,</span><br><span class=line>    pending,</span><br><span class=line>    error</span><br><span class=line>  &#125;;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>动态 URL</strong>：可以传递一个返回 URL 的函数，使得 URL 可以根据组件的状态动态变化。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line>setup() &#123;</span><br><span class=line>  const url = computed(() =&gt; `/api/data?id=$&#123;someId.value&#125;`);</span><br><span class=line>  const &#123; data, pending, error &#125; = useFetch(url);</span><br><span class=line></span><br><span class=line>  return &#123;</span><br><span class=line>    data,</span><br><span class=line>    pending,</span><br><span class=line>    error</span><br><span class=line>  &#125;;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，URL 是根据<code>someId</code>的值动态生成的。</p><p>通过这些进阶用法，<code>useFetch</code>可以适应更复杂的数据获取需求，同时保持代码的清晰和简洁。</p><h3 id=2-2-useHead><a href=#2-2-useHead class=headerlink title="2.2 useHead"></a>2.2 useHead</h3><p><code>useHead</code>是 Nuxt 3 中的一个核心 Composable，用于管理组件的<code>&lt;head&gt;</code>元数据，如标题、meta<br>标签、图标等。它简化了在多个组件中管理头部元数据的过程，确保在整个应用中保持一致性和SEO优化。</p><h4 id=基本用法-1><a href=#基本用法-1 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><ol><li><strong>导入 useHead</strong>：在组件中导入<code>useHead</code>。</li><li><strong>使用 useHead</strong>：在组件的<code>setup</code>函数中调用<code>useHead</code>，返回一个<code>head</code>对象，你可以在这个对象上添加或修改头部元数据。</li></ol><p>示例代码如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line>// components/MyComponent.vue</span><br><span class=line>import &#123; useHead &#125; from &#x27;#app&#x27;;</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const head = useHead();</span><br><span class=line></span><br><span class=line>    head.title(&#x27;My Component Title&#x27;);</span><br><span class=line>    head.meta(&#123; name: &#x27;description&#x27;, content: &#x27;This is a description for my component&#x27; &#125;);</span><br><span class=line></span><br><span class=line>    return &#123;</span><br><span class=line>      head</span><br><span class=line>    &#125;;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>head.title</code>设置了组件的标题，<code>head.meta</code>添加了一个描述元标签。</p><h4 id=进阶用法-1><a href=#进阶用法-1 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>动态头部数据</strong>：你可以根据组件的状态动态设置头部元数据。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line>setup() &#123;</span><br><span class=line>  const title = computed(() =&gt; `My Component - $&#123;someValue.value&#125;`);</span><br><span class=line>  const head = useHead();</span><br><span class=line></span><br><span class=line>  head.title(title);</span><br><span class=line></span><br><span class=line>  return &#123;</span><br><span class=line>    title,</span><br><span class=line>    head</span><br><span class=line>  &#125;;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>预渲染优化</strong>：<code>useHead</code>可以配合预渲染（SSR）来设置预渲染时的头部元数据，这对于SEO非常重要。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line>setup() &#123;</span><br><span class=line>  const head = useHead();</span><br><span class=line></span><br><span class=line>  if (process.server) &#123;</span><br><span class=line>    head.title(&#x27;My Component Title (Server-side)&#x27;);</span><br><span class=line>  &#125;</span><br><span class=line></span><br><span class=line>  return &#123;</span><br><span class=line>    head</span><br><span class=line>  &#125;;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>处理默认头部</strong>：<code>useHead</code>会自动处理 Nuxt 的默认头部，你可以覆盖它们，但也可以选择保留默认的。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>setup() &#123;</span><br><span class=line>  const head = useHead();</span><br><span class=line></span><br><span class=line>  head.meta(&#123; ...head.meta(), name: &#x27;robots&#x27;, content: &#x27;noindex, nofollow&#x27; &#125;);</span><br><span class=line></span><br><span class=line>  return &#123;</span><br><span class=line>    head</span><br><span class=line>  &#125;;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，添加了一个新的元标签，同时保留了默认的元标签。</p><p><code>useHead</code>提供了一种灵活的方式来管理组件的头部元数据，使得整个应用的SEO优化和元数据一致性变得简单。</p><h3 id=2-3-useRuntimeConfig><a href=#2-3-useRuntimeConfig class=headerlink title="2.3 useRuntimeConfig"></a>2.3 useRuntimeConfig</h3><p><code>useRuntimeConfig</code>是 Nuxt 3 中的一个核心 Composable，用于在应用的运行时获取配置信息。它使得在不同环境（开发、生产）下使用不同的配置变得简单。</p><h4 id=基本用法-2><a href=#基本用法-2 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><ol><li><strong>导入 useRuntimeConfig</strong>：在组件中导入<code>useRuntimeConfig</code>。</li><li><strong>使用 useRuntimeConfig</strong>：在组件的<code>setup</code>函数中调用<code>useRuntimeConfig</code>，返回一个对象，包含了应用的运行时配置。</li></ol><p>示例代码如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre></td><td class=code><pre><span class=line>// components/MyComponent.vue</span><br><span class=line>import &#123; useRuntimeConfig &#125; from &#x27;#app&#x27;;</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const config = useRuntimeConfig();</span><br><span class=line></span><br><span class=line>    console.log(config.public.apiBase);</span><br><span class=line></span><br><span class=line>    return &#123;</span><br><span class=line>      config</span><br><span class=line>    &#125;;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>config.public.apiBase</code>获取了应用的公共配置信息中的<code>apiBase</code>属性。</p><h4 id=进阶用法-2><a href=#进阶用法-2 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>区分环境</strong>：你可以根据不同的环境（开发、生产）使用不同的配置。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>// nuxt.config.ts</span><br><span class=line>export default defineNuxtConfig(&#123;</span><br><span class=line>  runtimeConfig: &#123;</span><br><span class=line>    public: &#123;</span><br><span class=line>      apiBase: process.env.NODE_ENV === &#x27;development&#x27; ? &#x27;http://localhost:3000/api&#x27; : &#x27;https://myapp.com/api&#x27;</span><br><span class=line>    &#125;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;);</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，根据不同的环境设置了不同的<code>apiBase</code>值。</p><ol start=2><li><strong>私有配置</strong>：你可以在<code>runtimeConfig</code>中设置私有配置，这些配置只在服务器端可用。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre></td><td class=code><pre><span class=line>// nuxt.config.ts</span><br><span class=line>export default defineNuxtConfig(&#123;</span><br><span class=line>  runtimeConfig: &#123;</span><br><span class=line>    secretKey: &#x27;my-secret-key&#x27;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line>// components/MyComponent.vue</span><br><span class=line>import &#123; useRuntimeConfig &#125; from &#x27;#app&#x27;;</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const config = useRuntimeConfig();</span><br><span class=line></span><br><span class=line>    console.log(config.secretKey);</span><br><span class=line></span><br><span class=line>    return &#123;</span><br><span class=line>      config</span><br><span class=line>    &#125;;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>config.secretKey</code>获取了应用的私有配置信息中的<code>secretKey</code>属性。</p><ol start=3><li><strong>使用<code>defineNuxtConfig</code>自定义配置</strong>：你可以使用<code>defineNuxtConfig</code>函数自定义配置，并在<code>runtimeConfig</code>中使用它们。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre></td><td class=code><pre><span class=line>// nuxt.config.ts</span><br><span class=line>export default defineNuxtConfig(&#123;</span><br><span class=line>  myCustomConfig: &#x27;my-custom-value&#x27;,</span><br><span class=line>  runtimeConfig: &#123;</span><br><span class=line>    public: &#123;</span><br><span class=line>      apiBase: process.env.NODE_ENV === &#x27;development&#x27; ? &#x27;http://localhost:3000/api&#x27; : &#x27;https://myapp.com/api&#x27;</span><br><span class=line>    &#125;,</span><br><span class=line>    myCustomConfig: &#123;</span><br><span class=line>      type: String,</span><br><span class=line>      default: &#x27;default-value&#x27;</span><br><span class=line>    &#125;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line>// components/MyComponent.vue</span><br><span class=line>import &#123; useRuntimeConfig &#125; from &#x27;#app&#x27;;</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const config = useRuntimeConfig();</span><br><span class=line></span><br><span class=line>    console.log(config.myCustomConfig);</span><br><span class=line></span><br><span class=line>    return &#123;</span><br><span class=line>      config</span><br><span class=line>    &#125;;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，使用<code>defineNuxtConfig</code>自定义了一个名为<code>myCustomConfig</code>的配置，并在<code>runtimeConfig</code>中使用了它。</p><p><code>useRuntimeConfig</code>提供了一种简单、强大的方式来获取应用的运行时配置，同时支持区分环境和自定义配置。</p><h3 id=2-4-useRequestEvent><a href=#2-4-useRequestEvent class=headerlink title="2.4 useRequestEvent"></a>2.4 useRequestEvent</h3><p>基本用法</p><p><code>useRequestEvent</code>是 Nuxt 3 提供的一个用于访问 HTTP 请求事件的 Composable。它允许你访问请求对象，这对于处理中间件、分析请求信息或者执行基于请求的自定义逻辑非常有用。</p><h4 id=基本用法-3><a href=#基本用法-3 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><ol><li><strong>导入 useRequestEvent</strong>：在组件或页面中导入<code>useRequestEvent</code>。</li><li><strong>使用 useRequestEvent</strong>：在组件的<code>setup</code>函数或者页面中直接调用<code>useRequestEvent</code>。</li></ol><p>示例代码如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre></td><td class=code><pre><span class=line>// pages/index.vue</span><br><span class=line>import &#123; useRequestEvent &#125; from &#x27;#app&#x27;;</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const requestEvent = useRequestEvent();</span><br><span class=line></span><br><span class=line>    console.log(requestEvent.node.req.url); // 输出请求的URL</span><br><span class=line></span><br><span class=line>    return &#123;</span><br><span class=line>      requestEvent</span><br><span class=line>    &#125;;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>requestEvent.node.req.url</code>获取了当前请求的 URL。</p><h4 id=进阶用法-3><a href=#进阶用法-3 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>监听请求事件</strong>：你可以使用<code>watch</code>或<code>watchEffect</code>来监听请求事件的变化。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre></td><td class=code><pre><span class=line>// pages/index.vue</span><br><span class=line>import &#123; useRequestEvent, watch &#125; from &#x27;#app&#x27;;</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const requestEvent = useRequestEvent();</span><br><span class=line></span><br><span class=line>    watch(() =&gt; requestEvent.node.req.url, (newUrl, oldUrl) =&gt; &#123;</span><br><span class=line>      console.log(`请求URL从 $&#123;oldUrl&#125; 变更为 $&#123;newUrl&#125;`);</span><br><span class=line>    &#125;);</span><br><span class=line></span><br><span class=line>    return &#123;</span><br><span class=line>      requestEvent</span><br><span class=line>    &#125;;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，每当请求的 URL 发生变化时，都会打印出变化前后的 URL。</p><ol start=2><li><strong>使用请求事件进行条件逻辑</strong>：根据请求事件执行不同的逻辑。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre></td><td class=code><pre><span class=line>// pages/index.vue</span><br><span class=line>import &#123; useRequestEvent &#125; from &#x27;#app&#x27;;</span><br><span class=line></span><br><span class=line>export default &#123;</span><br><span class=line>  setup() &#123;</span><br><span class=line>    const requestEvent = useRequestEvent();</span><br><span class=line></span><br><span class=line>    if (requestEvent.node.req.method === &#x27;POST&#x27;) &#123;</span><br><span class=line>      // 处理POST请求</span><br><span class=line>    &#125; else &#123;</span><br><span class=line>      // 处理其他类型的请求</span><br><span class=line>    &#125;</span><br><span class=line></span><br><span class=line>    return &#123;</span><br><span class=line>      requestEvent</span><br><span class=line>    &#125;;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，根据请求的方法类型（GET、POST等）来执行不同的逻辑。</p><ol start=3><li><strong>结合中间件使用</strong>：在 Nuxt 3 中，你可以使用中间件来处理请求，并在中间件中使用<code>useRequestEvent</code>。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>// middleware/analyze-request.js</span><br><span class=line>export default defineNuxtMiddleware((req, res, next) =&gt; &#123;</span><br><span class=line>  const requestEvent = useRequestEvent();</span><br><span class=line></span><br><span class=line>  console.log(requestEvent.node.req.url); // 输出请求的URL</span><br><span class=line></span><br><span class=line>  next();</span><br><span class=line>&#125;);</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，中间件<code>analyze-request.js</code>使用<code>useRequestEvent</code>来输出请求的 URL，然后调用<code>next()</code>以继续处理请求。</p><p><code>useRequestEvent</code>是处理 HTTP 请求的一个强大工具，特别是在需要根据请求信息进行逻辑决策或者执行请求相关的操作时。通过上述的基本和进阶用法，你可以更好地利用<br>Nuxt 3 提供的功能来处理请求事件。</p><h3 id=2-5-useAppConfig><a href=#2-5-useAppConfig class=headerlink title="2.5 useAppConfig"></a>2.5 useAppConfig</h3><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line></span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=5><li><strong>在插件中使用配置：</strong>如果你正在编写一个 Nuxt 插件，你可以在插件内部使用<code>useAppConfig</code>。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>export default defineNuxtPlugin(nuxtApp =&gt; &#123;</span><br><span class=line>  const &#123; config &#125; = useAppConfig();</span><br><span class=line>  // 使用配置...</span><br><span class=line>&#125;);</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在使用<code>useAppConfig</code>时，需要注意的是，任何对配置的修改都会影响整个应用程序的运行时行为。因此，在修改配置时要格外小心，确保这些修改不会导致不可预见的问题。</p><p>此外，<code>useAppConfig</code>的具体实现可能会随着 Nuxt 3 的版本更新而发生变化，所以建议查阅最新的 Nuxt 3 文档以获取最准确的信息。</p><h3 id=2-6-useAsyncData><a href=#2-6-useAsyncData class=headerlink title="2.6 useAsyncData"></a>2.6 useAsyncData</h3><h4 id=基本用法-4><a href=#基本用法-4 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><p><code>useAsyncData</code>的基本用法如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const &#123; data, pending, error &#125; = useAsyncData(&#x27;my-key&#x27;, () =&gt;</span><br><span class=line>  $fetch(&#x27;https://api.example.com/data&#x27;)</span><br><span class=line>)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div v-if=&quot;pending&quot;&gt;</span><br><span class=line>    数据加载中...</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>  &lt;div v-else-if=&quot;error&quot;&gt;</span><br><span class=line>    加载数据时出错：&#123;&#123; error.message &#125;&#125;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>  &lt;div v-else&gt;</span><br><span class=line>    数据：&#123;&#123; data &#125;&#125;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>useAsyncData</code>接收两个参数：</p><ol><li><code>key</code>: 一个字符串，用于唯一标识这个异步数据请求。</li><li><code>fn</code>: 一个函数，用于在服务器端和客户端执行异步数据请求。</li></ol><p><code>useAsyncData</code>返回一个对象，包含以下属性：</p><ol><li><code>data</code>: 一个响应式的对象，包含异步数据请求的结果。</li><li><code>pending</code>: 一个布尔值，表示异步数据请求是否正在进行中。</li><li><code>error</code>: 一个对象，如果异步数据请求失败，则包含错误信息。</li></ol><h4 id=进阶用法-4><a href=#进阶用法-4 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>在服务器端预取数据：</strong>你可以在服务器端预取数据，以提高首次渲染的性能。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const &#123; data, pending, error &#125; = useAsyncData(&#x27;my-key&#x27;, () =&gt;</span><br><span class=line>  $fetch(&#x27;https://api.example.com/data&#x27;),</span><br><span class=line>  &#123;</span><br><span class=line>    server: true</span><br><span class=line>  &#125;</span><br><span class=line>)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>&#123; server: true &#125;</code>选项表示在服务器端执行异步数据请求。</p><ol start=2><li><strong>在组件外部使用<code>useAsyncData</code>：</strong>你可以在任何地方使用<code>useAsyncData</code>，不仅仅是组件内部。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre></td><td class=code><pre><span class=line>// 例如，在服务器中间件中</span><br><span class=line>export default defineNitroRoute((req, res, next) =&gt; &#123;</span><br><span class=line>  const &#123; data, pending, error &#125; = useAsyncData(&#x27;my-key&#x27;, () =&gt;</span><br><span class=line>    $fetch(&#x27;https://api.example.com/data&#x27;)</span><br><span class=line>  )</span><br><span class=line></span><br><span class=line>  if (pending.value) &#123;</span><br><span class=line>    res.statusCode = 202</span><br><span class=line>    res.setHeader(&#x27;content-type&#x27;, &#x27;text/plain&#x27;)</span><br><span class=line>    res.end(&#x27;Data is loading...&#x27;)</span><br><span class=line>  &#125; else if (error.value) &#123;</span><br><span class=line>    res.statusCode = 500</span><br><span class=line>    res.setHeader(&#x27;content-type&#x27;, &#x27;text/plain&#x27;)</span><br><span class=line>    res.end(`Error: $&#123;error.value.message&#125;`)</span><br><span class=line>  &#125; else &#123;</span><br><span class=line>    res.statusCode = 200</span><br><span class=line>    res.setHeader(&#x27;content-type&#x27;, &#x27;application/json&#x27;)</span><br><span class=line>    res.end(JSON.stringify(data.value))</span><br><span class=line>  &#125;</span><br><span class=line>&#125;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>使用<code>useAsyncData</code>的可选参数：</strong><code>useAsyncData</code>接收一个可选的第三个参数，用于配置异步数据请求的选项。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const &#123; data, pending, error &#125; = useAsyncData(&#x27;my-key&#x27;, () =&gt;</span><br><span class=line>  $fetch(&#x27;https://api.example.com/data&#x27;),</span><br><span class=line>  &#123;</span><br><span class=line>    watch: [&#x27;someData&#x27;],</span><br><span class=line>    initialCache: true,</span><br><span class=line>    transform: (data) =&gt; &#123;</span><br><span class=line>      // 对数据进行转换</span><br><span class=line>      return data</span><br><span class=line>    &#125;</span><br><span class=line>  &#125;</span><br><span class=line>)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>watch</code>选项表示在<code>someData</code>变化时重新执行异步数据请求。<code>initialCache</code><br>选项表示在服务器端缓存异步数据请求的结果。<code>transform</code>选项表示对异步数据请求的结果进行转换。</p><ol start=4><li><strong>使用<code>ref</code>和<code>reactive</code>与<code>useAsyncData</code>结合使用：</strong>你可以使用<code>ref</code>和<code>reactive</code>与<code>useAsyncData</code>结合使用，以更好地控制异步数据请求的行为。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; ref, reactive &#125; from &#x27;vue&#x27;</span><br><span class=line></span><br><span class=line>const key = &#x27;my-key&#x27;</span><br><span class=line>const data = ref(null)</span><br><span class=line>const error = ref(null)</span><br><span class=line>const loading = ref(true)</span><br><span class=line></span><br><span class=line>const fetchData = async () =&gt; &#123;</span><br><span class=line>  try &#123;</span><br><span class=line>    const result = await useAsyncData(key, () =&gt;</span><br><span class=line>      $fetch(&#x27;https://api.example.com/data&#x27;)</span><br><span class=line>    )</span><br><span class=line></span><br><span class=line>    data.value = result.data</span><br><span class=line>    error.value = result.error</span><br><span class=line>    loading.value = false</span><br><span class=line>  &#125; catch (err) &#123;</span><br><span class=line>    error.value = err</span><br><span class=line>    loading.value = false</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>const config = reactive(&#123;</span><br><span class=line>  // 配置信息</span><br><span class=line>&#125;)</span><br><span class=line></span><br><span class=line>fetchData()</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们使用<code>ref</code>和<code>reactive</code>分别创建了<code>data</code>、<code>error</code>和<code>loading</code>的响应式变量，并在<code>fetchData</code><br>函数中执行异步数据请求。这种方式允许我们更好地控制异步数据请求的行为，并在不同的场景下进行更灵活的数据处理。</p><p>在使用<code>useAsyncData</code>时，需要注意的是，任何对异步数据请求的修改都会影响整个应用程序的行为。因此，在修改异步数据请求时要格外小心，确保这些修改不会导致不可预见的问题。</p><h3 id=2-7-useCookie><a href=#2-7-useCookie class=headerlink title="2.7 useCookie"></a>2.7 useCookie</h3><h4 id=基本用法-5><a href=#基本用法-5 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useCookie &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const getCookieValue = () =&gt; &#123;</span><br><span class=line>  const &#123; value &#125; = useCookie(&#x27;myCookieKey&#x27;)</span><br><span class=line>  return value</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div&gt;</span><br><span class=line>    Cookie value: &#123;&#123; getCookieValue() &#125;&#125;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>useCookie</code>接收一个参数，即你想要获取的 cookie 的键。它返回一个对象，包含<code>value</code>属性，表示 cookie 的值。如果<br>cookie 不存在，<code>value</code>会是<code>undefined</code>。</p><h4 id=进阶用法-5><a href=#进阶用法-5 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>设置 cookie：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useCookie &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const setCookie = (key, value, options = &#123;&#125;) =&gt; &#123;</span><br><span class=line>  useCookie(key, value, &#123;</span><br><span class=line>    ...options,</span><br><span class=line>    expires: 365, // 设置 cookie 的过期时间（单位为天）</span><br><span class=line>    path: &#x27;/&#x27;, // 设置 cookie 的路径</span><br><span class=line>    secure: process.server, // 如果在服务器端，则设置为 secure</span><br><span class=line>    httpOnly: true // 设置为 httpOnly，防止通过 JavaScript 访问</span><br><span class=line>  &#125;)</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;button @click=&quot;setCookie(&#x27;myCookieKey&#x27;, &#x27;cookieValue&#x27;)&quot;&gt;Set Cookie&lt;/button&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>setCookie</code>函数接受 cookie 的键、值和可选的选项，用于设置新的 cookie。</p><ol start=2><li><strong>删除 cookie：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useCookie &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const deleteCookie = (key) =&gt; &#123;</span><br><span class=line>  useCookie(key, &#x27;&#x27;, &#123;</span><br><span class=line>    path: &#x27;/&#x27;,</span><br><span class=line>    expires: -1 // 设置过期时间为过去，即立即删除</span><br><span class=line>  &#125;)</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;button @click=&quot;deleteCookie(&#x27;myCookieKey&#x27;)&quot;&gt;Delete Cookie&lt;/button&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p><code>deleteCookie</code>函数接受 cookie 的键，用于删除指定的 cookie。</p><ol start=3><li><strong>监听 cookie 变化：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useCookie, onMounted &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const cookieValue = ref(null)</span><br><span class=line></span><br><span class=line>onMounted(() =&gt; &#123;</span><br><span class=line>  cookieValue.value = useCookie(&#x27;myCookieKey&#x27;)</span><br><span class=line>  // 使用 watch 或者自定义事件来监听 cookie 的变化</span><br><span class=line>  watch(() =&gt; useCookie(&#x27;myCookieKey&#x27;), (newValue) =&gt; &#123;</span><br><span class=line>    cookieValue.value = newValue</span><br><span class=line>  &#125;)</span><br><span class=line>&#125;)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>通过监听<code>useCookie</code>的返回值，你可以实时获取并更新 cookie 的值。</p><ol start=4><li><strong>处理 cookie 的错误：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useCookie &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const getCookieValue = async () =&gt; &#123;</span><br><span class=line>  try &#123;</span><br><span class=line>    const &#123; value &#125; = await useCookie(&#x27;myCookieKey&#x27;)</span><br><span class=line>    return value</span><br><span class=line>  &#125; catch (error) &#123;</span><br><span class=line>    console.error(&#x27;Error reading cookie:&#x27;, error)</span><br><span class=line>    return null</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在使用<code>useCookie</code>时，可以使用 async&#x2F;await 结构来处理可能的错误。</p><h3 id=2-8-useError><a href=#2-8-useError class=headerlink title="2.8 useError"></a>2.8 useError</h3><h4 id=基本用法-6><a href=#基本用法-6 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useError &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const showError = () =&gt; &#123;</span><br><span class=line>  const &#123; show, message &#125; = useError()</span><br><span class=line>  if (show) &#123;</span><br><span class=line>    alert(message)</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;button @click=&quot;showError()&quot;&gt;Show Error&lt;/button&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>useError</code>返回一个对象，包含<code>show</code>和<code>message</code>属性。<code>show</code>是一个布尔值，表示是否有错误，<code>message</code><br>是错误信息。通过检查<code>show</code>，你可以决定是否显示错误提示。</p><h4 id=进阶用法-6><a href=#进阶用法-6 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>自定义错误处理：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useError &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const handleErrors = async (action) =&gt; &#123;</span><br><span class=line>  try &#123;</span><br><span class=line>    await action()</span><br><span class=line>  &#125; catch (error) &#123;</span><br><span class=line>    useError(&#123; show: true, message: error.message &#125;)</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>const fetchData = async () =&gt; &#123;</span><br><span class=line>  // 异步操作可能会抛出错误</span><br><span class=line>  const response = await fetch(&#x27;https://api.example.com&#x27;)</span><br><span class=line>  if (!response.ok) &#123;</span><br><span class=line>    throw new Error(&#x27;Failed to fetch data&#x27;)</span><br><span class=line>  &#125;</span><br><span class=line>  // 成功处理数据</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>&lt;button @click=&quot;handleErrors(fetchData)&quot;&gt;Fetch Data&lt;/button&gt;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p><code>handleErrors</code>函数包裹可能会抛出错误的异步操作，如果发生错误，它会调用<code>useError</code>显示错误。</p><ol start=2><li><strong>状态管理：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useError, ref &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const error = ref(null)</span><br><span class=line></span><br><span class=line>const handleFormSubmit = async () =&gt; &#123;</span><br><span class=line>  try &#123;</span><br><span class=line>    // 表单验证和提交逻辑</span><br><span class=line>    const result = await submitForm()</span><br><span class=line>    if (result.success) &#123;</span><br><span class=line>      error.value = null</span><br><span class=line>    &#125; else &#123;</span><br><span class=line>      useError(&#123; show: true, message: result.errorMessage &#125;)</span><br><span class=line>    &#125;</span><br><span class=line>  &#125; catch (error) &#123;</span><br><span class=line>    useError(&#123; show: true, message: error.message &#125;)</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>&lt;button @click=&quot;handleFormSubmit()&quot;&gt;Submit Form&lt;/button&gt;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在表单提交等需要处理成功和失败情况的操作中，你可以通过<code>ref</code>存储错误状态，并在错误发生时更新它。</p><ol start=3><li><strong>错误处理组件化：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useError &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line>import ErrorComponent from &#x27;@/components/Error.vue&#x27;</span><br><span class=line></span><br><span class=line>const showError = () =&gt; &#123;</span><br><span class=line>  const &#123; show, message &#125; = useError()</span><br><span class=line>  if (show) &#123;</span><br><span class=line>    return ErrorComponent(&#123; message &#125;)</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div&gt;</span><br><span class=line>    &lt;button @click=&quot;showError()&quot;&gt;Show Error&lt;/button&gt;</span><br><span class=line>    &lt;template v-if=&quot;showError()&quot;&gt;&#123;&#123; showError() &#125;&#125;&lt;/template&gt;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>你可以创建一个专门用于显示错误的组件，并在需要时根据<code>useError</code>的状态渲染它。</p><h3 id=2-9-useHeadSafe><a href=#2-9-useHeadSafe class=headerlink title="2.9 useHeadSafe"></a>2.9 useHeadSafe</h3><h4 id=基本用法-7><a href=#基本用法-7 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useHeadSafe &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const title = &#x27;My Page Title&#x27;</span><br><span class=line></span><br><span class=line>useHeadSafe(&#123;</span><br><span class=line>  title,</span><br><span class=line>&#125;)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>useHeadSafe</code>接收一个对象，其中包含需要设置的 head 标签。在这里，我们设置了页面标题。</p><h4 id=进阶用法-7><a href=#进阶用法-7 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>动态设置 head 标签：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useHeadSafe &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const title = ref(&#x27;My Page Title&#x27;)</span><br><span class=line></span><br><span class=line>watch(title, (newTitle) =&gt; &#123;</span><br><span class=line>  useHeadSafe(&#123;</span><br><span class=line>    title: newTitle,</span><br><span class=line>  &#125;)</span><br><span class=line>&#125;)</span><br><span class=line></span><br><span class=line>// 更新标题</span><br><span class=line>title.value = &#x27;New Page Title&#x27;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们使用<code>watch</code>监听<code>title</code>的变化，并在变化时动态更新 head 标签。</p><ol start=2><li><strong>设置多个 head 标签：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useHeadSafe &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const title = &#x27;My Page Title&#x27;</span><br><span class=line>const description = &#x27;My Page Description&#x27;</span><br><span class=line></span><br><span class=line>useHeadSafe(&#123;</span><br><span class=line>  title,</span><br><span class=line>  meta: [</span><br><span class=line>    &#123; hid: &#x27;description&#x27;, name: &#x27;description&#x27;, content: description &#125;,</span><br><span class=line>  ],</span><br><span class=line>&#125;)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们设置了多个 head 标签，包括标题和描述。</p><ol start=3><li><strong>条件渲染 head 标签：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useHeadSafe &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const showDescription = ref(true)</span><br><span class=line></span><br><span class=line>const title = &#x27;My Page Title&#x27;</span><br><span class=line>const description = &#x27;My Page Description&#x27;</span><br><span class=line></span><br><span class=line>useHeadSafe(&#123;</span><br><span class=line>  title,</span><br><span class=line>  meta: showDescription.value ? [</span><br><span class=line>    &#123; hid: &#x27;description&#x27;, name: &#x27;description&#x27;, content: description &#125;,</span><br><span class=line>  ] : [],</span><br><span class=line>&#125;)</span><br><span class=line></span><br><span class=line>// 切换描述的显示状态</span><br><span class=line>showDescription.value = false</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们根据<code>showDescription</code>的值动态渲染或隐藏描述 head 标签。</p><h3 id=2-10-useHydration><a href=#2-10-useHydration class=headerlink title="2.10 useHydration"></a>2.10 useHydration</h3><h4 id=基本用法-8><a href=#基本用法-8 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useHydration &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const &#123; isHydrated &#125; = useHydration()</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div v-if=&quot;isHydrated&quot;&gt;</span><br><span class=line>    &lt;!-- 已经被服务器端渲染的部分 --&gt;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>  &lt;div v-else&gt;</span><br><span class=line>    &lt;!-- 尚未被服务器端渲染的部分 --&gt;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们使用<code>useHydration</code>获取<code>isHydrated</code>的值，并在模板中进行条件渲染。如果<code>isHydrated</code>为<code>true</code><br>，则说明该部分已经被服务器端渲染，否则说明尚未被服务器端渲染。</p><h4 id=进阶用法-8><a href=#进阶用法-8 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>在组件中使用<code>useHydration</code>：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useHydration &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const &#123; isHydrated &#125; = useHydration()</span><br><span class=line></span><br><span class=line>function handleClick() &#123;</span><br><span class=line>  if (isHydrated.value) &#123;</span><br><span class=line>    // 已经被服务器端渲染，可以执行客户端操作</span><br><span class=line>  &#125; else &#123;</span><br><span class=line>    // 尚未被服务器端渲染，可以延迟执行操作</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;button @click=&quot;handleClick&quot;&gt;</span><br><span class=line>    &lt;!-- 按钮文字 --&gt;</span><br><span class=line>  &lt;/button&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们在组件中使用<code>useHydration</code>获取<code>isHydrated</code>的值，并在按钮点击事件中进行条件操作。</p><ol start=2><li><strong>在模板中使用<code>isHydrated</code>属性：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useHydration &#125; from &#x27;@nuxtjs/composition-api&#x27;</span><br><span class=line></span><br><span class=line>const &#123; isHydrated &#125; = useHydration()</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div :class=&quot;&#123; active: isHydrated &#125;&quot;&gt;</span><br><span class=line>    &lt;!-- 根据 isHydrated 的值动态添加 active 类 --&gt;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们在模板中使用<code>isHydrated</code>的值动态添加<code>active</code>类。</p><h3 id=2-11-useLazyAsyncData><a href=#2-11-useLazyAsyncData class=headerlink title="2.11 useLazyAsyncData"></a>2.11 useLazyAsyncData</h3><p><code>useLazyAsyncData</code>是 Nuxt 3 提供的一个内置 Composable，用于定义异步数据，该数据在客户端按需加载，而不是在服务器端渲染时立即加载。这在处理大量数据或希望延迟加载数据以优化性能时非常有用。</p><h4 id=基本用法-9><a href=#基本用法-9 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><p>以下是一个<code>useLazyAsyncData</code>的基本用法示例：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useLazyAsyncData &#125; from &#x27;#app/composables&#x27;</span><br><span class=line></span><br><span class=line>// 定义一个异步函数来获取数据</span><br><span class=line>const fetchData = async () =&gt; &#123;</span><br><span class=line>  const response = await fetch(&#x27;/api/data&#x27;)</span><br><span class=line>  return await response.json()</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>// 使用 useLazyAsyncData 来定义异步数据</span><br><span class=line>const lazyData = useLazyAsyncData(&#x27;lazyData&#x27;, fetchData)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div v-if=&quot;lazyData.isFetching&quot;&gt;加载中...&lt;/div&gt;</span><br><span class=line>  &lt;div v-else-if=&quot;lazyData.error&quot;&gt;出错了：&#123;&#123; lazyData.error.message &#125;&#125;&lt;/div&gt;</span><br><span class=line>  &lt;div v-else&gt;</span><br><span class=line>    &lt;!-- 显示数据 --&gt;</span><br><span class=line>    &#123;&#123; lazyData.data &#125;&#125;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们定义了一个名为<code>fetchData</code>的异步函数来获取数据，并使用<code>useLazyAsyncData</code><br>创建了一个响应式引用<code>lazyData</code>。<code>lazyData</code>包含三个属性：<code>data</code>（存储数据）、<code>isFetching</code>（表示是否正在获取数据）和<code>error</code><br>（存储可能发生的错误）。</p><h4 id=进阶用法-9><a href=#进阶用法-9 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>条件触发数据加载：</strong></li></ol><p>你可以根据特定条件触发数据的加载，而不是在页面加载时立即加载。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>const loadLazyData = () =&gt; &#123;</span><br><span class=line>  if (!lazyData.data) &#123;</span><br><span class=line>    lazyData.fetch()</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>使用 watch 或 watchEffect 触发数据加载：</strong></li></ol><p>如果你想要在某个响应式引用变化时自动加载数据，可以使用<code>watch</code>或<code>watchEffect</code>。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>import &#123; watch &#125; from &#x27;vue&#x27;</span><br><span class=line></span><br><span class=line>const someCondition = ref(false)</span><br><span class=line></span><br><span class=line>watch(someCondition, (newValue) =&gt; &#123;</span><br><span class=line>  if (newValue) &#123;</span><br><span class=line>    loadLazyData()</span><br><span class=line>  &#125;</span><br><span class=line>&#125;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>自定义加载行为：</strong></li></ol><p>你可以通过传递额外的选项来自定义加载行为，例如设置延迟加载。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>const lazyDataWithDelay = useLazyAsyncData(&#x27;lazyDataWithDelay&#x27;, fetchData, &#123;</span><br><span class=line>  delay: 1000, // 延迟1秒后加载</span><br><span class=line>&#125;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=4><li><strong>在组件外部触发加载：</strong></li></ol><p>如果你需要在组件外部触发数据的加载，可以将<code>fetch</code>方法暴露给模板或其他组件。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const loadLazyData = () =&gt; &#123;</span><br><span class=line>  lazyData.fetch()</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;button @click=&quot;loadLazyData&quot;&gt;加载数据&lt;/button&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在使用<code>useLazyAsyncData</code>时，请注意，它返回的<code>lazyData</code>对象是响应式的，因此你可以在模板中直接使用它，并且当数据加载状态变化时，界面会自动更新。</p><p>务必参考 Nuxt 3 的官方文档以获取最新的 Composable 使用说明和示例。</p><h3 id=2-12-useLazyFetch><a href=#2-12-useLazyFetch class=headerlink title="2.12 useLazyFetch"></a>2.12 useLazyFetch</h3><p><code>useLazyFetch</code>是 Nuxt 3 中的另一个内置 Composable，它与<code>useLazyAsyncData</code>类似，但更专注于处理单个数据请求，通常用于 API<br>调用。<code>useLazyFetch</code>也支持按需加载和错误处理，但更专注于加载单个数据块。</p><h4 id=基本用法-10><a href=#基本用法-10 class=headerlink title=基本用法></a><strong>基本用法</strong></h4><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useLazyFetch &#125; from &#x27;#app/composables&#x27;</span><br><span class=line></span><br><span class=line>// 定义一个异步函数来获取数据</span><br><span class=line>const fetchData = async () =&gt; &#123;</span><br><span class=line>  const response = await fetch(&#x27;/api/data&#x27;)</span><br><span class=line>  return await response.json()</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>// 使用 useLazyFetch 获取数据</span><br><span class=line>const lazyFetchData = await useLazyFetch(&#x27;fetchData&#x27;, fetchData)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div v-if=&quot;!lazyFetchData.isFetched&quot;&gt;加载中...&lt;/div&gt;</span><br><span class=line>  &lt;div v-else-if=&quot;lazyFetchData.error&quot;&gt;出错了：&#123;&#123; lazyFetchData.error.message &#125;&#125;&lt;/div&gt;</span><br><span class=line>  &lt;div v-else&gt;</span><br><span class=line>    &lt;!-- 显示数据 --&gt;</span><br><span class=line>    &#123;&#123; lazyFetchData.data &#125;&#125;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>useLazyFetch</code>返回一个 Promise，当数据加载完成时，Promise 解决为一个对象，包含<code>data</code>、<code>isFetched</code>和<code>error</code>属性。</p><h4 id=进阶用法-10><a href=#进阶用法-10 class=headerlink title=进阶用法></a><strong>进阶用法</strong></h4><ol><li><strong>条件触发加载：</strong>可以根据需要在模板中检查<code>isFetched</code>或<code>error</code>条件来触发加载。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>const loadData = () =&gt; &#123;</span><br><span class=line>  if (!lazyFetchData.isFetched) &#123;</span><br><span class=line>    lazyFetchData()</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>处理分页或无限滚动：</strong>如果数据是分页的，可以在用户滚动到页面底部或点击加载更多时触发<code>useLazyFetch</code>。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>const loadMoreData = () =&gt; &#123;</span><br><span class=line>  lazyFetchData(&#123; page: lazyFetchData.page + 1 &#125;)</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>取消请求：</strong>如果需要在组件卸载或用户取消操作时取消请求，可以使用<code>lazyFetchData.cancel()</code>。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>onBeforeUnmount(() =&gt; &#123;</span><br><span class=line>  lazyFetchData.cancel()</span><br><span class=line>&#125;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=4><li><strong>缓存和重试：</strong>可以通过传递额外选项来自定义缓存策略和重试机制。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>const lazyFetchDataWithCache = await useLazyFetch(&#x27;fetchData&#x27;, fetchData, &#123;</span><br><span class=line>  cache: true, // 如果数据未改变，将返回缓存的数据</span><br><span class=line>  retry: 3, // 尝试重试请求的次数</span><br><span class=line>&#125;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=5><li><strong>响应式数据：</strong><code>useLazyFetch</code>返回的对象是响应式的，所以你可以在模板中直接使用它，数据变化时会自动更新。</li></ol><p>请确保查阅 Nuxt 3 的最新文档以获取<code>useLazyFetch</code>的完整用法和示例，因为官方文档会提供最新的功能和最佳实践。</p><h3 id=2-13-useNuxtApp><a href=#2-13-useNuxtApp class=headerlink title="2.13 useNuxtApp"></a>2.13 useNuxtApp</h3><p><code>useNuxtApp</code>是 Nuxt 3 的一个内置 Composable，用于访问 Nuxt 应用程序的实例。这个 Composable 提供了对 Nuxt<br>应用程序的核心属性和方法的访问，如配置、插件、中间件等。</p><h4 id=基本用法-11><a href=#基本用法-11 class=headerlink title=基本用法></a>基本用法</h4><p><code>useNuxtApp</code>的基本用法允许你访问和修改 Nuxt 应用程序的状态。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useNuxtApp &#125; from &#x27;#app/composables&#x27;</span><br><span class=line></span><br><span class=line>const nuxtApp = useNuxtApp()</span><br><span class=line></span><br><span class=line>// 访问 Nuxt 配置</span><br><span class=line>console.log(nuxtApp.config)</span><br><span class=line></span><br><span class=line>// 修改 Nuxt 配置</span><br><span class=line>nuxtApp.config.globalProperties.myGlobalProperty = &#x27;some value&#x27;</span><br><span class=line></span><br><span class=line>// 使用 Nuxt 插件</span><br><span class=line>nuxtApp.hook(&#x27;vue:beforeMount&#x27;, () =&gt; &#123;</span><br><span class=line>  console.log(&#x27;Before Vue mount&#x27;)</span><br><span class=line>&#125;)</span><br><span class=line></span><br><span class=line>// 访问 Nuxt 上下文</span><br><span class=line>console.log(nuxtApp.context)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><h4 id=进阶用法-11><a href=#进阶用法-11 class=headerlink title=进阶用法></a>进阶用法</h4><p><code>useNuxtApp</code>提供了许多高级功能，以下是一些进阶用法：</p><ol><li><strong>使用 Nuxt 插件：</strong>你可以注册和使用插件，这些插件在整个应用程序中都是可用的。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>// 注册插件</span><br><span class=line>nuxtApp.use(MyPlugin, &#123; /* options */ &#125;)</span><br><span class=line></span><br><span class=line>// 使用插件</span><br><span class=line>nuxtApp.provide(&#x27;myPlugin&#x27;, MyPlugin)</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>访问和应用中间件：</strong>你可以添加或修改中间件，这些中间件将在请求处理过程中被调用。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line>// 添加中间件</span><br><span class=line>nuxtApp.hook(&#x27;render:route&#x27;, (url, result, context) =&gt; &#123;</span><br><span class=line>  // 你的中间件逻辑</span><br><span class=line>&#125;)</span><br><span class=line></span><br><span class=line>// 修改中间件</span><br><span class=line>nuxtApp.hook(&#x27;render:route&#x27;, (url, result, context) =&gt; &#123;</span><br><span class=line>  // 修改结果或上下文</span><br><span class=line>  result.someProperty = &#x27;newValue&#x27;</span><br><span class=line>&#125;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>使用 Nuxt 上下文：</strong>通过<code>useNuxtApp</code>获取的上下文对象，你可以访问和操作当前请求的上下文。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>const &#123; route, params, query &#125; = nuxtApp.context</span><br><span class=line></span><br><span class=line>console.log(route.name) // 当前路由名称</span><br><span class=line>console.log(params.id) // 路由参数</span><br><span class=line>console.log(query.search) // 查询参数</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=4><li><strong>响应式状态：</strong><code>useNuxtApp</code>提供的状态是响应式的，所以任何对状态的更改都会触发视图的更新。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>// 假设有一个响应式状态</span><br><span class=line>const myState = useState(&#x27;myState&#x27;, () =&gt; &#x27;initial value&#x27;)</span><br><span class=line></span><br><span class=line>// 更新状态</span><br><span class=line>nuxtApp.provide(&#x27;updateMyState&#x27;, (newValue) =&gt; &#123;</span><br><span class=line>  myState.value = newValue</span><br><span class=line>&#125;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=5><li><strong>全局属性和方法：</strong>你可以定义全局属性和方法，这些属性和方法在所有组件中都是可用的。</li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>// 定义全局属性</span><br><span class=line>nuxtApp.config.globalProperties.$myGlobalMethod = () =&gt; &#123;</span><br><span class=line>  console.log(&#x27;This is a global method&#x27;)</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>// 在组件中使用</span><br><span class=line>console.log(this.$myGlobalMethod())</span><br><span class=line></span><br></pre></td></tr></table></figure><p><code>useNuxtApp</code>是一个非常强大的工具，它允许开发者访问和操作 Nuxt 应用程序的底层功能。在编写插件或需要全局修改应用程序时，这个<br>Composable 非常有用。</p><h3 id=2-14-useNuxtData><a href=#2-14-useNuxtData class=headerlink title="2.14 useNuxtData"></a>2.14 useNuxtData</h3><h4 id=基本用法-12><a href=#基本用法-12 class=headerlink title=基本用法></a>基本用法</h4><p><code>useNuxtData</code>是 Nuxt 3 提供的一个组合式 API，用于访问和操作 Nuxt 应用程序的状态数据。这个状态数据可以在服务端渲染期间被填充，并在客户端保持响应式。</p><p>基本用法如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const nuxtData = useNuxtData(); // 获取 Nuxt 应用程序的状态数据</span><br><span class=line></span><br><span class=line>// 假设 Nuxt 应用程序的状态中有一个名为 &#x27;user&#x27; 的属性</span><br><span class=line>const userData = nuxtData.value.user;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div&gt;</span><br><span class=line>    &lt;p&gt;User Name: &#123;&#123; userData.name &#125;&#125;&lt;/p&gt;</span><br><span class=line>    &lt;p&gt;User Age: &#123;&#123; userData.age &#125;&#125;&lt;/p&gt;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在上面的代码中，<code>useNuxtData</code>返回一个响应式引用，其中包含 Nuxt 应用程序的状态数据。你可以像访问普通对象一样访问这些数据。</p><h4 id=进阶用法-12><a href=#进阶用法-12 class=headerlink title=进阶用法></a>进阶用法</h4><p><code>useNuxtData</code>还可以用于更新 Nuxt 应用程序的状态数据。以下是一些进阶用法：</p><ol><li><strong>更新状态数据：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const nuxtData = useNuxtData();</span><br><span class=line></span><br><span class=line>// 更新 &#x27;user&#x27; 属性</span><br><span class=line>nuxtData.value.user = &#123; name: &#x27;Alice&#x27;, age: 30 &#125;;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>使用<code>watch</code>或<code>watchEffect</code>监听状态变化：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const nuxtData = useNuxtData();</span><br><span class=line></span><br><span class=line>watch(() =&gt; nuxtData.value.user, (newValue, oldValue) =&gt; &#123;</span><br><span class=line>  console.log(&#x27;User data changed:&#x27;, newValue);</span><br><span class=line>&#125;);</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>使用<code>nextTick</code>确保状态更新后的 DOM 更新：</strong></li></ol><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const nuxtData = useNuxtData();</span><br><span class=line></span><br><span class=line>function updateUser() &#123;</span><br><span class=line>  nuxtData.value.user.age += 1;</span><br><span class=line>  nextTick(() =&gt; &#123;</span><br><span class=line>    console.log(&#x27;DOM updated after state change&#x27;);</span><br><span class=line>  &#125;);</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=4><li><strong>使用<code>useNuxtData</code>在服务器端预填充状态：</strong></li></ol><p>在 Nuxt 的服务器端渲染 (SSR) 期间，你可以在<code>getServerSideProps</code>或<code>setup</code>函数中使用<code>useNuxtData</code>来预填充状态。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; getServerSideProps &#125; from &#x27;#app&#x27;;</span><br><span class=line></span><br><span class=line>// 在服务器端预填充状态</span><br><span class=line>export default defineNuxtPlugin(nuxtApp =&gt; &#123;</span><br><span class=line>  nuxtApp.hook(&#x27;render:route&#x27;, async (url, result, context) =&gt; &#123;</span><br><span class=line>    const nuxtData = useNuxtData();</span><br><span class=line>    nuxtData.value.user = await fetchDataFromServer(url);</span><br><span class=line>  &#125;);</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line>async function fetchDataFromServer(url) &#123;</span><br><span class=line>  // 从服务器获取数据</span><br><span class=line>  const response = await fetch(`/api/user?url=$&#123;url&#125;`);</span><br><span class=line>  return await response.json();</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>请注意，<code>useNuxtData</code>主要用于操作和访问 Nuxt 应用程序的全局状态，而不是用于处理组件内部的状态。在组件内部，通常使用<code>ref</code><br>或<code>reactive</code>来管理本地状态。</p><h3 id=2-15-useRequestHeaders><a href=#2-15-useRequestHeaders class=headerlink title="2.15 useRequestHeaders"></a>2.15 useRequestHeaders</h3><h4 id=基本用法-13><a href=#基本用法-13 class=headerlink title=基本用法></a>基本用法</h4><p><code>useRequestHeaders</code>是 Nuxt 3 提供的一个组合式 API，用于获取当前请求的 HTTP 头部信息。这在处理跨域请求、身份验证或其他需要访问请求头信息的场景中非常有用。</p><p>基本用法如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const headers = useRequestHeaders([&#x27;cookie&#x27;, &#x27;authorization&#x27;]); // 获取指定的请求头</span><br><span class=line></span><br><span class=line>console.log(headers.cookie); // 输出 cookie 头部的值</span><br><span class=line>console.log(headers.authorization); // 输出 authorization 头部的值</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在上面的代码中，<code>useRequestHeaders</code>接受一个字符串数组，其中包含你想要获取的头部名称。它返回一个对象，其中包含指定头部的值。</p><h4 id=进阶用法-13><a href=#进阶用法-13 class=headerlink title=进阶用法></a>进阶用法</h4><ol><li><strong>获取所有请求头：</strong></li></ol><p>如果你需要获取所有的请求头，可以不传递任何参数给<code>useRequestHeaders</code>：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const allHeaders = useRequestHeaders(); // 获取所有请求头</span><br><span class=line></span><br><span class=line>console.log(allHeaders); // 输出所有请求头的键值对</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>在服务器端使用：</strong></li></ol><p><code>useRequestHeaders</code>也可以在服务器端渲染 (SSR) 期间使用，以获取请求头信息：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const headers = useRequestHeaders([&#x27;user-agent&#x27;]); // 在服务器端获取请求头</span><br><span class=line></span><br><span class=line>console.log(headers.user_agent); // 输出 user-agent 头部的值</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>处理敏感信息：</strong></li></ol><p>在处理包含敏感信息的请求头（如<code>authorization</code>）时，应确保这些信息不会被无意中暴露。在服务器端，这些信息通常只在服务器内存中可用，不会被发送到客户端。</p><ol start=4><li><strong>动态获取请求头：</strong></li></ol><p>你可以根据应用程序的状态或用户的操作动态获取请求头：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const getHeaderValue = (headerName) =&gt; &#123;</span><br><span class=line>  const headers = useRequestHeaders([headerName]);</span><br><span class=line>  return headers[headerName];</span><br><span class=line>&#125;;</span><br><span class=line></span><br><span class=line>const userAgent = ref(getHeaderValue(&#x27;user-agent&#x27;)); // 动态获取 user-agent</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=5><li><strong>结合其他 Nuxt 3 功能使用：</strong></li></ol><p><code>useRequestHeaders</code>可以与其他 Nuxt 3 的组合式 API 结合使用，例如<code>useFetch</code>或<code>useAsyncData</code>，以在发起请求时自动包含特定的请求头：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const &#123; data: userData &#125; = await useFetch(&#x27;/api/user&#x27;, &#123; headers: useRequestHeaders([&#x27;authorization&#x27;]) &#125;);</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，<code>useFetch</code>将自动包含从<code>useRequestHeaders</code>获取的<code>authorization</code>头部，这对于需要身份验证的 API 请求非常有用。</p><h3 id=2-16-useRequestURL><a href=#2-16-useRequestURL class=headerlink title="2.16 useRequestURL"></a>2.16 useRequestURL</h3><h4 id=基本用法-14><a href=#基本用法-14 class=headerlink title=基本用法></a>基本用法</h4><p><code>useRequestURL</code>是 Nuxt 3 提供的一个组合式 API，用于获取当前请求的 URL。这在需要根据当前 URL 进行路由处理、权限验证或其他基于<br>URL 的操作时非常有用。</p><p>基本用法如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const url = useRequestURL(); // 获取当前请求的 URL</span><br><span class=line></span><br><span class=line>console.log(url.value); // 输出当前请求的完整 URL</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在上面的代码中，<code>useRequestURL</code>返回一个响应式引用（ref），其中包含当前请求的完整 URL。</p><h4 id=进阶用法-14><a href=#进阶用法-14 class=headerlink title=进阶用法></a>进阶用法</h4><ol><li><strong>解析 URL 组件：</strong></li></ol><p>你可以使用 JavaScript 的 URL API 来解析<code>useRequestURL</code>返回的 URL，以获取其组件（如协议、主机、路径等）：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const url = useRequestURL();</span><br><span class=line>const parsedUrl = new URL(url.value);</span><br><span class=line></span><br><span class=line>console.log(parsedUrl.protocol); // 输出协议（如 &#x27;https:&#x27;）</span><br><span class=line>console.log(parsedUrl.host); // 输出主机（如 &#x27;example.com&#x27;）</span><br><span class=line>console.log(parsedUrl.pathname); // 输出路径（如 &#x27;/path/to/page&#x27;）</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>在服务器端使用：</strong></li></ol><p><code>useRequestURL</code>也可以在服务器端渲染 (SSR) 期间使用，以获取请求的 URL：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const url = useRequestURL(); // 在服务器端获取请求的 URL</span><br><span class=line></span><br><span class=line>console.log(url.value); // 输出服务器端请求的完整 URL</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>动态处理 URL：</strong></li></ol><p>你可以根据应用程序的状态或用户的操作动态处理 URL：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const url = useRequestURL();</span><br><span class=line>const redirectTo = computed(() =&gt; &#123;</span><br><span class=line>  if (someCondition) &#123;</span><br><span class=line>    return url.value + &#x27;/some/path&#x27;;</span><br><span class=line>  &#125;</span><br><span class=line>  return url.value;</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line>console.log(redirectTo.value); // 输出根据条件修改后的 URL</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=4><li><strong>结合其他 Nuxt 3 功能使用：</strong></li></ol><p><code>useRequestURL</code>可以与其他 Nuxt 3 的组合式 API 结合使用，例如<code>useRoute</code>或<code>useRouter</code>，以在路由处理中使用当前的 URL：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const url = useRequestURL();</span><br><span class=line>const route = useRoute();</span><br><span class=line></span><br><span class=line>if (route.path !== url.value) &#123;</span><br><span class=line>  // 处理路由不匹配的情况</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们比较了当前路由的路径和请求的 URL，以处理可能的路由不匹配情况。</p><ol start=5><li><strong>构建新的 URL：</strong></li></ol><p>你可以使用<code>useRequestURL</code>获取的 URL 作为基础，构建新的 URL 用于重定向或其他操作：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const url = useRequestURL();</span><br><span class=line>const newUrl = computed(() =&gt; &#123;</span><br><span class=line>  return new URL(&#x27;/new/path&#x27;, url.value).href;</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line>console.log(newUrl.value); // 输出新的 URL</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，我们创建了一个新的 URL，它基于当前请求的 URL，但路径被修改为<code>/new/path</code>。</p><h3 id=2-17-useRoute><a href=#2-17-useRoute class=headerlink title="2.17 useRoute"></a>2.17 useRoute</h3><h4 id=基本用法-15><a href=#基本用法-15 class=headerlink title=基本用法></a>基本用法</h4><p><code>useRoute</code>是 Nuxt 3 提供的一个组合式 API，用于获取当前路由的信息。这个 API 返回一个响应式对象，其中包含了当前路由的参数、查询字符串、路径等信息。</p><p>基本用法如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const route = useRoute();</span><br><span class=line></span><br><span class=line>console.log(route.path); // 输出当前路由的路径，例如 &#x27;/about&#x27;</span><br><span class=line>console.log(route.query); // 输出当前路由的查询参数，例如 &#123; name: &#x27;John&#x27; &#125;</span><br><span class=line>console.log(route.params); // 输出当前路由的动态参数，例如 &#123; id: &#x27;123&#x27; &#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在上面的代码中，<code>useRoute</code>返回一个响应式对象，你可以访问它的<code>path</code>、<code>query</code>和<code>params</code>等属性来获取当前路由的信息。</p><h4 id=进阶用法-15><a href=#进阶用法-15 class=headerlink title=进阶用法></a>进阶用法</h4><ol><li><strong>监听路由变化：</strong></li></ol><p>你可以使用 Vue 的<code>watch</code>或<code>watchEffect</code>函数来监听路由的变化，并执行相应的操作：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const route = useRoute();</span><br><span class=line></span><br><span class=line>watch(() =&gt; route.path, (newPath, oldPath) =&gt; &#123;</span><br><span class=line>  console.log(`路由从 $&#123;oldPath&#125; 变更为 $&#123;newPath&#125;`);</span><br><span class=line>  // 在这里执行路由变化后的操作</span><br><span class=line>&#125;);</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=2><li><strong>动态参数处理：</strong></li></ol><p>当路由有动态参数时，你可以根据这些参数执行不同的逻辑：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const route = useRoute();</span><br><span class=line></span><br><span class=line>if (route.params.id) &#123;</span><br><span class=line>  // 处理有 id 参数的情况</span><br><span class=line>  fetchSomeData(route.params.id);</span><br><span class=line>&#125;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=3><li><strong>组合多个路由参数：</strong></li></ol><p>如果你需要根据多个路由参数来执行逻辑，可以组合它们：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const route = useRoute();</span><br><span class=line></span><br><span class=line>const fullPath = computed(() =&gt; &#123;</span><br><span class=line>  return `$&#123;route.path&#125;?$&#123;new URLSearchParams(route.query).toString()&#125;`;</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line>console.log(fullPath.value); // 输出当前路由的完整路径和查询字符串</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=4><li><strong>使用路由元信息：</strong></li></ol><p>Nuxt 3 允许你在路由定义中添加元信息，这些信息可以通过<code>useRoute</code>访问：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const route = useRoute();</span><br><span class=line></span><br><span class=line>console.log(route.meta); // 输出当前路由的元信息</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><ol start=5><li><strong>结合其他 Nuxt 3 功能使用：</strong></li></ol><p><code>useRoute</code>可以与其他 Nuxt 3 的组合式 API 结合使用，例如<code>useHead</code>，来根据路由变化动态更新页面标题：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const route = useRoute();</span><br><span class=line>const head = useHead();</span><br><span class=line></span><br><span class=line>watch(() =&gt; route.path, (newPath) =&gt; &#123;</span><br><span class=line>  head.title = `My App - $&#123;newPath&#125;`;</span><br><span class=line>&#125;);</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在这个例子中，每当路由路径发生变化时，我们都会更新页面的标题。</p><ol start=6><li><strong>在服务器端使用：</strong></li></ol><p><code>useRoute</code>也可以在服务器端渲染 (SSR) 期间使用，以获取当前路由的信息：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const route = useRoute();</span><br><span class=line></span><br><span class=line>console.log(route.path); // 在服务器端获取当前路由的路径</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在服务器端，<code>useRoute</code>将提供与客户端相同的路由信息，允许你在服务器端进行路由相关的处理。</p><h3 id=2-18-useSeoMeta><a href=#2-18-useSeoMeta class=headerlink title="2.18 useSeoMeta"></a>2.18 useSeoMeta</h3><h4 id=基本用法-16><a href=#基本用法-16 class=headerlink title=基本用法></a>基本用法</h4><p>在 Nuxt 3 中，<code>useSeoMeta</code>是一个内置的组合式 API，可以直接在页面组件中使用来设置页面的 SEO 元数据。以下是如何使用它的基本方法：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const &#123; title, description, keywords, ogTitle, ogDescription, twitterTitle, twitterDescription &#125; = useSeoMeta()</span><br><span class=line></span><br><span class=line>// 设置基础 SEO 信息</span><br><span class=line>title.value = &#x27;我的页面标题&#x27;</span><br><span class=line>description.value = &#x27;这是我的页面描述&#x27;</span><br><span class=line>keywords.value = &#x27;关键字1, 关键字2, 关键字3&#x27;</span><br><span class=line></span><br><span class=line>// 设置 Open Graph 信息</span><br><span class=line>ogTitle.value = &#x27;Open Graph 标题&#x27;</span><br><span class=line>ogDescription.value = &#x27;Open Graph 描述&#x27;</span><br><span class=line></span><br><span class=line>// 设置 Twitter 信息</span><br><span class=line>twitterTitle.value = &#x27;Twitter 标题&#x27;</span><br><span class=line>twitterDescription.value = &#x27;Twitter 描述&#x27;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><h4 id=进阶用法-16><a href=#进阶用法-16 class=headerlink title=进阶用法></a>进阶用法</h4><p><code>useSeoMeta</code>提供了更多高级功能，允许你设置更复杂的 SEO 信息，如下所示：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const &#123; title, description, ogImage, twitterImage &#125; = useSeoMeta()</span><br><span class=line></span><br><span class=line>// 动态设置 SEO 信息</span><br><span class=line>title.value = &#x27;动态页面标题&#x27;</span><br><span class=line>description.value = &#x27;动态页面描述&#x27;</span><br><span class=line></span><br><span class=line>// 使用函数动态生成标题</span><br><span class=line>title.value = (prevTitle) =&gt; ` $&#123;prevTitle&#125; - 动态后缀`</span><br><span class=line></span><br><span class=line>// 设置 Open Graph 图片</span><br><span class=line>ogImage.value = &#x27;/path/to/og-image.jpg&#x27;</span><br><span class=line></span><br><span class=line>// 设置 Twitter 图片</span><br><span class=line>twitterImage.value = &#x27;/path/to/twitter-image.jpg&#x27;</span><br><span class=line></span><br><span class=line>// 使用链式方法一次性设置多个属性</span><br><span class=line>useSeoMeta().update(&#123;</span><br><span class=line>  title: &#x27;更新的页面标题&#x27;,</span><br><span class=line>  description: &#x27;更新的页面描述&#x27;,</span><br><span class=line>  ogTitle: &#x27;更新的 Open Graph 标题&#x27;,</span><br><span class=line>  ogDescription: &#x27;更新的 Open Graph 描述&#x27;,</span><br><span class=line>  ogImage: &#x27;/path/to/updated-og-image.jpg&#x27;,</span><br><span class=line>  twitterTitle: &#x27;更新的 Twitter 标题&#x27;,</span><br><span class=line>  twitterDescription: &#x27;更新的 Twitter 描述&#x27;,</span><br><span class=line>  twitterImage: &#x27;/path/to/updated-twitter-image.jpg&#x27;</span><br><span class=line>&#125;)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在进阶用法中，你可以使用链式方法<code>update</code>来一次性设置多个 SEO 元数据，这对于动态生成 SEO 信息或在组件的生命周期中更新 SEO<br>信息非常有用。此外，你可以通过返回函数的方式来动态生成标题，这可以让你根据不同的条件来改变标题内容。</p><h3 id=2-19-useRouter><a href=#2-19-useRouter class=headerlink title="2.19 useRouter"></a>2.19 useRouter</h3><h4 id=基本用法-17><a href=#基本用法-17 class=headerlink title=基本用法></a>基本用法</h4><p>在 Nuxt 3 中，<code>useRouter</code>是一个内置的组合式 API，用于在组件中访问和操作路由。以下是<code>useRouter</code>的基本用法：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const router = useRouter()</span><br><span class=line></span><br><span class=line>// 获取当前路由信息</span><br><span class=line>console.log(router.currentRoute.value)</span><br><span class=line></span><br><span class=line>// 导航到新页面</span><br><span class=line>router.push(&#x27;/new-page&#x27;)</span><br><span class=line></span><br><span class=line>// 替换当前路由</span><br><span class=line>router.replace(&#x27;/replace-page&#x27;)</span><br><span class=line></span><br><span class=line>// 返回上一页</span><br><span class=line>router.back()</span><br><span class=line></span><br><span class=line>// 前进或后退指定步数</span><br><span class=line>router.go(-1) // 后退一步</span><br><span class=line>router.go(1)  // 前进一步</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在基本用法中，你可以通过<code>useRouter</code>获取路由实例，并使用其方法如<code>push</code>、<code>replace</code>、<code>back</code>和<code>go</code><br>来导航到不同的页面。同时，你可以通过<code>currentRoute</code>属性获取当前路由的详细信息。</p><h4 id=进阶用法-17><a href=#进阶用法-17 class=headerlink title=进阶用法></a>进阶用法</h4><p><code>useRouter</code>还提供了一些进阶功能，允许你更细致地控制路由行为：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>const router = useRouter()</span><br><span class=line></span><br><span class=line>// 监听路由变化</span><br><span class=line>router.currentRoute.value.subscribe((route) =&gt; &#123;</span><br><span class=line>  console.log(&#x27;路由变化了&#x27;, route)</span><br><span class=line>&#125;)</span><br><span class=line></span><br><span class=line>// 使用命名路由</span><br><span class=line>router.push(&#123; name: &#x27;user&#x27;, params: &#123; userId: 123 &#125; &#125;)</span><br><span class=line></span><br><span class=line>// 传递查询参数</span><br><span class=line>router.push(&#123; path: &#x27;/search&#x27;, query: &#123; q: &#x27;nuxt&#x27; &#125; &#125;)</span><br><span class=line></span><br><span class=line>// 路由守卫</span><br><span class=line>router.beforeEach((to, from, next) =&gt; &#123;</span><br><span class=line>  if (to.path === &#x27;/protected&#x27; &amp;&amp; !isAuthenticated.value) &#123;</span><br><span class=line>    next(&#x27;/login&#x27;)</span><br><span class=line>  &#125; else &#123;</span><br><span class=line>    next()</span><br><span class=line>  &#125;</span><br><span class=line>&#125;)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在进阶用法中，你可以使用<code>subscribe</code><br>方法来监听路由的变化，这对于需要在路由变化时执行某些操作的场景非常有用。此外，你可以使用命名路由和查询参数来更精确地控制导航。最后，<code>beforeEach</code><br>方法允许你设置全局的路由守卫，用于在导航发生前进行权限检查或其他预处理。</p><h3 id=2-20-useServerSeoMeta><a href=#2-20-useServerSeoMeta class=headerlink title="2.20 useServerSeoMeta"></a>2.20 useServerSeoMeta</h3><h4 id=基本用法-18><a href=#基本用法-18 class=headerlink title=基本用法></a>基本用法</h4><p><code>useServerSeoMeta</code>是 Nuxt 3 中的一个内置组合式 API，用于在服务器端设置和管理 SEO 优化的元数据。基本用法如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useServerSeoMeta &#125; from &#x27;nuxt3&#x27;</span><br><span class=line></span><br><span class=line>const &#123; title, meta, description &#125; = useServerSeoMeta()</span><br><span class=line></span><br><span class=line>// 设置SEO元数据</span><br><span class=line>useServerSeoMeta(&#123;</span><br><span class=line>  title: &#x27;My Page Title&#x27;,</span><br><span class=line>  meta: [</span><br><span class=line>    &#123; name: &#x27;description&#x27;, content: &#x27;This is a description for SEO&#x27; &#125;,</span><br><span class=line>    &#123; property: &#x27;og:image&#x27;, content: &#x27;/path/to/image.jpg&#x27; &#125;,</span><br><span class=line>  ],</span><br><span class=line>  description: &#x27;A brief summary of the page content&#x27;,</span><br><span class=line>&#125;)</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在基本用法中，你可以通过<code>useServerSeoMeta</code>获取或设置页面的标题 (<code>title</code>)、<code>meta</code>标签（包括<code>name</code>和<code>property</code><br>属性）以及<code>description</code>。这些数据会在服务器端被用于构建 SEO 友好的 HTML。</p><h4 id=进阶用法-18><a href=#进阶用法-18 class=headerlink title=进阶用法></a>进阶用法</h4><ul><li><strong>动态内容</strong>：你可以根据组件的状态或路由参数动态设置元数据。例如，根据用户登录状态改变标题：</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>const isLoggedIn = ref(true)</span><br><span class=line>useServerSeoMeta((seo) =&gt; (&#123;</span><br><span class=line>  title: isLoggedIn.value ? &#x27;Logged In&#x27; : &#x27;Login&#x27;,</span><br><span class=line>  meta: [</span><br><span class=line>    &#123; name: &#x27;description&#x27;, content: isLoggedIn.value ? &#x27;Your dashboard&#x27; : &#x27;Sign up&#x27; &#125;,</span><br><span class=line>  ],</span><br><span class=line>&#125;))</span><br><span class=line></span><br></pre></td></tr></table></figure><ul><li><strong>异步数据</strong>：如果你的元数据依赖于异步数据，可以使用<code>onMounted</code>或<code>onUnmounted</code>来确保数据获取后再设置：</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>onMounted(async () =&gt; &#123;</span><br><span class=line>  const data = await fetchData()</span><br><span class=line>  useServerSeoMeta((seo) =&gt; (&#123;</span><br><span class=line>    title: data.title,</span><br><span class=line>    meta: data.meta,</span><br><span class=line>  &#125;))</span><br><span class=line>&#125;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ul><li><strong>预渲染</strong>：在<code>nuxt.config.js</code>的<code>head</code>配置中，你可以使用<code>useServerSeoMeta</code>的结果来预渲染SEO数据：</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>export default &#123;</span><br><span class=line>  head: &#123;</span><br><span class=line>    titleTemplate: &#x27;%s - My Website&#x27;,</span><br><span class=line>    meta: [</span><br><span class=line>      &#123; ...useServerSeoMeta() &#125;,</span><br><span class=line>    ],</span><br><span class=line>  &#125;,</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>通过这些进阶用法，你可以更好地优化你的网站在搜索引擎中的可见性和用户体验。</p><h3 id=2-21-useState><a href=#2-21-useState class=headerlink title="2.21 useState"></a>2.21 useState</h3><h4 id=基本用法-19><a href=#基本用法-19 class=headerlink title=基本用法></a>基本用法</h4><p><code>useState</code>是 Nuxt 3 中的一个内置组合式 API，用于在组件中创建响应式状态。基本用法如下：</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup&gt;</span><br><span class=line>import &#123; useState &#125; from &#x27;nuxt3&#x27;</span><br><span class=line></span><br><span class=line>// 创建一个响应式状态</span><br><span class=line>const count = useState(&#x27;count&#x27;, () =&gt; 0)</span><br><span class=line></span><br><span class=line>// 在模板中使用</span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div&gt;</span><br><span class=line>    &lt;p&gt;Count: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class=line>    &lt;button @click=&quot;count++&quot;&gt;Increment&lt;/button&gt;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br></pre></td></tr></table></figure><p>在基本用法中，<code>useState</code>接受两个参数：状态的名称和一个初始值。这个状态可以在组件的模板和逻辑中被访问和修改。</p><h4 id=进阶用法-19><a href=#进阶用法-19 class=headerlink title=进阶用法></a>进阶用法</h4><ul><li><strong>多个状态</strong>：你可以创建多个状态，每个状态都有自己的名称和初始值：</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>const &#123; count, setCount &#125; = useState(&#x27;count&#x27;, () =&gt; 0)</span><br><span class=line>const &#123; name, setName &#125; = useState(&#x27;name&#x27;, () =&gt; &#x27;John&#x27;)</span><br><span class=line></span><br></pre></td></tr></table></figure><ul><li><strong>状态持久化</strong>：你可以使用 Nuxt 3 的插件系统来持久化状态，例如使用<code>pinia</code>或<code>vuex</code>：</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre></td><td class=code><pre><span class=line>import &#123; createStore &#125; from &#x27;pinia&#x27;</span><br><span class=line></span><br><span class=line>const store = createStore(&#123;</span><br><span class=line>  state: () =&gt; (&#123;</span><br><span class=line>    count: 0,</span><br><span class=line>    name: &#x27;John&#x27;,</span><br><span class=line>  &#125;),</span><br><span class=line>  actions: &#123;</span><br><span class=line>    increment() &#123;</span><br><span class=line>      this.count++</span><br><span class=line>    &#125;,</span><br><span class=line>  &#125;,</span><br><span class=line>&#125;)</span><br><span class=line></span><br><span class=line>const &#123; count, increment &#125; = useState(&#x27;count&#x27;, () =&gt; store.state.count)</span><br><span class=line>const &#123; name &#125; = useState(&#x27;name&#x27;, () =&gt; store.state.name)</span><br><span class=line></span><br></pre></td></tr></table></figure><ul><li><strong>动态状态</strong>：你可以根据组件的状态或路由参数动态设置状态的初始值：</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>const route = useRoute()</span><br><span class=line>const &#123; count &#125; = useState(&#x27;count&#x27;, () =&gt; route.params.count || 0)</span><br><span class=line></span><br></pre></td></tr></table></figure><ul><li><strong>状态的计算属性</strong>：你可以使用<code>computed</code>来创建基于状态的计算属性：</li></ul><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>const &#123; count &#125; = useState(&#x27;count&#x27;, () =&gt; 0)</span><br><span class=line>const doubleCount = computed(() =&gt; count.value * 2)</span><br><span class=line></span><br></pre></td></tr></table></figure><p>通过这些进阶用法，你可以更灵活地管理组件的状态，使其更加响应式和可维护。</p><h2 id=自定义-Composables><a href=#自定义-Composables class=headerlink title="自定义 Composables"></a><strong>自定义 Composables</strong></h2><p>创建自定义 Composables</p><p>在 Nuxt 3 中创建自定义 Composables 的过程与 Vue 3 类似，因为 Nuxt 3 是基于 Vue 3 构建的。以下是创建自定义 Composables 的步骤：</p><ol><li><p><strong>创建 Composables 文件夹</strong>：在 Nuxt 3 项目中，通常会在<code>composables</code>文件夹下创建自定义的<br>Composables。这个文件夹通常位于<code>src/composables</code>。</p></li><li><p><strong>定义自定义 Composable</strong>：在<code>composables</code>文件夹中创建一个新的文件，例如<code>useCustomComposable.ts</code>，并在其中定义你的<br>Composable。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre></td><td class=code><pre><span class=line>// src/composables/useCustomComposable.ts</span><br><span class=line>import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class=line></span><br><span class=line>export function useCustomComposable() &#123;</span><br><span class=line>  const data = ref(null)</span><br><span class=line></span><br><span class=line>  const fetchData = async () =&gt; &#123;</span><br><span class=line>    // 假设这是一个异步函数，用于获取数据</span><br><span class=line>    data.value = await fetchSomeData()</span><br><span class=line>  &#125;</span><br><span class=line></span><br><span class=line>  onMounted(fetchData)</span><br><span class=line></span><br><span class=line>  return &#123; data &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>async function fetchSomeData() &#123;</span><br><span class=line>  // 这里是获取数据的逻辑</span><br><span class=line>  // 例如，从一个 API 获取数据</span><br><span class=line>  const response = await fetch(&#x27;https://api.example.com/data&#x27;)</span><br><span class=line>  const result = await response.json()</span><br><span class=line>  return result</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure></li><li><p><strong>在页面或组件中使用 Composable</strong>：在页面或组件中，你可以通过<code>import</code>引入自定义 Composable 并使用它。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line>&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class=line>import &#123; useCustomComposable &#125; from &#x27;~/composables/useCustomComposable&#x27;</span><br><span class=line></span><br><span class=line>const &#123; data &#125; = useCustomComposable()</span><br><span class=line>&lt;/script&gt;</span><br><span class=line></span><br><span class=line>&lt;template&gt;</span><br><span class=line>  &lt;div&gt;</span><br><span class=line>    &lt;p v-if=&quot;data&quot;&gt;Data: &#123;&#123; data &#125;&#125;&lt;/p&gt;</span><br><span class=line>    &lt;p v-else&gt;Loading...&lt;/p&gt;</span><br><span class=line>  &lt;/div&gt;</span><br><span class=line>&lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>类型注解</strong>：如果你使用 TypeScript，确保为 Composable 的返回值提供类型注解，以便获得类型检查和自动补全功能。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre></td><td class=code><pre><span class=line>// src/composables/useCustomComposable.ts</span><br><span class=line>import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class=line></span><br><span class=line>interface SomeDataType &#123;</span><br><span class=line>  // 定义数据类型的接口</span><br><span class=line>  id: number</span><br><span class=line>  name: string</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>export function useCustomComposable() &#123;</span><br><span class=line>  const data = ref&lt;SomeDataType | null&gt;(null)</span><br><span class=line></span><br><span class=line>  // ... 其他代码</span><br><span class=line></span><br><span class=line>  return &#123; data &#125;</span><br><span class=line>&#125;</span><br><span class=line></span><br></pre></td></tr></table></figure></li></ol><p>通过遵循这些步骤，你可以在 Nuxt 3 中创建并使用自定义 Composables，从而提高代码的可重用性和组织性。</p><h2 id=附录><a href=#附录 class=headerlink title=附录></a>附录</h2><p>A. Nuxt3 Composables 完整列表</p><p>在 Nuxt3 中，Composables 是一种用于在多个组件或页面之间共享代码的方式。虽然 Nuxt3 官方文档中没有提供完整的 Composables<br>列表，但您可以参考以下资源来了解如何使用和创建自定义 Composables：</p><ul><li><a class=link target=_blank rel=noopener href=https://nuxt.com/docs/guide/directory-structure/composables>Nuxt3 Composables 文档<i class="fas fa-external-link-alt"></i></a></li><li><a class=link target=_blank rel=noopener href=https://vuejs.org/guide/reusability/composables.html>Vue 3 Composables 文档<i class="fas fa-external-link-alt"></i></a></li></ul><p>B. Nuxt3 Composables API 文档</p><p>同样，Nuxt3 官方文档中没有提供完整的 Composables API 文档。但是，由于 Nuxt3 基于 Vue 3，因此可以参考 Vue 3 Composables API<br>文档：</p><ul><li><a class=link target=_blank rel=noopener href=https://vuejs.org/api/composition-api.html>Vue 3 Composables API 文档<i class="fas fa-external-link-alt"></i></a></li></ul><p>C. 常见问题与解答</p><p>以下是一些有关 Nuxt3 Composables 的常见问题和解答：</p><ol><li><strong>Q</strong>: Composables 与 mixins 有什么区别？<strong>A</strong>: Composables 提供了一种更加模块化和可重用的方式来共享代码，而 mixins<br>可能会导致命名冲突和代码可读性问题。</li><li><strong>Q</strong>: 我可以在 Nuxt3 中使用 Vue 3 的 Composition API 吗？<strong>A</strong>: 是的，Nuxt3 基于 Vue 3，因此可以使用 Vue 3 的<br>Composition API 创建和使用 Composables。</li><li><strong>Q</strong>: 我可以在 Nuxt3 中使用第三方 Composables 库吗？<strong>A</strong>: 是的，只要这些库兼容 Vue 3 和 Nuxt3，您可以在项目中使用它们。</li></ol><p>如果您有更多关于 Nuxt3 Composables 的问题，可以参考 Nuxt3 和 Vue 3 的官方文档，或在社区论坛和问题跟踪器中寻求帮助。</p><p>余下文章内容请点击跳转至 个人博客页面 或者 扫码关注或者微信搜一搜：<code>编程智域 前端至全栈交流与成长</code>，阅读完整的文章：</p><h3 id=往期文章归档：><a href=#往期文章归档： class=headerlink title=往期文章归档：></a>往期文章归档：</h3><ul><li><a href=https://blog.cmdragon.cn/2024/06/21/front_end/%E6%8E%8C%E6%8F%A1%20nuxt%203%20%E4%B8%AD%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%EF%BC%9A%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/ >掌握 Nuxt 3 中的状态管理：实践指南 | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/20/front_end/nuxt%203%20%E8%B7%AF%E7%94%B1%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3%EF%BC%9A%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/ >Nuxt 3 路由系统详解：配置与实践指南 | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/19/front_end/nuxt%203%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91%E4%B8%8E%E7%AE%A1%E7%90%86/ >Nuxt 3组件开发与管理 | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/18/front_end/nuxt3%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E6%8E%A2%E7%B4%A2/ >Nuxt3页面开发实战探索 | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/17/front_end/nuxt.js%20%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%EF%BC%9A%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E4%B8%8E%E6%96%87%E4%BB%B6%E7%BB%84%E7%BB%87%E8%AF%A6%E8%A7%A3/ >Nuxt.js 深入浅出：目录结构与文件组织详解 | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/16/front_end/%E5%AE%89%E8%A3%85%20nuxt.js%20%E7%9A%84%E6%AD%A5%E9%AA%A4%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/ >安装 Nuxt.js 的步骤和注意事项 | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/15/front_end/%E6%8E%A2%E7%B4%A2web%20components/ >探索Web Components | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/14/front_end/vue%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E4%B8%8Eqiankun%E5%AE%9E%E8%B7%B5%E7%90%86%E8%AE%BA%E6%8C%87%E5%8D%97/ >Vue微前端架构与Qiankun实践理论指南 | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/13/front_end/vue%203%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B2%E6%9F%93%E5%99%A8%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93/ >Vue 3深度探索：自定义渲染器与服务端渲染 | cmdragon’s Blog</a></li><li><a href=https://blog.cmdragon.cn/2024/06/12/front_end/tailwind%20css%20%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/ >Tailwind CSS 响应式设计实战指南 | cmdragon’s Blog</a></li></ul></div><script>"undefined"!=typeof Prism&&"undefined"!=typeof mermaid&&mermaid.initialize({startOnLoad:!0,theme:"dark"===document.documentElement.getAttribute("data-theme")?"dark":"default"})</script><div class="post-copyright-info-container border-box"><div class="copyright-info-content border-box"><div class="copyright-info-top border-box"><div class="copyright-post-title border-box text-ellipsis">深入探索 Nuxt3 Composables：掌握目录架构与内置API的高效应用</div><div class="copyright-post-link border-box text-ellipsis">2024/06/22/front_end/深入探索 nuxt3 composables：掌握目录架构与内置api的高效应用/</div></div><div class="copyright-info-bottom border-box"><div class="copyright-post-author bottom-item"><div class=type>作者</div><div class=content>cmdragon</div></div><div class="post-time bottom-item"><div class=type>发布于</div><div class=content>2024-06-23 00:00</div></div><div class="post-license bottom-item"><div class=type>许可</div><div class="content tooltip" data-tooltip-content="CC BY-NC-SA 4.0"><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed target=_blank><i class="fa-brands fa-creative-commons"></i> <i class="fa-brands fa-creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc"></i> <i class="fa-brands fa-creative-commons-sa"></i></a></div></div></div><i class="copyright-bg fa-solid fa-copyright"></i></div><div class="copy-copyright-info flex-center tooltip" data-tooltip-content=复制版权信息 data-tooltip-offset-y=-2px><i class="fa-solid fa-copy"></i></div></div><div class="post-bottom-tags-and-share border-box"><div><ul class="post-tags-box border-box"><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href=/tags/Nuxt3/ >Nuxt3</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href=/tags/Composables/ >Composables</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href=/tags/%E7%9B%AE%E5%BD%95%E6%9E%B6%E6%9E%84/ >目录架构</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href=/tags/%E5%86%85%E7%BD%AEAPI/ >内置API</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href=/tags/%E9%AB%98%E6%95%88%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/ >高效应用程序</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href=/tags/%E6%9E%84%E5%BB%BA%E5%BA%94%E7%94%A8/ >构建应用</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href=/tags/%E5%AD%A6%E4%B9%A0/ >学习</a></li></ul></div><div><div class="post-share-container border-box"><ul class="share-list-wrap border-box"><li class="qq share-item border-box flex-center tooltip" data-tooltip-content="分享到 QQ"><i class="fa-brands fa-qq"></i></li><li class="wechat share-item border-box flex-center tooltip tooltip-img" data-tooltip-content=分享到微信 data-tooltip-img-tip=微信扫一扫 data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"><i class="fa-brands fa-weixin"></i></li><li class="weibo share-item border-box flex-center tooltip" data-tooltip-content=分享到微博><i class="fa-brands fa-weibo"></i></li></ul></div></div></div><div class="reward-author-container border-box flex-center"><div class="reward-btn keep-button border-box flex-center tooltip tooltip-img" data-tooltip-content=打赏作者一包辣条！ data-tooltip-img-url=/images/payment.jpg data-tooltip-img-trigger=click data-tooltip-img-style="top: -8px;"><i class="fa-solid fa-hand-holding-heart"></i></div></div><div class="post-nav border-box"><div class=prev-post><a class=prev rel=prev href=/2024/06/23/front_end/%E5%88%9D%E5%AD%A6%E8%80%85%E5%BF%85%E8%AF%BB%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20nuxt%20%20%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%AE%80%E5%8C%96%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91/ title="初学者必读：如何使用 Nuxt  中间件简化网站开发"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item text-ellipsis">初学者必读：如何使用 Nuxt 中间件简化网站开发</span> <span class=post-nav-item>上一篇</span></span></a></div><div class=next-post><a class=next rel=next href=/2024/06/21/front_end/%E6%8E%8C%E6%8F%A1%20nuxt%203%20%E4%B8%AD%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%EF%BC%9A%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/ title="掌握 Nuxt 3 中的状态管理：实践指南"><span class="title flex-center"><span class="post-nav-title-item text-ellipsis">掌握 Nuxt 3 中的状态管理：实践指南</span> <span class=post-nav-item>下一篇</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div></div></div><div class="pc-post-toc right-toc"><div class="post-toc-wrap border-box"><div class="post-toc border-box"><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#Nuxt3-Composables><span class=nav-number>1.</span> <span class=nav-text>Nuxt3 Composables</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-Composables-%E6%A6%82%E8%BF%B0><span class=nav-number>1.1.</span> <span class=nav-text>1.1 Composables 概述</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE><span class=nav-number>1.2.</span> <span class=nav-text>1.2 安装与配置</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-%E4%BD%BF%E7%94%A8-Composables-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4><span class=nav-number>1.3.</span> <span class=nav-text>1.3 使用 Composables 的基本步骤</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#1-4-Composables-%E4%B8%8E-Vue-3-%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F><span class=nav-number>1.4.</span> <span class=nav-text>1.4 Composables 与 Vue 3 的响应式系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%A0%B8%E5%BF%83-Composables><span class=nav-number>2.</span> <span class=nav-text>核心 Composables</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#2-1-useFetch><span class=nav-number>2.1.</span> <span class=nav-text>2.1 useFetch</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95><span class=nav-number>2.1.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95><span class=nav-number>2.1.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-2-useHead><span class=nav-number>2.2.</span> <span class=nav-text>2.2 useHead</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-1><span class=nav-number>2.2.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-1><span class=nav-number>2.2.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-3-useRuntimeConfig><span class=nav-number>2.3.</span> <span class=nav-text>2.3 useRuntimeConfig</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-2><span class=nav-number>2.3.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-2><span class=nav-number>2.3.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-4-useRequestEvent><span class=nav-number>2.4.</span> <span class=nav-text>2.4 useRequestEvent</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-3><span class=nav-number>2.4.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-3><span class=nav-number>2.4.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-5-useAppConfig><span class=nav-number>2.5.</span> <span class=nav-text>2.5 useAppConfig</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-6-useAsyncData><span class=nav-number>2.6.</span> <span class=nav-text>2.6 useAsyncData</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-4><span class=nav-number>2.6.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-4><span class=nav-number>2.6.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-7-useCookie><span class=nav-number>2.7.</span> <span class=nav-text>2.7 useCookie</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-5><span class=nav-number>2.7.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-5><span class=nav-number>2.7.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-8-useError><span class=nav-number>2.8.</span> <span class=nav-text>2.8 useError</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-6><span class=nav-number>2.8.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-6><span class=nav-number>2.8.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-9-useHeadSafe><span class=nav-number>2.9.</span> <span class=nav-text>2.9 useHeadSafe</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-7><span class=nav-number>2.9.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-7><span class=nav-number>2.9.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-10-useHydration><span class=nav-number>2.10.</span> <span class=nav-text>2.10 useHydration</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-8><span class=nav-number>2.10.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-8><span class=nav-number>2.10.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-11-useLazyAsyncData><span class=nav-number>2.11.</span> <span class=nav-text>2.11 useLazyAsyncData</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-9><span class=nav-number>2.11.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-9><span class=nav-number>2.11.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-12-useLazyFetch><span class=nav-number>2.12.</span> <span class=nav-text>2.12 useLazyFetch</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-10><span class=nav-number>2.12.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-10><span class=nav-number>2.12.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-13-useNuxtApp><span class=nav-number>2.13.</span> <span class=nav-text>2.13 useNuxtApp</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-11><span class=nav-number>2.13.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-11><span class=nav-number>2.13.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-14-useNuxtData><span class=nav-number>2.14.</span> <span class=nav-text>2.14 useNuxtData</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-12><span class=nav-number>2.14.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-12><span class=nav-number>2.14.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-15-useRequestHeaders><span class=nav-number>2.15.</span> <span class=nav-text>2.15 useRequestHeaders</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-13><span class=nav-number>2.15.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-13><span class=nav-number>2.15.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-16-useRequestURL><span class=nav-number>2.16.</span> <span class=nav-text>2.16 useRequestURL</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-14><span class=nav-number>2.16.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-14><span class=nav-number>2.16.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-17-useRoute><span class=nav-number>2.17.</span> <span class=nav-text>2.17 useRoute</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-15><span class=nav-number>2.17.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-15><span class=nav-number>2.17.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-18-useSeoMeta><span class=nav-number>2.18.</span> <span class=nav-text>2.18 useSeoMeta</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-16><span class=nav-number>2.18.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-16><span class=nav-number>2.18.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-19-useRouter><span class=nav-number>2.19.</span> <span class=nav-text>2.19 useRouter</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-17><span class=nav-number>2.19.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-17><span class=nav-number>2.19.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-20-useServerSeoMeta><span class=nav-number>2.20.</span> <span class=nav-text>2.20 useServerSeoMeta</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-18><span class=nav-number>2.20.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-18><span class=nav-number>2.20.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-21-useState><span class=nav-number>2.21.</span> <span class=nav-text>2.21 useState</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-19><span class=nav-number>2.21.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-19><span class=nav-number>2.21.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%87%AA%E5%AE%9A%E4%B9%89-Composables><span class=nav-number>3.</span> <span class=nav-text>自定义 Composables</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%99%84%E5%BD%95><span class=nav-number>4.</span> <span class=nav-text>附录</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BE%80%E6%9C%9F%E6%96%87%E7%AB%A0%E5%BD%92%E6%A1%A3%EF%BC%9A><span class=nav-number>4.1.</span> <span class=nav-text>往期文章归档：</span></a></li></ol></li></ol></div></div></div></div></div></div></div><div class="page-main-content-bottom border-box"><footer class="footer border-box"><div class="copyright-info info-item">&copy;&nbsp;<span>2023</span>&nbsp;-&nbsp;2025 &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a target=_blank rel=noopener href=https://stats.uptimerobot.com/9mwrCwss4f>All systems status</a></div><div class="theme-info info-item">由&nbsp;<a target=_blank href=/ >Hexo</a>&nbsp;驱动&nbsp;&&nbsp;主题&nbsp;<a class=keep-version target=_blank href=/ >Keep</a></div><div class="deploy-info info-item"><a target=_blank rel=nofollow href=https://tools.cmdragon.cn/ >本站由 <span class=tooltip data-tooltip-content="GitHub Pages"><img src=/images/brands/github.png alt=deploy></span>提供部署服务</a></div></footer></div></div><div class="post-tools right-toc"><div class="post-tools-container border-box"><ul class="tools-list border-box"><li class="tools-item flex-center toggle-show-toc"><i class="fas fa-list"></i></li><li class="tools-item flex-center full-screen"><i class="fa-solid fa-expand"></i></li></ul></div></div><div class=side-tools><div class="side-tools-container border-box"><ul class="side-tools-list side-tools-show-handle border-box"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-toggle-theme-mode flex-center"><i class="fas fa-moon"></i></li><li class="tools-item rss flex-center"><a class=flex-center href=/atom.xml target=_blank><i class="fas fa-rss"></i></a></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="exposed-tools-list border-box"><li class="tools-item toggle-show-toc-tablet flex-center"><i class="fas fa-list"></i></li><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li><li class="tools-item tool-scroll-to-top flex-center show-arrow"><i class="arrow fas fa-arrow-up"></i> <span class=percent></span></li></ul></div></div><div class=zoom-in-image-mask><img class=zoom-in-image></div><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-input-field-pre><i class="fas fa-keyboard"></i></span><div class=search-input-container><input autocomplete=off autocorrect=off autocapitalize=off placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=close-popup-btn><i class="fas fa-times"></i></span></div><div id=search-result><div id=no-result><i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div><div class=tablet-post-toc-mask><div class=tablet-post-toc><div class="post-toc-wrap border-box"><div class="post-toc border-box"><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#Nuxt3-Composables><span class=nav-number>1.</span> <span class=nav-text>Nuxt3 Composables</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#1-1-Composables-%E6%A6%82%E8%BF%B0><span class=nav-number>1.1.</span> <span class=nav-text>1.1 Composables 概述</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#1-2-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE><span class=nav-number>1.2.</span> <span class=nav-text>1.2 安装与配置</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#1-3-%E4%BD%BF%E7%94%A8-Composables-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4><span class=nav-number>1.3.</span> <span class=nav-text>1.3 使用 Composables 的基本步骤</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#1-4-Composables-%E4%B8%8E-Vue-3-%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F><span class=nav-number>1.4.</span> <span class=nav-text>1.4 Composables 与 Vue 3 的响应式系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%A0%B8%E5%BF%83-Composables><span class=nav-number>2.</span> <span class=nav-text>核心 Composables</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#2-1-useFetch><span class=nav-number>2.1.</span> <span class=nav-text>2.1 useFetch</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95><span class=nav-number>2.1.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95><span class=nav-number>2.1.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-2-useHead><span class=nav-number>2.2.</span> <span class=nav-text>2.2 useHead</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-1><span class=nav-number>2.2.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-1><span class=nav-number>2.2.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-3-useRuntimeConfig><span class=nav-number>2.3.</span> <span class=nav-text>2.3 useRuntimeConfig</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-2><span class=nav-number>2.3.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-2><span class=nav-number>2.3.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-4-useRequestEvent><span class=nav-number>2.4.</span> <span class=nav-text>2.4 useRequestEvent</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-3><span class=nav-number>2.4.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-3><span class=nav-number>2.4.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-5-useAppConfig><span class=nav-number>2.5.</span> <span class=nav-text>2.5 useAppConfig</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-6-useAsyncData><span class=nav-number>2.6.</span> <span class=nav-text>2.6 useAsyncData</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-4><span class=nav-number>2.6.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-4><span class=nav-number>2.6.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-7-useCookie><span class=nav-number>2.7.</span> <span class=nav-text>2.7 useCookie</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-5><span class=nav-number>2.7.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-5><span class=nav-number>2.7.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-8-useError><span class=nav-number>2.8.</span> <span class=nav-text>2.8 useError</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-6><span class=nav-number>2.8.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-6><span class=nav-number>2.8.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-9-useHeadSafe><span class=nav-number>2.9.</span> <span class=nav-text>2.9 useHeadSafe</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-7><span class=nav-number>2.9.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-7><span class=nav-number>2.9.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-10-useHydration><span class=nav-number>2.10.</span> <span class=nav-text>2.10 useHydration</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-8><span class=nav-number>2.10.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-8><span class=nav-number>2.10.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-11-useLazyAsyncData><span class=nav-number>2.11.</span> <span class=nav-text>2.11 useLazyAsyncData</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-9><span class=nav-number>2.11.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-9><span class=nav-number>2.11.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-12-useLazyFetch><span class=nav-number>2.12.</span> <span class=nav-text>2.12 useLazyFetch</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-10><span class=nav-number>2.12.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-10><span class=nav-number>2.12.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-13-useNuxtApp><span class=nav-number>2.13.</span> <span class=nav-text>2.13 useNuxtApp</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-11><span class=nav-number>2.13.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-11><span class=nav-number>2.13.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-14-useNuxtData><span class=nav-number>2.14.</span> <span class=nav-text>2.14 useNuxtData</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-12><span class=nav-number>2.14.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-12><span class=nav-number>2.14.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-15-useRequestHeaders><span class=nav-number>2.15.</span> <span class=nav-text>2.15 useRequestHeaders</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-13><span class=nav-number>2.15.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-13><span class=nav-number>2.15.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-16-useRequestURL><span class=nav-number>2.16.</span> <span class=nav-text>2.16 useRequestURL</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-14><span class=nav-number>2.16.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-14><span class=nav-number>2.16.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-17-useRoute><span class=nav-number>2.17.</span> <span class=nav-text>2.17 useRoute</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-15><span class=nav-number>2.17.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-15><span class=nav-number>2.17.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-18-useSeoMeta><span class=nav-number>2.18.</span> <span class=nav-text>2.18 useSeoMeta</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-16><span class=nav-number>2.18.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-16><span class=nav-number>2.18.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-19-useRouter><span class=nav-number>2.19.</span> <span class=nav-text>2.19 useRouter</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-17><span class=nav-number>2.19.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-17><span class=nav-number>2.19.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-20-useServerSeoMeta><span class=nav-number>2.20.</span> <span class=nav-text>2.20 useServerSeoMeta</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-18><span class=nav-number>2.20.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-18><span class=nav-number>2.20.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#2-21-useState><span class=nav-number>2.21.</span> <span class=nav-text>2.21 useState</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-19><span class=nav-number>2.21.1.</span> <span class=nav-text>基本用法</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95-19><span class=nav-number>2.21.2.</span> <span class=nav-text>进阶用法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%87%AA%E5%AE%9A%E4%B9%89-Composables><span class=nav-number>3.</span> <span class=nav-text>自定义 Composables</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%99%84%E5%BD%95><span class=nav-number>4.</span> <span class=nav-text>附录</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BE%80%E6%9C%9F%E6%96%87%E7%AB%A0%E5%BD%92%E6%A1%A3%EF%BC%9A><span class=nav-number>4.1.</span> <span class=nav-text>往期文章归档：</span></a></li></ol></li></ol></div></div></div></div></main><script src=/js/utils.js></script><script src=/js/header-shrink.js></script><script src=/js/back2top.js></script><script src=/js/toggle-theme.js></script><script src=/js/code-block.js></script><script src=/js/main.js></script><script src=/js/libs/anime.min.js></script><script src=/js/local-search.js></script><script src=/js/lazyload.js></script><div class=""><script src=/js/post/post-helper.js></script><script src=/js/post/toc.js></script><script src=/js/post/copyright-info.js></script><script src=/js/post/share.js></script><script defer=defer src=https://unpkg.com/mermaid/dist/mermaid.min.js></script><script>document.addEventListener("DOMContentLoaded",()=>{"undefined"!=typeof mermaid&&mermaid.initialize({startOnLoad:!0,theme:"dark"===document.documentElement.getAttribute("data-theme")?"dark":"default"})})</script></div></body></html>
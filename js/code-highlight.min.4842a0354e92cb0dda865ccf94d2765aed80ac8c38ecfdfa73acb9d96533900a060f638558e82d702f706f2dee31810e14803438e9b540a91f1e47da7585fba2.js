document.addEventListener("DOMContentLoaded",function(){window.hljs&&(document.querySelectorAll(".line-numbers-rows, .hljs-ln-numbers, .gutter, .code-line-numbers").forEach(e=>{e.remove()}),document.querySelectorAll("pre code").forEach(e=>{const t=e.parentElement,n=e.classList.contains("language-mermaid")||e.classList.contains("language-merm")||t&&t.classList.contains("language-mermaid")||t&&t.classList.contains("language-merm")||e.textContent.trim().startsWith("graph ")||e.textContent.trim().startsWith("sequenceDiagram")||e.textContent.trim().startsWith("gantt")||e.textContent.trim().startsWith("classDiagram")||e.textContent.trim().startsWith("stateDiagram");if(n)return;try{hljs.highlightElement(e)}catch{}})),document.querySelectorAll("pre").forEach(function(e){const n=e.querySelector("code"),r=n&&n.classList.contains("language-mermaid")||n&&n.classList.contains("language-merm")||e.classList.contains("language-mermaid")||e.classList.contains("language-merm")||e.parentElement.classList.contains("mermaid");if(r)return;if(!n){const t=document.createElement("code");t.innerHTML=e.innerHTML,e.innerHTML="",e.appendChild(t)}if(!e.hasAttribute("data-lang")){const s=n.className;let t="code";const o=s.match(/language-(\w+)/)||s.match(/lang-(\w+)/);if(o)t=o[1];else if(e.className){const n=e.className.match(/language-(\w+)/)||e.className.match(/lang-(\w+)/);n&&(t=n[1])}if(t==="code"){const e=n.textContent;e.includes("def ")&&e.includes(":")?t="python":e.includes("function")&&e.includes("{")&&e.includes("}")?t="javascript":(e.includes("class")||e.includes("interface"))&&e.includes("{")&&e.includes("}")?t="java":(e.includes("git ")||e.includes("cd ")||e.includes("mkdir ")||e.includes("sudo ")||e.includes("apt ")||e.match(/\$\s*\w+/)||e.includes("for ")&&e.includes("do")&&e.includes("done")||e.includes("if ")&&e.includes("then")&&(e.includes("fi")||e.includes("else")))&&(t="bash")}if(e.setAttribute("data-lang",t),!n.classList.contains(`language-${t}`)&&(n.classList.add(`language-${t}`),window.hljs&&t!=="mermaid"&&t!=="merm"))try{hljs.highlightElement(n)}catch{}}const i=e.querySelector(".code-copy-btn");i&&i.remove();const a=e.querySelector(".code-actions-container");a&&a.remove();const s=document.createElement("div");s.className="code-actions-container";const c=e.getAttribute("data-lang"),o=document.createElement("span");o.className="code-lang-label",o.textContent=c,s.appendChild(o);const t=document.createElement("button");t.className="code-copy-btn",t.textContent="复制",t.addEventListener("click",function(){const n=e.querySelector("code").textContent;try{navigator.clipboard.writeText(n).then(function(){t.textContent="已复制!",setTimeout(function(){t.textContent="复制"},2e3)},function(){t.textContent="复制失败",setTimeout(function(){t.textContent="复制"},2e3)})}catch{const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{document.execCommand("copy"),t.textContent="已复制!"}catch{t.textContent="复制失败"}document.body.removeChild(e),setTimeout(function(){t.textContent="复制"},2e3)}}),s.appendChild(t),e.appendChild(s)});function e(){document.querySelectorAll(".article-content pre").forEach(e=>{if(e.classList.contains("language-mermaid")||e.classList.contains("language-merm")||e.querySelector("code.language-mermaid")||e.querySelector("code.language-merm")||e.parentElement.classList.contains("mermaid"))return;e.classList.remove("line-numbers");const t=e.querySelector(".line-numbers-rows");if(t&&t.remove(),e.querySelector("table.hljs-ln")){const t=e.querySelector("code"),n=e.querySelector("table.hljs-ln");if(t&&n){const e=Array.from(n.querySelectorAll("td.hljs-ln-code")).map(e=>e.textContent).join(`
`);if(t.textContent=e,window.hljs)try{hljs.highlightElement(t)}catch{}}}})}e();function t(){document.querySelectorAll(".code-tabs").forEach(e=>{const n=e.querySelectorAll(".code-tab-item"),t=e.querySelectorAll(".code-tab-pane");if(n.length>0&&n[0].classList.add("active"),t.length>0){t[0].classList.add("active");const e=t[0].querySelector("pre code");e&&window.hljs&&setTimeout(()=>{try{hljs.highlightElement(e)}catch{}},0)}n.forEach((e,s)=>{e.addEventListener("click",()=>{if(n.forEach(e=>e.classList.remove("active")),t.forEach(e=>e.classList.remove("active")),e.classList.add("active"),t[s]){t[s].classList.add("active");const e=t[s].querySelector("pre code");e&&window.hljs&&setTimeout(()=>{try{hljs.highlightElement(e)}catch{}},0)}})})})}t(),setTimeout(()=>{window.hljs&&document.querySelectorAll("pre code:not(.mermaid):not(.language-mermaid):not(.language-merm)").forEach(e=>{if(!e.parentElement.classList.contains("mermaid"))try{hljs.highlightElement(e)}catch{}})},500)})
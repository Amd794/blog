{{ define "main" }}
<div class="mx-auto">
    <!-- 英雄区域 - 更现代的设计 -->
    <section class="relative bg-gradient-to-br from-blue-600 to-indigo-800 text-white mb-12 rounded-xl overflow-hidden shadow-xl">
        <!-- 背景图案装饰 -->
        <div class="absolute inset-0 opacity-10">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
                <defs>
                    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                        <path d="M0 40L40 0M0 0L40 40" stroke="white" stroke-width="1" fill="none" />
                    </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#grid)" />
            </svg>
        </div>
        
        <div class="container mx-auto px-6 py-16 md:py-24 relative z-10 flex flex-col md:flex-row items-center">
            <div class="md:w-1/2 mb-8 md:mb-0">
                <h1 class="text-4xl md:text-5xl font-bold mb-4 leading-tight">
                    欢迎来到<br/><span class="text-yellow-300">cmdragon's Blog</span>
                </h1>
                <p class="text-xl mb-8 text-blue-100 max-w-lg">
                    探索编程世界的奇妙旅程，分享技术见解与实用经验，助力你的开发之路
                </p>
                <div class="flex flex-wrap gap-4">
                    <a href="/archives/" class="bg-blue-700 hover:bg-blue-800 px-6 py-3 rounded-lg font-medium transition-all duration-300 shadow-md hover:shadow-lg border border-blue-400 flex items-center" aria-label="浏览归档" tabindex="0">
                        <iconify-icon icon="mdi:archive" class="mr-2" width="20" height="20"></iconify-icon>
                浏览归档
            </a>
        </div>
    </div>
            <div class="md:w-1/2 flex justify-center">
                <div class="relative w-64 h-64 md:w-80 md:h-80">
                    <!-- 装饰圆环 -->
                    <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-yellow-300 to-pink-500 opacity-20 animate-pulse"></div>
                    <!-- 头像或图标 -->
                    <div class="absolute inset-4 rounded-full bg-gradient-to-br from-blue-400 to-indigo-600 flex items-center justify-center shadow-2xl">
                        <iconify-icon icon="mdi:code-braces" width="100" height="100" class="text-white"></iconify-icon>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 特色内容区块 -->
    <section class="container mx-auto px-4 mb-16">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- 特色卡片 1 -->
            <div class="bg-gradient-to-br from-green-50 to-green-100 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 border border-green-200 dark:border-gray-600">
                <div class="rounded-full bg-green-200 dark:bg-green-700 w-14 h-14 flex items-center justify-center mb-4">
                    <iconify-icon icon="mdi:code-tags" width="28" height="28" class="text-green-700 dark:text-green-200"></iconify-icon>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-800 dark:text-white">前端开发</h3>
                <p class="text-gray-600 dark:text-gray-300">探索现代前端技术栈，包括Vue、React、TailwindCSS等工具和框架。</p>
                <a href="/categories/前端开发" class="mt-4 inline-flex items-center text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 font-medium">
                    了解更多
                    <iconify-icon icon="mdi:arrow-right" class="ml-1" width="16" height="16"></iconify-icon>
                </a>
            </div>
            
            <!-- 特色卡片 2 -->
            <div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 border border-blue-200 dark:border-gray-600">
                <div class="rounded-full bg-blue-200 dark:bg-blue-700 w-14 h-14 flex items-center justify-center mb-4">
                    <iconify-icon icon="mdi:server" width="28" height="28" class="text-blue-700 dark:text-blue-200"></iconify-icon>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-800 dark:text-white">后端开发</h3>
                <p class="text-gray-600 dark:text-gray-300">深入后端技术，包括API设计、数据库优化、服务架构等专业知识。</p>
                <a href="/categories/后端开发" class="mt-4 inline-flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium">
                    了解更多
                    <iconify-icon icon="mdi:arrow-right" class="ml-1" width="16" height="16"></iconify-icon>
                </a>
            </div>
            
            <!-- 特色卡片 3 -->
            <div class="bg-gradient-to-br from-purple-50 to-purple-100 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 border border-purple-200 dark:border-gray-600">
                <div class="rounded-full bg-purple-200 dark:bg-purple-700 w-14 h-14 flex items-center justify-center mb-4">
                    <iconify-icon icon="mdi:lightbulb" width="28" height="28" class="text-purple-700 dark:text-purple-200"></iconify-icon>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-800 dark:text-white">学习资源</h3>
                <p class="text-gray-600 dark:text-gray-300">精选学习资料、教程和工具推荐，助你高效提升编程技能。</p>
                <a href="/categories/学习资源" class="mt-4 inline-flex items-center text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 font-medium">
                    了解更多
                    <iconify-icon icon="mdi:arrow-right" class="ml-1" width="16" height="16"></iconify-icon>
                </a>
            </div>
        </div>
    </section>
    
    <!-- 主内容区 -->
    <div class="container mx-auto px-4">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- 左侧主要内容 -->
            <main class="lg:w-2/3">
    <!-- 最新文章 -->
                <section class="mb-16">
                    <div class="flex items-center justify-between mb-8">
                        <h2 class="text-2xl font-bold flex items-center">
                            <iconify-icon icon="mdi:newspaper-variant" class="mr-2" width="28" height="28"></iconify-icon>
                            最新文章
                        </h2>
                        <a href="/posts/" class="text-primary hover:text-primary-dark flex items-center bg-blue-50 dark:bg-blue-900/30 px-4 py-2 rounded-lg" aria-label="查看所有文章" tabindex="0">
                查看所有
                <iconify-icon icon="mdi:arrow-right" class="ml-1" width="16" height="16"></iconify-icon>
            </a>
        </div>
        
        <div class="space-y-8">
            {{ $paginator := .Paginate (where site.RegularPages "Type" "in" site.Params.mainSections) }}
            {{ range $paginator.Pages }}
                            <article class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 border border-gray-100 dark:border-gray-700 flex flex-col md:flex-row md:max-h-[320px]">
                                <!-- 文章缩略图 -->
                                {{ $hasImage := false }}
                                {{ with .Params.cover }}
                                    {{ $hasImage = true }}
                                    <div class="md:w-2/5 h-40 sm:h-48 md:h-auto overflow-hidden flex-shrink-0">
                                        <img src="{{ . }}" alt="{{ $.Title }}" class="w-full h-full object-cover transition-transform duration-500 hover:scale-105">
                                    </div>
                                {{ end }}
                                
                                <div class="{{ if $hasImage }}md:w-3/5{{ end }} p-4 md:p-6 overflow-hidden flex flex-col">
                                    <h3 class="text-lg md:text-xl font-bold mb-2 md:mb-3 line-clamp-2">
                            <a href="{{ .Permalink }}" class="text-gray-900 dark:text-white hover:text-primary dark:hover:text-primary transition-colors duration-200">
                                {{ .Title }}
                            </a>
                        </h3>
                        
                                    <div class="flex flex-wrap items-center text-sm text-gray-500 dark:text-gray-400 mb-2 md:mb-3 gap-2">
                                        <span class="flex items-center bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-md">
                                <iconify-icon icon="mdi:calendar" class="mr-1" width="16" height="16"></iconify-icon>
                                {{ .Date.Format "2006-01-02" }}
                            </span>
                            
                            {{ with .Params.categories }}
                                            <span class="flex items-center bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-md">
                                    <iconify-icon icon="mdi:folder" class="mr-1" width="16" height="16"></iconify-icon>
                                    {{ range $index, $category := . }}
                                        {{ if $index }}, {{ end }}
                                        <a href="{{ "/categories/" | relLangURL }}{{ $category | urlize }}" class="hover:text-primary">
                                            {{ $category }}
                                        </a>
                                    {{ end }}
                                </span>
                            {{ end }}
                                    </div>
                                    
                                    {{ with .Summary }}
                                        <div class="text-gray-700 dark:text-gray-300 mb-3 line-clamp-2 md:line-clamp-3 text-sm md:text-base flex-grow">
                                            {{ . | truncate 120 }}
                                        </div>
                                    {{ end }}
                                    
                                    <div class="flex flex-wrap gap-2 mb-3 mt-auto">
                                        {{ range first 3 .Params.tags }}
                                            <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" 
                                               class="text-xs px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-primary hover:text-white transition-colors duration-200">
                                                #{{ . }}
                                            </a>
                                        {{ end }}
                                        {{ if gt (len .Params.tags) 3 }}
                                            <span class="text-xs px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300">
                                                +{{ sub (len .Params.tags) 3 }}
                                </span>
                            {{ end }}
                        </div>
                        
                                    <a href="{{ .Permalink }}" class="inline-flex items-center text-primary hover:text-primary-dark transition-colors duration-200 font-medium text-sm">
                            阅读更多
                            <iconify-icon icon="mdi:arrow-right" class="ml-1" width="16" height="16"></iconify-icon>
                        </a>
                    </div>
                </article>
            {{ end }}
        </div>
        
                    <!-- 分页 - 改进样式 -->
                    <div class="mt-10">
                        {{ if or (.Paginator.HasPrev) (.Paginator.HasNext) }}
                            <nav class="flex justify-center">
                                <ul class="flex items-center space-x-2">
                                    <!-- 上一页 -->
                                    {{ if .Paginator.HasPrev }}
                                        <li>
                                            <a href="{{ .Paginator.Prev.URL }}" class="flex items-center px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md border border-gray-200 dark:border-gray-700 hover:bg-primary hover:text-white transition-colors duration-200" aria-label="上一页" tabindex="0">
                                                <iconify-icon icon="mdi:chevron-left" class="mr-1" width="16" height="16"></iconify-icon>
                                                上一页
                                            </a>
                                        </li>
                                    {{ else }}
                                        <li>
                                            <span class="flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 rounded-md border border-gray-200 dark:border-gray-700 cursor-not-allowed">
                                                <iconify-icon icon="mdi:chevron-left" class="mr-1" width="16" height="16"></iconify-icon>
                                                上一页
                                            </span>
                                        </li>
                                    {{ end }}
                                    
                                    <!-- 页码 -->
                                    {{ $pag := .Paginator }}
                                    {{ $total := $pag.TotalPages }}
                                    {{ $current := $pag.PageNumber }}
                                    
                                    {{ range $pag.Pagers }}
                                        {{ $pageNum := .PageNumber }}
                                        <!-- 显示当前页、第一页、最后一页，以及当前页附近的页码 -->
                                        {{ if or (eq $pageNum 1) (eq $pageNum $total) (and (ge $pageNum (sub $current 1)) (le $pageNum (add $current 1))) }}
                                            <li>
                                                <a href="{{ .URL }}" 
                                                   class="flex items-center justify-center w-10 h-10 {{ if eq $pageNum $current }}bg-primary text-white{{ else }}bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-primary hover:text-white{{ end }} rounded-md border {{ if eq $pageNum $current }}border-primary{{ else }}border-gray-200 dark:border-gray-700{{ end }} transition-colors duration-200"
                                                   aria-label="第 {{ $pageNum }} 页"
                                                   tabindex="0">
                                                    {{ $pageNum }}
                                                </a>
                                            </li>
                                        {{ else if or (eq $pageNum (add $current 2)) (eq $pageNum (sub $current 2)) }}
                                            <li>
                                                <span class="flex items-center justify-center w-10 h-10 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md border border-gray-200 dark:border-gray-700">
                                                    ...
                                                </span>
                                            </li>
                                        {{ end }}
                                    {{ end }}
                                    
                                    <!-- 下一页 -->
                                    {{ if .Paginator.HasNext }}
                                        <li>
                                            <a href="{{ .Paginator.Next.URL }}" class="flex items-center px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md border border-gray-200 dark:border-gray-700 hover:bg-primary hover:text-white transition-colors duration-200" aria-label="下一页" tabindex="0">
                                                下一页
                                                <iconify-icon icon="mdi:chevron-right" class="ml-1" width="16" height="16"></iconify-icon>
                                            </a>
                                        </li>
                                    {{ else }}
                                        <li>
                                            <span class="flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 rounded-md border border-gray-200 dark:border-gray-700 cursor-not-allowed">
                                                下一页
                                                <iconify-icon icon="mdi:chevron-right" class="ml-1" width="16" height="16"></iconify-icon>
                                            </span>
                                        </li>
                                    {{ end }}
                                </ul>
                            </nav>
                        {{ end }}
                    </div>
    </section>
            </main>
            
            <!-- 右侧边栏 -->
            <aside class="lg:w-1/3">
                <!-- 分类 -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8 border border-gray-100 dark:border-gray-700">
                <h3 class="text-xl font-bold mb-4 flex items-center">
                    <iconify-icon icon="mdi:folder" class="mr-2" width="24" height="24"></iconify-icon>
                        文章分类
                </h3>
                    <div class="space-y-2">
                    {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
                        <a href="{{ "/categories/" | relLangURL }}{{ $name | urlize }}" 
                               class="flex items-center justify-between py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200"
                           aria-label="分类: {{ $name }}"
                           tabindex="0">
                                <span class="flex items-center">
                                    <iconify-icon icon="mdi:chevron-right" class="mr-2 text-primary" width="16" height="16"></iconify-icon>
                            {{ $name }}
                                </span>
                                <span class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded-md text-xs">
                                    {{ $taxonomy.Count }}
                                </span>
                        </a>
                    {{ end }}
                </div>
            </div>
            
            <!-- 热门标签 -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8 border border-gray-100 dark:border-gray-700">
                <h3 class="text-xl font-bold mb-2 flex items-center">
                    <div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-1.5 rounded text-white mr-2">
                        <iconify-icon icon="mdi:tag-multiple" width="16" height="16"></iconify-icon>
                    </div>
                    热门标签
                </h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">站内最热门的话题标签</p>
                <div class="flex flex-wrap gap-2">
                    {{ $tagLimit := 20 }}
                    {{ range $i, $tag := first $tagLimit (sort .Site.Taxonomies.tags "Count" "desc") }}
                        {{ $name := $tag.Page.Title }}
                        {{ $count := $tag.Count }}
                        <a href="{{ $tag.Page.Permalink }}" 
                           class="bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-800/40 text-blue-600 dark:text-blue-300 px-3 py-1.5 rounded-lg text-sm transition-colors duration-200 flex items-center"
                           aria-label="标签: {{ $name }}"
                           tabindex="0">
                            <iconify-icon icon="mdi:tag" class="mr-1" width="14" height="14"></iconify-icon>
                            {{ $name }}
                            <span class="ml-1 bg-blue-100 dark:bg-blue-800/60 text-blue-800 dark:text-blue-200 px-1.5 py-0.5 rounded text-xs">{{ $count }}</span>
                        </a>
                    {{ end }}
                </div>
                
                {{ if eq (len .Site.Taxonomies.tags) 0 }}
                <div class="text-center text-gray-500 dark:text-gray-400 py-4">
                    <iconify-icon icon="mdi:tag-off" width="32" height="32" class="mx-auto mb-2 opacity-50"></iconify-icon>
                    <p>暂无标签</p>
                </div>
                {{ end }}
            </div>
                
                <!-- 最近更新 -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 border border-gray-100 dark:border-gray-700">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <iconify-icon icon="mdi:clock-outline" class="mr-2" width="24" height="24"></iconify-icon>
                        最近更新
                    </h3>
                    <div class="space-y-4">
                        {{ range first 5 (where site.RegularPages "Type" "in" site.Params.mainSections) }}
                            <a href="{{ .Permalink }}" class="block group">
                                <div class="flex items-start">
                                    <span class="flex-shrink-0 w-2 h-2 mt-2 rounded-full bg-primary mr-3"></span>
                                    <div>
                                        <h4 class="text-gray-800 dark:text-gray-200 group-hover:text-primary transition-colors duration-200 line-clamp-2">
                                            {{ .Title }}
                                        </h4>
                                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                                            {{ .Date.Format "2006-01-02" }}
                                        </p>
                                    </div>
                                </div>
                            </a>
                        {{ end }}
                    </div>
                </div>
            </aside>
        </div>
    </div>
</div>
{{ end }} 
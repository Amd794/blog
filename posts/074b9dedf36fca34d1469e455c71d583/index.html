<!doctype html><html lang=zh-cn><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文 - cmdragon's Blog</title><meta name=description content="摘要：“Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文”介绍了Nuxt 3中useNuxtApp的使用，包括访问Vue实例、运行时钩子、配置变量和SSR上下文。文章详细说明了provide和hook函数的应用，以及如何在插件和组件中利用这些功能。同时，探讨了vueApp属性、ssrContext和payload的使用场景，以及isHydrating和runWithContext方法的作用。"><meta name=author content="cmdragon"><meta name=robots content="index, follow"><link rel=canonical href=https://blog.cmdragon.cn/posts/074b9dedf36fca34d1469e455c71d583/><meta property="og:title" content="Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文 - cmdragon's Blog"><meta property="og:description" content="摘要：“Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文”介绍了Nuxt 3中useNuxtApp的使用，包括访问Vue实例、运行时钩子、配置变量和SSR上下文。文章详细说明了provide和hook函数的应用，以及如何在插件和组件中利用这些功能。同时，探讨了vueApp属性、ssrContext和payload的使用场景，以及isHydrating和runWithContext方法的作用。"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.cmdragon.cn/posts/074b9dedf36fca34d1469e455c71d583/"><meta property="og:image" content="https://blog.cmdragon.cn/images/logo/social-card.png"><meta property="og:site_name" content="cmdragon's Blog"><meta property="article:published_time" content="2024-07-21T00:18:53+08:00"><meta property="article:modified_time" content="2024-07-21T00:18:53+08:00"><meta property="article:section" content="前端开发"><meta property="article:tag" content="Nuxt3"><meta property="article:tag" content="VueJS"><meta property="article:tag" content="SSR"><meta property="article:tag" content="插件"><meta property="article:tag" content="组件"><meta property="article:tag" content="钩子"><meta property="article:tag" content="上下文"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文 - cmdragon's Blog"><meta name=twitter:description content="摘要：“Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文”介绍了Nuxt 3中useNuxtApp的使用，包括访问Vue实例、运行时钩子、配置变量和SSR上下文。文章详细说明了provide和hook函数的应用，以及如何在插件和组件中利用这些功能。同时，探讨了vueApp属性、ssrContext和payload的使用场景，以及isHydrating和runWithContext方法的作用。"><meta name=twitter:image content="https://blog.cmdragon.cn/images/logo/social-card.png"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文","datePublished":"2024-07-21T00:18:53\u002b08:00","dateModified":"2024-07-21T00:18:53\u002b08:00","author":{"@type":"Person","name":"cmdragon"},"description":"摘要：“Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文”介绍了Nuxt 3中useNuxtApp的使用，包括访问Vue实例、运行时钩子、配置变量和SSR上下文。文章详细说明了provide和hook函数的应用，以及如何在插件和组件中利用这些功能。同时，探讨了vueApp属性、ssrContext和payload的使用场景，以及isHydrating和runWithContext方法的作用。","image":"https:\/\/blog.cmdragon.cn\/images\/logo\/social-card.png","url":"https:\/\/blog.cmdragon.cn\/posts\/074b9dedf36fca34d1469e455c71d583\/","publisher":{"@type":"Organization","name":"cmdragon\u0027s Blog","logo":{"@type":"ImageObject","url":"https:\/\/blog.cmdragon.cn\/images\/logo\/small.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.cmdragon.cn\/posts\/074b9dedf36fca34d1469e455c71d583\/"},"keywords":"前端开发","keywords":"Nuxt3, VueJS, SSR, 插件, 组件, 钩子, 上下文","wordCount":"4666"}</script><link rel=preconnect href=https://cdnjs.cloudflare.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js as=script><link rel=icon href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/images/logo/small.png><link rel=icon type=image/png sizes=32x32 href=/images/logo/small.png><link rel=icon type=image/svg+xml href=/images/logo/scalable.svg><meta name=theme-color content="#3B82F6"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2874982874195135" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.3.0/mermaid.min.js></script><script>(function(){if(typeof mermaid!="undefined"){window.mermaid=mermaid;const e=document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches;window.mermaid.initialize({startOnLoad:!0,theme:e?"dark":"default",securityLevel:"loose",flowchart:{curve:"basis",htmlLabels:!0},sequence:{mirrorActors:!1,wrap:!0},themeVariables:{primaryColor:"#3b82f6",primaryTextColor:"#ffffff",primaryBorderColor:e?"#60a5fa":"#2563eb",lineColor:e?"#94a3b8":"#4b5563",secondaryColor:e?"#1e293b":"#f0f9ff",tertiaryColor:e?"#334155":"#f3f4f6"}}),document.addEventListener("DOMContentLoaded",function(){try{typeof window.mermaid.init=="function"&&window.mermaid.init(0[0],document.querySelectorAll(".mermaid"))}catch{}})}})()</script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css><script defer src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.js></script><script defer src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/contrib/auto-render.min.js></script><link rel=stylesheet href=/css/tailwind.min.css><script src=/js/iconify-icon.min.js></script><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"><link rel=stylesheet href=/css/code-highlight.css><link rel=stylesheet href=/css/markdown.css><style>.mermaid{margin:2rem auto;text-align:center;overflow:visible;width:auto;max-width:100%;background-color:#f9fafb;padding:1.5rem .5rem;border-radius:.5rem;box-shadow:0 2px 4px rgba(0,0,0,5%);display:block}.dark .mermaid{background-color:#1e293b;box-shadow:0 2px 4px rgba(0,0,0,.15)}.mermaid svg{display:block !important;max-width:100%;width:auto !important;height:auto !important;font-size:14px;margin:0 auto}.mermaid .node rect,.mermaid .node circle,.mermaid .node ellipse,.mermaid .node polygon,.mermaid .node path{stroke-width:1px}.mermaid .edgePath .path{stroke-width:1.5px}.mermaid .edgeLabel{font-size:.85em;background-color:inherit !important}.mermaid .label text,.mermaid text.label{fill:#374151;font-weight:400}.dark .mermaid .label text,.dark .mermaid text.label{fill:#e5e7eb}@media(max-width:768px){.mermaid{max-width:98%;padding:.8rem .3rem;margin:1.2rem auto}.mermaid svg{font-size:12px}}</style></head><body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen flex flex-col"><div class="flex-grow flex flex-col"><header class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-30 transition-all duration-300 border-b border-gray-100 dark:border-gray-700"><div class="container mx-auto px-4"><div class="flex justify-between items-center h-16"><div class="flex items-center"><a href=https://blog.cmdragon.cn/ class="flex items-center gap-2 text-xl font-bold text-gray-900 dark:text-white group transition-all duration-300"><div class="h-9 w-9 flex items-center justify-center transition-all duration-300 transform group-hover:scale-105"><img src=/images/logo/small.png alt="cmdragon's Blog Logo" class="h-full w-auto"></div><span class="group-hover:text-primary transition-colors duration-300">cmdragon's Blog</span></a></div><nav class="hidden md:flex space-x-1"><a href=/ class="px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 relative overflow-hidden group text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" aria-label=首页 tabindex=0><span class="relative z-10">首页</span>
<span class="absolute bottom-0 left-0 w-full h-0 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:h-full opacity-80 -z-0"></span>
<span class="absolute bottom-0 left-0 w-0 h-1 bg-blue-500 transition-all duration-300 group-hover:w-full"></span>
</a><a href=/archives/ class="px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 relative overflow-hidden group text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" aria-label=归档 tabindex=0><span class="relative z-10">归档</span>
<span class="absolute bottom-0 left-0 w-full h-0 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:h-full opacity-80 -z-0"></span>
<span class="absolute bottom-0 left-0 w-0 h-1 bg-blue-500 transition-all duration-300 group-hover:w-full"></span>
</a><a href=/categories/ class="px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 relative overflow-hidden group text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" aria-label=分类 tabindex=0><span class="relative z-10">分类</span>
<span class="absolute bottom-0 left-0 w-full h-0 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:h-full opacity-80 -z-0"></span>
<span class="absolute bottom-0 left-0 w-0 h-1 bg-blue-500 transition-all duration-300 group-hover:w-full"></span>
</a><a href=/tags/ class="px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 relative overflow-hidden group text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" aria-label=标签 tabindex=0><span class="relative z-10">标签</span>
<span class="absolute bottom-0 left-0 w-full h-0 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:h-full opacity-80 -z-0"></span>
<span class="absolute bottom-0 left-0 w-0 h-1 bg-blue-500 transition-all duration-300 group-hover:w-full"></span>
</a><a href=/friends/ class="px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 relative overflow-hidden group text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700" aria-label=友链 tabindex=0><span class="relative z-10">友链</span>
<span class="absolute bottom-0 left-0 w-full h-0 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:h-full opacity-80 -z-0"></span>
<span class="absolute bottom-0 left-0 w-0 h-1 bg-blue-500 transition-all duration-300 group-hover:w-full"></span></a></nav><div class="flex items-center space-x-3"><button class="p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary" aria-label=搜索 tabindex=0 onclick=openSiteSearch()>
<iconify-icon icon=mdi:magnify width=20 height=20></iconify-icon></button>
<button id=theme-toggle class="p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary" aria-label=切换深色模式 tabindex=0>
<iconify-icon icon=mdi:weather-sunny class=dark:hidden width=20 height=20></iconify-icon><iconify-icon icon=mdi:weather-night class="hidden dark:block" width=20 height=20></iconify-icon></button>
<button id=mobile-menu-button class="md:hidden p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary" aria-label=打开菜单 tabindex=0>
<iconify-icon icon=mdi:menu width=20 height=20></iconify-icon></button></div></div><div id=mobile-menu class="md:hidden hidden pb-3"><div class="space-y-2 px-2 pt-2 pb-3 rounded-lg bg-gray-50 dark:bg-gray-700 mt-2 shadow-inner"><a href=/ class="block px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600" aria-label=首页 tabindex=0><div class="flex items-center"><iconify-icon icon=mdi:chevron-right class=mr-2 width=18 height=18></iconify-icon>首页</div></a><a href=/archives/ class="block px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600" aria-label=归档 tabindex=0><div class="flex items-center"><iconify-icon icon=mdi:chevron-right class=mr-2 width=18 height=18></iconify-icon>归档</div></a><a href=/categories/ class="block px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600" aria-label=分类 tabindex=0><div class="flex items-center"><iconify-icon icon=mdi:chevron-right class=mr-2 width=18 height=18></iconify-icon>分类</div></a><a href=/tags/ class="block px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600" aria-label=标签 tabindex=0><div class="flex items-center"><iconify-icon icon=mdi:chevron-right class=mr-2 width=18 height=18></iconify-icon>标签</div></a><a href=/friends/ class="block px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600" aria-label=友链 tabindex=0><div class="flex items-center"><iconify-icon icon=mdi:chevron-right class=mr-2 width=18 height=18></iconify-icon>友链</div></a></div></div></div></header><script>document.getElementById("mobile-menu-button").addEventListener("click",function(){const e=document.getElementById("mobile-menu");e.classList.toggle("hidden")}),document.getElementById("theme-toggle").addEventListener("click",function(){document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark"))}),window.addEventListener("scroll",function(){const e=document.querySelector("header");window.scrollY>10?e.classList.add("shadow-lg","bg-white/95","backdrop-blur-sm","dark:bg-gray-800/95"):e.classList.remove("shadow-lg","bg-white/95","backdrop-blur-sm","dark:bg-gray-800/95")})</script><main class="container mx-auto px-4 py-8 flex-grow"><div class="container mx-auto px-4 sm:px-6 relative"><div class="flex flex-col lg:flex-row lg:gap-8"><article class="w-full lg:w-3/4 bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 lg:p-8 mb-8 border border-gray-100 dark:border-gray-700"><nav class="text-sm text-gray-600 dark:text-gray-400 mb-4" aria-label=面包屑导航><ol class="flex flex-wrap items-center" itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=https://blog.cmdragon.cn/ class="hover:text-primary dark:hover:text-primary-light transition-colors" itemprop=item aria-label=首页><span itemprop=name>首页</span>
</a><meta itemprop=position content="1"></li><li class=mx-2>/</li><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=https://blog.cmdragon.cn/posts class="hover:text-primary dark:hover:text-primary-light transition-colors" itemprop=item aria-label=Posts><span itemprop=name>Posts</span>
</a><meta itemprop=position content="2"></li><li class=mx-2>/</li><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><span class="text-gray-800 dark:text-gray-200" itemprop=name title="Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文">Nuxt 3 使用指南：掌握 useNuxtApp 和运行时...</span>
<meta itemprop=position content="3"></li></ol></nav><header class="mb-8 border-b border-gray-100 dark:border-gray-700 pb-6"><h1 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900 dark:text-white leading-tight">Nuxt 3 使用指南：掌握 useNuxtApp 和运行时上下文</h1><div class="flex flex-wrap items-center text-sm text-gray-600 dark:text-gray-300 gap-3"><span class="flex items-center bg-gray-200 dark:bg-gray-700 px-3 py-1.5 rounded-full"><iconify-icon icon=mdi:calendar class=mr-1 width=16 height=16></iconify-icon>2024-07-21
</span><span class="flex items-center bg-blue-200 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-1.5 rounded-full"><iconify-icon icon=mdi:folder class=mr-1 width=16 height=16></iconify-icon><a href=/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91 class="hover:text-blue-700 dark:hover:text-blue-300 transition-colors">前端开发
</a></span><span class="flex items-center bg-purple-200 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-3 py-1.5 rounded-full"><iconify-icon icon=mdi:clock-outline class=mr-1 width=16 height=16></iconify-icon>23 分钟阅读
</span><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed target=_blank rel="noopener noreferrer" class="flex items-center bg-green-200 dark:bg-green-900 text-green-800 dark:text-green-200 px-3 py-1.5 rounded-full hover:bg-green-300 dark:hover:bg-green-800 transition-colors" aria-label="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 License" tabindex=0><iconify-icon icon=simple-icons:creativecommons width=16 height=16 class=mr-1></iconify-icon><iconify-icon icon=simple-icons:creativecommonsbysa width=16 height=16 class=mr-1></iconify-icon><iconify-icon icon=simple-icons:creativecommonsnc width=16 height=16 class=mr-1></iconify-icon><span>BY-NC-SA 4.0</span></a></div></header><div class="article-content prose dark:prose-invert lg:prose-lg max-w-none mb-8 leading-relaxed"><img src="/images/2024_07_21 14_12_43.png" title="2024_07_21 14_12_43.png" alt="2024_07_21 14_12_43.png">
<img src=https://api2.cmdragon.cn/upload/cmder/20250304_012821924.jpg title=cmdragon_cn.png alt=cmdragon_cn.png><p>扫描<a href=https://api2.cmdragon.cn/upload/cmder/20250304_012821924.jpg>二维码</a>关注或者微信搜一搜：<code>编程智域 前端至全栈交流与成长</code></p><p>在 Nuxt 应用的开发过程中，<code>useNuxtApp</code> 是一个极其关键的内置可组合函数，它为开发者提供了访问 Nuxt 共享运行时上下文的重要途径。无论是在客户端还是服务器端，<code>useNuxtApp</code> 都发挥着不可或缺的作用。</p><h2 id=什么是usenuxtapp>什么是 <code>useNuxtApp</code>？</h2><p><code>useNuxtApp</code> 是一个内置的组合式函数，它让你可以访问以下内容：</p><ul><li><strong>Vue 应用程序实例</strong>：你可以通过 <code>useNuxtApp</code> 获取全局的 Vue 应用程序实例，进而使用 Vue 的相关功能，如注册全局组件和指令等。</li><li><strong>运行时钩子</strong>：你可以使用 <code>hook</code> 方法来注册自定义的钩子，以便在特定的生命周期事件中执行代码。例如，你可以在页面开始渲染时执行某些操作。</li><li><strong>运行时配置变量</strong>：你可以访问 Nuxt 应用的配置变量，这些变量可以在应用的不同部分共享。</li><li><strong>内部状态</strong>：你可以访问与服务器端渲染（SSR）相关的上下文信息，如 <code>ssrContext</code> 和 <code>payload</code>。这些信息对于处理服务器端请求和响应非常重要。</li></ul><h3 id=使用示例>使用示例</h3><p>以下是如何在 Nuxt 应用中使用 <code>useNuxtApp</code> 的示例：</p><h4 id=在插件中使用>在插件中使用</h4><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>// plugins/my-plugin.ts
export default defineNuxtPlugin((nuxtApp) =&gt; {
  // 提供一个全局函数
  nuxtApp.provide(&#39;greet&#39;, (name) =&gt; `Hello, ${name}!`);

  // 注册一个钩子
  nuxtApp.hook(&#39;page:start&#39;, () =&gt; {
    console.log(&#39;Page is starting...&#39;);
  });
});</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h4 id=在组件中使用>在组件中使用</h4><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>&lt;template&gt;
  &lt;div&gt;{{ greeting }}&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
const nuxtApp = useNuxtApp(); // 获取 nuxtApp 实例
const greeting = nuxtApp.$greet(&#39;World&#39;); // 调用提供的函数
&lt;/script&gt;</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h2 id=方法>方法</h2><p><code>provide</code> 函数是 Nuxt.js 中用于扩展运行时上下文的一个重要功能。通过这个函数，你可以将值和辅助方法提供给 Nuxt 应用中的所有组合函数和组件，使它们能够共享这些值和方法。</p><h3 id=1provide函数>1. <code>provide</code> 函数</h3><p><code>provide</code> 函数接受两个参数：</p><ul><li><strong>name</strong>：一个字符串，表示你要提供的值的名称。</li><li><strong>value</strong>：你要提供的值或函数。</li></ul><h3 id=使用示例-1>使用示例</h3><p>以下是如何使用 <code>provide</code> 函数创建 Nuxt 插件并在应用中使用它的示例：</p><h4 id=创建插件>创建插件</h4><p>首先，你需要创建一个插件文件，在其中使用 <code>provide</code> 函数：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>// plugins/my-plugin.js
export default defineNuxtPlugin((nuxtApp) =&gt; {
  // 使用 provide 函数提供一个自定义方法
  nuxtApp.provide(&#39;hello&#39;, (name) =&gt; `Hello ${name}!`);
});</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h4 id=在组件中使用-1>在组件中使用</h4><p>接下来，你可以在任何组件中使用 <code>useNuxtApp</code> 来访问这个提供的方法：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>&lt;template&gt;
  &lt;div&gt;{{ greeting }}&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
const nuxtApp = useNuxtApp(); // 获取 nuxtApp 实例

// 调用提供的 hello 方法
const greeting = nuxtApp.$hello(&#39;World&#39;); // 输出 &#34;Hello World!&#34;
&lt;/script&gt;</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><p>在上面的示例中，<code>$hello</code> 成为 <code>nuxtApp</code> 上下文的一个新的自定义部分。你可以在任何可以访问 <code>nuxtApp</code> 的地方使用这个方法。</p><h3 id=2hook函数>2. <code>hook</code> 函数</h3><p><code>hook</code> 函数用于在 Nuxt 应用的生命周期中注册钩子。它接受两个参数：</p><ul><li><strong>name</strong>：一个字符串，表示钩子的名称。</li><li><strong>cb</strong>：一个回调函数，当钩子被触发时执行。</li></ul><h4 id=使用示例-2>使用示例</h4><p>以下是如何在 Nuxt 插件中使用 <code>hook</code> 函数的示例：</p><h5 id=创建插件-1>创建插件</h5><p>你可以创建一个插件文件，并在其中使用 <code>hook</code> 函数来注册钩子。例如，下面的代码在页面开始渲染时和 Vue.js 发生错误时添加自定义逻辑：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>// plugins/test.ts
export default defineNuxtPlugin((nuxtApp) =&gt; {
  // 注册一个钩子，在页面开始渲染时触发
  nuxtApp.hook(&#39;page:start&#39;, () =&gt; {
    console.log(&#39;页面开始渲染&#39;);
    // 在这里添加你的代码，例如记录日志、初始化状态等
  });

  // 注册一个钩子，当 Vue.js 发生错误时触发
  nuxtApp.hook(&#39;vue:error&#39;, (..._args) =&gt; {
    console.log(&#39;捕获到 Vue 错误:&#39;, ..._args);
    // 可以在这里进行错误处理，例如发送错误报告
    // if (process.client) {
    //   console.log(..._args);
    // }
  });
});</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h4 id=可用的运行时钩子>可用的运行时钩子</h4><p>Nuxt.js 提供了一些内置的运行时钩子，你可以在应用中使用它们。以下是一些常用的钩子：</p><ul><li><code>page:start</code>：在页面开始渲染时触发。</li><li><code>vue:error</code>：在 Vue.js 发生错误时触发。</li><li><code>app:mounted</code>：在应用挂载后触发。</li><li><code>app:error</code>：在应用发生错误时触发。</li><li><a href=https://blog.cmdragon.cn/posts/693a389ead2d/>Nuxt3 的生命周期和钩子函数（十一） | cmdragon&rsquo;s Blog</a></li></ul><h3 id=3callhook函数>3. <code>callHook</code> 函数</h3><p><code>callHook</code> 函数接受两个参数：</p><ul><li><strong>name</strong>：一个字符串，表示要调用的钩子的名称。</li><li><strong>&mldr;args</strong>：可选的参数，可以传递给钩子的回调函数。</li></ul><h4 id=使用示例-3>使用示例</h4><p>以下是如何使用 <code>callHook</code> 函数的示例：</p><h5 id=创建插件并调用钩子>创建插件并调用钩子</h5><p>假设你有一个插件需要在初始化时调用一个名为 <code>my-plugin:init</code> 的钩子，你可以这样实现：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>// plugins/myPlugin.ts
export default defineNuxtPlugin((nuxtApp) =&gt; {
  // 注册一个钩子
  nuxtApp.hook(&#39;my-plugin:init&#39;, () =&gt; {
    console.log(&#39;我的插件初始化钩子被调用&#39;);
    // 在这里可以执行初始化逻辑
  });

  // 调用钩子
  nuxtApp.callHook(&#39;my-plugin:init&#39;).then(() =&gt; {
    console.log(&#39;钩子调用完成&#39;);
  }).catch((error) =&gt; {
    console.error(&#39;钩子调用出错:&#39;, error);
  });
});</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h4 id=异步调用钩子>异步调用钩子</h4><p>由于 <code>callHook</code> 返回一个 Promise，你可以使用 <code>async/await</code> 语法来简化异步调用的处理：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>// plugins/myPlugin.ts
export default defineNuxtPlugin(async (nuxtApp) =&gt; {
  // 注册一个钩子
  nuxtApp.hook(&#39;my-plugin:init&#39;, () =&gt; {
    console.log(&#39;我的插件初始化钩子被调用&#39;);
    // 在这里可以执行初始化逻辑
  });

  // 使用 async/await 调用钩子
  try {
    await nuxtApp.callHook(&#39;my-plugin:init&#39;);
    console.log(&#39;钩子调用完成&#39;);
  } catch (error) {
    console.error(&#39;钩子调用出错:&#39;, error);
  }
});</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h2 id=属性>属性</h2><h3 id=1vueapp属性>1. <code>vueApp</code> 属性</h3><p><code>vueApp</code> 是全局的 Vue.js 应用程序实例，你可以通过 <code>nuxtApp</code> 访问它。以下是一些有用的方法：</p><h4 id=11component>1.1 <code>component()</code></h4><ul><li><p><strong>功能</strong>：注册全局组件或检索已注册的组件。</p></li><li><p><strong>用法</strong>：</p><ul><li><p>注册组件：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>nuxtApp.vueApp.component(&#39;MyComponent&#39;, MyComponent);</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style></li><li><p>检索组件：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>const MyComponent = nuxtApp.vueApp.component(&#39;MyComponent&#39;);</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style></li></ul></li></ul><h4 id=12directive>1.2 <code>directive()</code></h4><ul><li><p><strong>功能</strong>：注册全局自定义指令或检索已注册的指令。</p></li><li><p><strong>用法</strong>：</p><ul><li><p>注册指令：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>nuxtApp.vueApp.directive(&#39;my-directive&#39;, {
  // 指令定义
  beforeMount(el, binding) {
    // 指令逻辑
  }
});</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style></li><li><p>检索指令：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>const myDirective = nuxtApp.vueApp.directive(&#39;my-directive&#39;);</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style></li></ul></li></ul><h4 id=13use>1.3 <code>use()</code></h4><ul><li><p><strong>功能</strong>：安装一个 Vue.js 插件。</p></li><li><p><strong>用法</strong>：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>nuxtApp.vueApp.use(MyPlugin);</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style></li></ul><h4 id=14-使用示例>1.4 使用示例</h4><p>下面是一个示例，展示如何在 Nuxt.js 插件中使用 <code>useNuxtApp()</code> 来注册组件和指令：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>// plugins/myPlugin.ts
import { defineNuxtPlugin } from &#39;#app&#39;;
import MyComponent from &#39;@/components/MyComponent.vue&#39;;

export default defineNuxtPlugin((nuxtApp) =&gt; {
  // 注册全局组件
  nuxtApp.vueApp.component(&#39;MyComponent&#39;, MyComponent);

  // 注册自定义指令
  nuxtApp.vueApp.directive(&#39;my-directive&#39;, {
    beforeMount(el, binding) {
      el.style.color = binding.value; // 设置元素颜色
    }
  });

  // 安装 Vue.js 插件
  nuxtApp.vueApp.use(SomeVuePlugin);
});</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h3 id=ssrcontext属性><code>ssrContext</code> 属性</h3><p><code>ssrContext</code> 提供了以下几个重要属性：</p><h4 id=1--url字符串>1. <strong>url（字符串）</strong></h4><pre><code>-   **描述**：表示当前请求的 URL。

-   **用法**：

    ```
    const currentUrl = ssrContext.url;
    console.log('当前请求的URL:', currentUrl);
    
    ```
</code></pre><h4 id=2--eventunjsh3请求事件>2. <strong>event（unjs/h3请求事件）</strong></h4><pre><code>-   **描述**：表示访问当前路由的请求和响应事件。这个事件对象可以用来处理请求和响应的相关逻辑。

-   **用法**：

    ```
    const { req, res } = ssrContext.event;
    // 处理请求和响应
    req.on('data', chunk =&gt; {
      // 处理请求数据
    });
    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.end('Hello World');
    
    ```
</code></pre><h4 id=3--payload对象>3. <strong>payload（对象）</strong></h4><pre><code>-   **描述**：表示 NuxtApp 的负载对象，通常用于在服务器端传递数据到客户端。

-   **用法**：

    ```
    ssrContext.payload = {
      message: 'Hello from server!',
      data: [1, 2, 3]
    };
    
    ```
</code></pre><h4 id=4-使用示例>4. <strong>使用示例</strong></h4><p>下面是一个示例，展示如何在 Nuxt.js 的中间件或插件中使用 <code>ssrContext</code>：</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>// middleware/myMiddleware.js
export default function (context) {
  const { ssrContext } = context;

  // 打印当前请求的 URL
  console.log(&#39;当前请求的URL:&#39;, ssrContext.url);

  // 访问请求事件
  const { req, res } = ssrContext.event;

  // 处理请求
  req.on(&#39;data&#39;, chunk =&gt; {
    console.log(&#39;接收到的数据:&#39;, chunk.toString());
  });

  // 设置负载对象
  ssrContext.payload = {
    message: &#39;Hello from server-side middleware!&#39;,
    timestamp: Date.now()
  };
}</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h3 id=payload><code>payload</code> </h3><p><code>payload</code> 对象通常包含以下几个键：</p><h4 id=1--serverrendered布尔值>1. <strong>serverRendered（布尔值）</strong></h4><pre><code>-   **描述**：指示响应是否是服务器端渲染的。

-   **用法**：

    ```
    if (payload.serverRendered) {
      console.log('这是一个服务器端渲染的响应');
    }
    
    ```
</code></pre><h4 id=1--data对象>1. <strong>data（对象）</strong></h4><pre><code>-   **描述**：当你使用 `useFetch` 或 `useAsyncData` 从 API 端点获取数据时，可以通过 `payload.data` 访问结果负载。这些数据会被缓存，避免重复请求相同的数据。

-   **示例**：

    ```
    // server/api/count.ts
    export default defineEventHandler(async (event) =&gt; {
      return { count: 1 };
    });

    // 在组件中使用
    const { data } = await useAsyncData('count', () =&gt; $fetch('/api/count'));
    console.log(data.value); // 访问 { count: 1 }
    
    ```
</code></pre><h4 id=1--state对象>1. <strong>state（对象）</strong></h4><pre><code>-   **描述**：当你使用 `useState` 在 Nuxt 中设置共享状态时，可以通过 `payload.state.[name-of-your-state]` 访问该状态数据。

-   **示例**：

    ```
    // plugins/my-plugin.ts
    export const useColor = () =&gt; useState&lt;string&gt;('color', () =&gt; 'pink');

    export default defineNuxtPlugin((nuxtApp) =&gt; {
      if (process.server) {
        const color = useColor();
        console.log('服务器端的颜色:', color.value); // 访问状态
      }
    });
    
    ```
</code></pre><h4 id=自定义类型和辅助函数>自定义类型和辅助函数</h4><p>你还可以使用更高级的类型，如 <code>ref</code>、<code>reactive</code>、<code>shallowRef</code>、<code>shallowReactive</code> 和 <code>NuxtError</code> 来管理状态。此外，Nuxt 还提供了特殊的插件辅助函数来添加自定义类型。</p><h5 id=自定义负载插件示例>自定义负载插件示例</h5><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>// plugins/custom-payload.ts
/**
 * 这种类型的插件在Nuxt生命周期的早期运行，早于负载的恢复。
 * 你将无法访问到路由器或其他Nuxt注入的属性。
 */
export default definePayloadPlugin((nuxtApp) =&gt; {
  // 定义负载的转换器
  definePayloadReducer(&#39;BlinkingText&#39;, data =&gt; data === &#39;&lt;blink&gt;&#39; &amp;&amp; &#39;_&#39;);
  definePayloadReviver(&#39;BlinkingText&#39;, () =&gt; &#39;&lt;blink&gt;&#39;);
});</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h3 id=ishydrating><code>isHydrating</code></h3><p>使用<code>nuxtApp.isHydrating</code>（布尔值）检查Nuxt应用程序是否在客户端进行水合。</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>export default defineComponent({
  setup (_props, { slots, emit }) {
    const nuxtApp = useNuxtApp()
    onErrorCaptured((err) =&gt; {
      if (process.client &amp;&amp; !nuxtApp.isHydrating) {
        // ...
      }
    })
  }
})</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><h3 id=runwithcontext><code>runWithContext</code></h3><p>你可能会遇到“Nuxt实例不可用”的消息，所以才会来到这里。请尽量少使用此方法，并报告导致问题的示例，以便最终在框架层面解决。</p><p><code>runWithContext</code>方法用于调用一个函数并为其提供一个显式的Nuxt上下文。通常情况下，Nuxt上下文会在组件之间隐式传递，无需担心。然而，在中间件/插件中处理复杂的<code>async</code>/<code>await</code>场景时，可能会遇到异步调用后当前实例已被取消设置的情况。</p><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>export default defineNuxtRouteMiddleware(async (to, from) =&gt; {
  const nuxtApp = useNuxtApp()
  let user
  try {
    user = await fetchUser()
    // Vue/Nuxt编译器在这里丢失了上下文，因为try/catch块中进行了操作。
  } catch (e) {
    user = null
  }
  if (!user) {
    // 将正确的Nuxt上下文应用于我们的`navigateTo`调用。  
    return nuxtApp.runWithContext(() =&gt; navigateTo(&#39;/auth&#39;))
  }
})</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><div class=highlight-wrapper><div class=highlight><pre class=chroma><code class=language- data-lang>const result = nuxtApp.runWithContext(() =&gt; functionWithContext())</code></pre></div></div><script>function copyCodeToClipboard(e){const t=e.parentElement.parentElement.querySelector("pre"),n=t.textContent;navigator.clipboard.writeText(n).then(function(){const t=e.querySelector(".copy-icon"),n=e.querySelector(".check-icon");t.style.display="none",n.style.display="inline-block",setTimeout(function(){t.style.display="inline-block",n.style.display="none"},2e3)},function(){console.error("复制失败!")})}</script><style>.highlight-wrapper{position:relative;margin:1.5rem 0}.copy-code-button-container{position:absolute;top:5px;right:5px;display:flex;align-items:center;opacity:.7;transition:opacity .2s}.highlight-wrapper:hover .copy-code-button-container{opacity:1}.language-name{font-size:.8rem;color:#718096;margin-right:.5rem}.copy-code-button{background-color:transparent;border:none;color:#718096;cursor:pointer;padding:4px;border-radius:4px}.copy-code-button:hover{background-color:rgba(203,213,224,.2);color:#4a5568}.dark .language-name,.dark .copy-code-button{color:#a0aec0}.dark .copy-code-button:hover{background-color:rgba(160,174,192,.2);color:#e2e8f0}</style><ul><li><code>functionWithContext</code>：任何需要当前Nuxt应用程序上下文的函数。此上下文将自动正确应用。</li></ul><p><code>runWithContext</code>将返回<code>functionWithContext</code>返回的任何内容。</p><h2 id=往期文章归档>往期文章归档：</h2><ul><li><a href=https://blog.cmdragon.cn/posts/382133fd6ac27845d845a7fa96e5ba43/>使用 useLazyFetch 进行异步数据获取 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/954e473bea4ec122949c8c7d84d32c95/>使用 useLazyAsyncData 提升数据加载体验 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/c7ddeca4690387e7e08c83e6c482a576/>Nuxt.js 中使用 useHydration 实现数据水合与同步 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/a1ca5111c82292bda5de4994f537d6f8/>useHeadSafe：安全生成HTML头部元素 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/d5370e880eaec9085a153caba4961676/>Nuxt.js头部魔法：轻松自定义页面元信息，提升用户体验 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/29ff9113e98725ee69fa0148a47ae735/>探索Nuxt.js的useFetch：高效数据获取与处理指南 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/b73679558bc672550fbbb72ae295fdf5/>Nuxt.js 错误侦探：useError 组合函数 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/cd361e1a7930614f1aaf46ad35b28958/>useCookie函数：管理SSR环境下的Cookie | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/e1b1c62b5975f8ebfa61adc507591cf7/>轻松掌握useAsyncData获取异步数据 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/9e044d4b53eab6a1bec49bb86b4c856c/>使用 <code>useAppConfig</code> ：轻松管理应用配置 | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/ff42c6a570627402dbbdd82adbb2ed2a/>Nuxt框架中内置组件详解及使用指南（五） | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/9032c61e840462c63717de392173b4f5/>Nuxt框架中内置组件详解及使用指南（四） | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/7ef2264218c32c7cf7f16dfa7cabd2ce/>Nuxt框架中内置组件详解及使用指南（三） | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/658c8df0cd7e59fe7606507b14b2c37c/>Nuxt框架中内置组件详解及使用指南（二） | cmdragon&rsquo;s Blog</a></li><li><a href=https://blog.cmdragon.cn/posts/214c7ef07a7b90e1787f10ea626320e3/>Nuxt框架中内置组件详解及使用指南（一） | cmdragon&rsquo;s Blog</a></li><li></li></ul><h2 id=免费好用的热门在线工具>免费好用的热门在线工具</h2><ul><li><a href=https://tools.cmdragon.cn/zh>CMDragon 在线工具 - 高级AI工具箱与开发者套件 | 免费好用的在线工具</a></li><li><a href="https://tools.cmdragon.cn/zh/apps?category=trending">应用商店 - 发现1000+提升效率与开发的AI工具和实用程序 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/changelog>CMDragon 更新日志 - 最新更新、功能与改进 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/sponsor>支持我们 - 成为赞助者 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/text-to-image-ai>AI文本生成图像 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/temp-email>临时邮箱 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/qrcode-parser>二维码解析器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/text-to-mindmap>文本转思维导图 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/regex-visualizer>正则表达式可视化工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/steganography-tool>文件隐写工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/iptv-explorer>IPTV 频道探索器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/snapdrop>快传 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/lucky-draw>随机抽奖工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/anime-scene-finder>动漫场景查找器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/time-toolkit>时间工具箱 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/speed-test>网速测试 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/background-remover>AI 智能抠图工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/background-replacer>背景替换工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/artistic-qrcode>艺术二维码生成器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/open-graph-generator>Open Graph 元标签生成器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/image-comparison>图像对比工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/image-compressor>图片压缩专业版 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/password-generator>密码生成器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/svg-optimizer>SVG优化器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/color-palette>调色板生成器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/online-metronome>在线节拍器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/ip-geolocation>IP归属地查询 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/css-grid-layout>CSS网格布局生成器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/email-validator>邮箱验证工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/calligraphy-practice>书法练习字帖 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/finance-calculator-suite>金融计算器套件 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/chinese-kinship-calculator>中国亲戚关系计算器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/protobuf-toolkit>Protocol Buffer 工具箱 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/image-upscaler>图片无损放大 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/text-compare>文本比较工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/ip-batch-lookup>IP批量查询工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/domain-finder>域名查询工具 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/dns-toolkit>DNS工具箱 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/zh/apps/favicon-generator>网站图标生成器 - 应用商店 | 免费好用的在线工具</a></li><li><a href=https://tools.cmdragon.cn/sitemap_index.xml>XML Sitemap</a></li></ul></div><div class="border-t border-gray-200 dark:border-gray-700 pt-6 mt-8"><h2 class="text-lg font-medium mb-4 flex items-center"><div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-1.5 rounded text-white mr-2"><iconify-icon icon=mdi:tag-multiple width=16 height=16></iconify-icon></div>标签</h2><div class="flex flex-wrap gap-2"><a href=/tags/Nuxt3 class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded-full text-sm hover:bg-blue-600 hover:text-white dark:hover:bg-blue-600 dark:hover:text-white transition-colors duration-200" aria-label="标签: Nuxt3" tabindex=0><iconify-icon icon=mdi:tag class=mr-1 inline></iconify-icon>Nuxt3
</a><a href=/tags/VueJS class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded-full text-sm hover:bg-blue-600 hover:text-white dark:hover:bg-blue-600 dark:hover:text-white transition-colors duration-200" aria-label="标签: VueJS" tabindex=0><iconify-icon icon=mdi:tag class=mr-1 inline></iconify-icon>VueJS
</a><a href=/tags/SSR class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded-full text-sm hover:bg-blue-600 hover:text-white dark:hover:bg-blue-600 dark:hover:text-white transition-colors duration-200" aria-label="标签: SSR" tabindex=0><iconify-icon icon=mdi:tag class=mr-1 inline></iconify-icon>SSR
</a><a href=/tags/%E6%8F%92%E4%BB%B6 class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded-full text-sm hover:bg-blue-600 hover:text-white dark:hover:bg-blue-600 dark:hover:text-white transition-colors duration-200" aria-label="标签: 插件" tabindex=0><iconify-icon icon=mdi:tag class=mr-1 inline></iconify-icon>插件
</a><a href=/tags/%E7%BB%84%E4%BB%B6 class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded-full text-sm hover:bg-blue-600 hover:text-white dark:hover:bg-blue-600 dark:hover:text-white transition-colors duration-200" aria-label="标签: 组件" tabindex=0><iconify-icon icon=mdi:tag class=mr-1 inline></iconify-icon>组件
</a><a href=/tags/%E9%92%A9%E5%AD%90 class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded-full text-sm hover:bg-blue-600 hover:text-white dark:hover:bg-blue-600 dark:hover:text-white transition-colors duration-200" aria-label="标签: 钩子" tabindex=0><iconify-icon icon=mdi:tag class=mr-1 inline></iconify-icon>钩子
</a><a href=/tags/%E4%B8%8A%E4%B8%8B%E6%96%87 class="bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded-full text-sm hover:bg-blue-600 hover:text-white dark:hover:bg-blue-600 dark:hover:text-white transition-colors duration-200" aria-label="标签: 上下文" tabindex=0><iconify-icon icon=mdi:tag class=mr-1 inline></iconify-icon>上下文</a></div></div><nav class="border-t border-gray-200 dark:border-gray-700 pt-6 mt-8 grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-xl transition-all hover:shadow-md duration-300"><span class="block text-sm text-gray-600 dark:text-gray-300 mb-2 flex items-center"><iconify-icon icon=mdi:arrow-left class=mr-2 width=16 height=16></iconify-icon>上一篇
</span><a href=https://blog.cmdragon.cn/posts/382133fd6ac27845d845a7fa96e5ba43/ class="font-medium text-blue-700 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-200 block" aria-label="上一篇: 使用 useLazyFetch 进行异步数据获取" tabindex=0>使用 useLazyFetch 进行异步数据获取</a></div><div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-xl md:text-right transition-all hover:shadow-md duration-300"><span class="block text-sm text-gray-600 dark:text-gray-300 mb-2 flex items-center md:justify-end">下一篇<iconify-icon icon=mdi:arrow-right class=ml-2 width=16 height=16></iconify-icon>
</span><a href=https://blog.cmdragon.cn/posts/5097e3f618f180282a847588006a51d8/ class="font-medium text-blue-700 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-200 block" aria-label="下一篇: 使用 useNuxtData 进行高效的数据获取与管理" tabindex=0>使用 useNuxtData 进行高效的数据获取与管理</a></div></nav><div class="border-t border-gray-200 dark:border-gray-700 pt-6 mt-8"><h2 class="text-lg font-medium mb-4 flex items-center"><div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-1.5 rounded text-white mr-2"><iconify-icon icon=mdi:share-variant width=16 height=16></iconify-icon></div>分享</h2><div class="flex flex-wrap gap-3"><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fblog.cmdragon.cn%2fposts%2f074b9dedf36fca34d1469e455c71d583%2f&text=Nuxt%203%20%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e6%8e%8c%e6%8f%a1%20useNuxtApp%20%e5%92%8c%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b8%8a%e4%b8%8b%e6%96%87" target=_blank rel="noopener noreferrer" class="bg-gradient-to-r from-[#1DA1F2] to-[#0a6da6] text-white px-4 py-2 rounded-lg hover:shadow-md transition-all duration-300" aria-label="分享到 Twitter" tabindex=0><iconify-icon icon=mdi:twitter width=20 height=20></iconify-icon></a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.cmdragon.cn%2fposts%2f074b9dedf36fca34d1469e455c71d583%2f" target=_blank rel="noopener noreferrer" class="bg-gradient-to-r from-[#1877F2] to-[#0a4fad] text-white px-4 py-2 rounded-lg hover:shadow-md transition-all duration-300" aria-label="分享到 Facebook" tabindex=0><iconify-icon icon=mdi:facebook width=20 height=20></iconify-icon></a><a href="https://service.weibo.com/share/share.php?url=https%3a%2f%2fblog.cmdragon.cn%2fposts%2f074b9dedf36fca34d1469e455c71d583%2f&title=Nuxt%203%20%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e6%8e%8c%e6%8f%a1%20useNuxtApp%20%e5%92%8c%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b8%8a%e4%b8%8b%e6%96%87" target=_blank rel="noopener noreferrer" class="bg-gradient-to-r from-[#E6162D] to-[#ad0f21] text-white px-4 py-2 rounded-lg hover:shadow-md transition-all duration-300" aria-label=分享到微博 tabindex=0><iconify-icon icon=mdi:sina-weibo width=20 height=20></iconify-icon></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fblog.cmdragon.cn%2fposts%2f074b9dedf36fca34d1469e455c71d583%2f" target=_blank rel="noopener noreferrer" class="bg-gradient-to-r from-[#0A66C2] to-[#07508f] text-white px-4 py-2 rounded-lg hover:shadow-md transition-all duration-300" aria-label="分享到 LinkedIn" tabindex=0><iconify-icon icon=mdi:linkedin width=20 height=20></iconify-icon></a></div></div></article><aside class="w-full lg:w-1/4"><button id=mobile-toc-toggle class="z-50 fixed bottom-4 right-4 z-20 lg:hidden bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
<iconify-icon icon=mdi:table-of-contents width=24 height=24></iconify-icon></button><div id=toc-container class="lg:sticky lg:top-24 bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 mb-8 transition-all duration-300 border border-gray-100 dark:border-gray-700
fixed inset-y-0 right-0 w-72 z-40 lg:z-20 transform translate-x-full lg:transform-none lg:w-auto
lg:overflow-visible flex flex-col"><div class="toc-header flex justify-between items-center pb-3 border-b border-gray-100 dark:border-gray-700 lg:mb-4"><h2 class="text-lg font-medium flex items-center"><div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-1.5 rounded text-white mr-2"><iconify-icon icon=mdi:table-of-contents width=16 height=16></iconify-icon></div>目录</h2><div class="flex items-center"><button id=toc-toggle class="text-gray-500 hover:text-blue-700 dark:hover:text-blue-300 transition-colors p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full" aria-label=滚动到底部/顶部>
<iconify-icon id=toc-icon icon=mdi:arrow-down width=20 height=20></iconify-icon></button>
<button id=toc-close class="ml-1 lg:hidden text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full">
<iconify-icon icon=mdi:close width=20 height=20></iconify-icon></button></div></div><div id=toc-content class="toc text-sm text-gray-700 dark:text-gray-300 flex-grow overflow-y-auto"><nav id=TableOfContents><ul><li><a href=#什么是usenuxtapp>什么是 <code>useNuxtApp</code>？</a><ul><li><a href=#使用示例>使用示例</a><ul><li><a href=#在插件中使用>在插件中使用</a></li><li><a href=#在组件中使用>在组件中使用</a></li></ul></li></ul></li><li><a href=#方法>方法</a><ul><li><a href=#1provide函数>1. <code>provide</code> 函数</a></li><li><a href=#使用示例-1>使用示例</a><ul><li><a href=#创建插件>创建插件</a></li><li><a href=#在组件中使用-1>在组件中使用</a></li></ul></li><li><a href=#2hook函数>2. <code>hook</code> 函数</a><ul><li><a href=#使用示例-2>使用示例</a></li><li><a href=#可用的运行时钩子>可用的运行时钩子</a></li></ul></li><li><a href=#3callhook函数>3. <code>callHook</code> 函数</a><ul><li><a href=#使用示例-3>使用示例</a></li><li><a href=#异步调用钩子>异步调用钩子</a></li></ul></li></ul></li><li><a href=#属性>属性</a><ul><li><a href=#1vueapp属性>1. <code>vueApp</code> 属性</a><ul><li><a href=#11component>1.1 <code>component()</code></a></li><li><a href=#12directive>1.2 <code>directive()</code></a></li><li><a href=#13use>1.3 <code>use()</code></a></li><li><a href=#14-使用示例>1.4 使用示例</a></li></ul></li><li><a href=#ssrcontext属性><code>ssrContext</code> 属性</a><ul><li><a href=#1--url字符串>1. <strong>url（字符串）</strong></a></li><li><a href=#2--eventunjsh3请求事件>2. <strong>event（unjs/h3请求事件）</strong></a></li><li><a href=#3--payload对象>3. <strong>payload（对象）</strong></a></li><li><a href=#4-使用示例>4. <strong>使用示例</strong></a></li></ul></li><li><a href=#payload><code>payload</code> </a><ul><li><a href=#1--serverrendered布尔值>1. <strong>serverRendered（布尔值）</strong></a></li><li><a href=#1--data对象>1. <strong>data（对象）</strong></a></li><li><a href=#1--state对象>1. <strong>state（对象）</strong></a></li><li><a href=#自定义类型和辅助函数>自定义类型和辅助函数</a></li></ul></li><li><a href=#ishydrating><code>isHydrating</code></a></li><li><a href=#runwithcontext><code>runWithContext</code></a></li></ul></li><li><a href=#往期文章归档>往期文章归档：</a></li><li><a href=#免费好用的热门在线工具>免费好用的热门在线工具</a></li></ul></nav></div></div><div id=toc-overlay class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden lg:hidden backdrop-blur-sm"></div></aside></div></div><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js></script><link rel=stylesheet href=/css/markdown.css><link rel=stylesheet href=/css/code-highlight.css><script src=/js/code-highlight.js></script><script src=/js/toc.js></script><script>document.addEventListener("DOMContentLoaded",function(){console.log("初始化代码高亮..."),window.hljs?(console.log("highlight.js 已加载"),document.querySelectorAll("pre code").forEach(function(e){console.log("应用高亮到代码块"),hljs.highlightElement(e)})):console.error("highlight.js 未加载!")})</script><style>#toc-content{max-height:none}@media(min-width:1024px){#toc-content{max-height:none;overflow:visible}#toc-container{max-height:calc(100vh - 120px);overflow-y:auto}nav#TableOfContents{overflow:visible}}@media(max-width:1023px){#toc-container{padding-bottom:env(safe-area-inset-bottom,20px);display:flex;flex-direction:column}#toc-content{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding-bottom:20px}}</style></main><footer class="bg-gradient-to-b from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-inner py-10 mt-12 border-t border-gray-200 dark:border-gray-700"><div class="container mx-auto px-4"><div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8"><div><h3 class="text-lg font-bold mb-4 text-gray-900 dark:text-white flex items-center"><div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-1.5 rounded text-white mr-2"><iconify-icon icon=mdi:information width=16 height=16></iconify-icon></div>关于本站</h3><p class="text-sm text-gray-600 dark:text-gray-400 mb-4">cmdragon's Blog 是一个专注于编程和技术分享的个性化网站，旨在为编程爱好者、学习者和从业者提供全面的前端开发、后端开发以及全栈开发学习资源。</p><div class="flex space-x-3"><a href=https://github.com/cmdragon class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors duration-300 bg-gray-100 dark:bg-gray-700 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600" aria-label=GitHub tabindex=0 target=_blank rel="noopener noreferrer"><iconify-icon icon=mdi:github width=18 height=18></iconify-icon></a><button id=wechat-btn class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors duration-300 bg-gray-100 dark:bg-gray-700 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600" aria-label=微信 tabindex=0>
<iconify-icon icon=mdi:wechat width=18 height=18></iconify-icon></button>
<a href=mailto:support@cmdragon.cn class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors duration-300 bg-gray-100 dark:bg-gray-700 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600" aria-label=Email tabindex=0><iconify-icon icon=mdi:email width=18 height=18></iconify-icon></a><a href=/index.xml class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors duration-300 bg-gray-100 dark:bg-gray-700 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600" aria-label=RSS tabindex=0><iconify-icon icon=mdi:rss width=18 height=18></iconify-icon></a></div></div><div><h3 class="text-lg font-bold mb-4 text-gray-900 dark:text-white flex items-center"><div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-1.5 rounded text-white mr-2"><iconify-icon icon=mdi:link-variant width=16 height=16></iconify-icon></div>快速链接</h3><ul class=space-y-2><li><a href=https://movie.cmdragon.cn/ class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors duration-300 flex items-center" target=_blank rel="noopener noreferrer"><iconify-icon icon=mdi:chevron-right class="mr-2 text-primary" width=16 height=16></iconify-icon>高清影视库</a></li><li><a href=https://comic.cmdragon.cn/ class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors duration-300 flex items-center" target=_blank rel="noopener noreferrer"><iconify-icon icon=mdi:chevron-right class="mr-2 text-primary" width=16 height=16></iconify-icon>精选漫画阅读</a></li><li><a href=https://tools.cmdragon.cn/zh class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors duration-300 flex items-center" target=_blank rel="noopener noreferrer"><iconify-icon icon=mdi:chevron-right class="mr-2 text-primary" width=16 height=16></iconify-icon>实用在线工具</a></li><li><a href=https://hot-movie.cmdragon.cn/ class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors duration-300 flex items-center" target=_blank rel="noopener noreferrer"><iconify-icon icon=mdi:chevron-right class="mr-2 text-primary" width=16 height=16></iconify-icon>热映影视推荐</a></li></ul></div><div><h3 class="text-lg font-bold mb-4 text-gray-900 dark:text-white flex items-center"><div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-1.5 rounded text-white mr-2"><iconify-icon icon=mdi:tag-multiple width=16 height=16></iconify-icon></div>热门标签</h3><div class="flex flex-wrap gap-2"><a href=https://blog.cmdragon.cn/tags/FastAPI/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#FastAPI <span class="text-xs opacity-70">(92)</span>
</a><a href=https://blog.cmdragon.cn/tags/Nuxt/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#Nuxt <span class="text-xs opacity-70">(68)</span>
</a><a href=https://blog.cmdragon.cn/tags/%E9%92%A9%E5%AD%90/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#钩子 <span class="text-xs opacity-70">(62)</span>
</a><a href=https://blog.cmdragon.cn/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#性能优化 <span class="text-xs opacity-70">(48)</span>
</a><a href=https://blog.cmdragon.cn/tags/Nuxt.js/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#Nuxt.js <span class="text-xs opacity-70">(43)</span>
</a><a href=https://blog.cmdragon.cn/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#生命周期 <span class="text-xs opacity-70">(38)</span>
</a><a href=https://blog.cmdragon.cn/tags/Nuxt3/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#Nuxt3 <span class="text-xs opacity-70">(37)</span>
</a><a href=https://blog.cmdragon.cn/tags/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#错误处理 <span class="text-xs opacity-70">(32)</span>
</a><a href=https://blog.cmdragon.cn/tags/%E7%BB%84%E4%BB%B6/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#组件 <span class="text-xs opacity-70">(29)</span>
</a><a href=https://blog.cmdragon.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86/ class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full hover:bg-blue-700 hover:text-white transition-colors duration-300">#数据库管理 <span class="text-xs opacity-70">(27)</span></a></div></div></div><div class="border-t border-gray-200 dark:border-gray-700 pt-6"><div class="flex flex-col md:flex-row justify-between items-center"><div class="text-center md:text-left mb-4 md:mb-0"><p class="text-sm text-gray-600 dark:text-gray-400">&copy; 2023 cmdragon's Blog. 保留所有权利.</p><p class="text-xs text-gray-500 dark:text-gray-500 mt-1">由 <a href=https://gohugo.io/ class="hover:text-primary transition-colors duration-300" target=_blank rel="noopener noreferrer">Hugo</a> 强力驱动 |
<a href=/license/ class="hover:text-primary transition-colors duration-300" aria-label="Apache 2.0 许可证" tabindex=0>Apache License 2.0</a></p></div><button id=back-to-top class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-2 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center text-sm font-medium">
<iconify-icon icon=mdi:arrow-up class=mr-1 width=16 height=16></iconify-icon>返回顶部</button></div></div></div><div id=wechat-modal class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden" onclick='this.classList.add("hidden")'><div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-xl max-w-sm w-full relative" onclick=event.stopPropagation()><button class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" onclick='document.getElementById("wechat-modal").classList.add("hidden")'>
<iconify-icon icon=mdi:close width=20 height=20></iconify-icon></button><h4 class="text-center font-medium text-gray-800 dark:text-gray-200 mb-4">扫码关注公众号</h4><div class="flex justify-center"><img src=/images/wechat_qrcode.webp alt=微信二维码 class="w-64 h-64 object-contain"></div></div></div></footer><script>const backToTopButton=document.getElementById("back-to-top");window.addEventListener("scroll",function(){window.scrollY>300?(backToTopButton.classList.remove("opacity-0","invisible"),backToTopButton.classList.add("opacity-100","visible")):(backToTopButton.classList.add("opacity-0","invisible"),backToTopButton.classList.remove("opacity-100","visible"))}),backToTopButton.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),document.getElementById("wechat-btn").addEventListener("click",function(){document.getElementById("wechat-modal").classList.remove("hidden")}),document.getElementById("wechat-btn").addEventListener("keydown",function(e){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),document.getElementById("wechat-modal").classList.remove("hidden"))})</script></div><script>localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")</script><script src=/js/code-highlight.js></script><script src=/js/advanced-render.js></script><div id=site-search-modal class="fixed inset-0 z-50 flex items-center justify-center hidden opacity-0 transition-opacity duration-300"><div id=site-search-backdrop class="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"></div><div class="relative bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-xl max-w-lg w-full mx-4 z-10 transform transition-all duration-300 scale-95 opacity-0 border border-gray-100 dark:border-gray-700"><div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"><h3 class="text-lg font-medium flex items-center"><div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-1.5 rounded text-white mr-2 shadow-sm"><iconify-icon icon=mdi:magnify width=16 height=16></iconify-icon></div><span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-indigo-600">站内搜索</span></h3><button id=site-search-close class="text-gray-400 hover:text-gray-500 focus:outline-none transition-colors duration-200 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full">
<iconify-icon icon=mdi:close width=20 height=20></iconify-icon></button></div><div class=p-6><form id=site-search-form action=/search/ method=get><div class=relative><div class="flex items-center border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-blue-500 transition-all duration-300 shadow-sm hover:shadow-md"><span class="pl-4 text-gray-400"><iconify-icon icon=mdi:magnify width=20 height=20></iconify-icon></span><input type=text id=site-search-input name=q placeholder=输入关键词搜索... class="w-full px-3 py-3 border-none focus:outline-none bg-transparent text-gray-800 dark:text-gray-200" aria-label=搜索内容 tabindex=0>
<button type=submit class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-4 py-3 hover:shadow-md transition-all duration-300 flex items-center" aria-label=搜索 tabindex=0>
<span class="mr-1 hidden sm:inline">搜索</span>
<iconify-icon icon=mdi:arrow-right width=18 height=18></iconify-icon></button></div></div></form><div class="mt-6 text-sm text-gray-500 dark:text-gray-400 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800/30 flex items-start"><div class="bg-blue-100 dark:bg-blue-800/50 p-1.5 rounded-full mr-3 mt-0.5"><iconify-icon icon=mdi:information width=16 height=16 class="text-blue-500 dark:text-blue-300"></iconify-icon></div><div><p class=mb-1>快捷键提示:</p><ul class=space-y-1><li class="flex items-center"><span class="bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-xs font-mono mr-2">/</span>
<span>打开搜索</span></li><li class="flex items-center"><span class="bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-xs font-mono mr-2">Esc</span>
<span>关闭搜索</span></li><li class="flex items-center"><span class="bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-xs font-mono mr-2">Enter</span>
<span>提交搜索</span></li></ul></div></div><div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"><div class="flex flex-wrap gap-2"><a href=/tags/ class="bg-gradient-to-r hover:bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 text-gray-700 dark:text-gray-300 px-3 py-1.5 rounded-lg text-sm border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-md flex items-center"><iconify-icon icon=mdi:tag-multiple class=mr-1 width=16 height=16></iconify-icon>标签
</a><a href=/categories/ class="bg-gradient-to-r hover:bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 text-gray-700 dark:text-gray-300 px-3 py-1.5 rounded-lg text-sm border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-md flex items-center"><iconify-icon icon=mdi:folder-multiple class=mr-1 width=16 height=16></iconify-icon>分类
</a><a href=/archives/ class="bg-gradient-to-r hover:bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 text-gray-700 dark:text-gray-300 px-3 py-1.5 rounded-lg text-sm border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-md flex items-center"><iconify-icon icon=mdi:archive class=mr-1 width=16 height=16></iconify-icon>归档</a></div></div></div></div></div><script>document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("site-search-modal"),t=e.querySelector('div[class*="rounded-xl"]'),s=document.getElementById("site-search-backdrop"),o=document.getElementById("site-search-close"),a=document.getElementById("site-search-form"),i=document.getElementById("site-search-input");window.openSiteSearch=function(){e.classList.remove("hidden"),document.body.classList.add("overflow-hidden"),setTimeout(()=>{e.classList.add("opacity-100"),t.classList.remove("scale-95","opacity-0"),t.classList.add("scale-100","opacity-100"),i.focus()},10)};function n(){e.classList.remove("opacity-100"),t.classList.remove("scale-100","opacity-100"),t.classList.add("scale-95","opacity-0"),setTimeout(()=>{e.classList.add("hidden"),document.body.classList.remove("overflow-hidden")},300)}s&&s.addEventListener("click",n),o&&o.addEventListener("click",n),document.addEventListener("keydown",t=>{t.key==="Escape"&&!e.classList.contains("hidden")&&n(),t.key==="/"&&e.classList.contains("hidden")&&document.activeElement.tagName!=="INPUT"&&(t.preventDefault(),openSiteSearch())}),t.addEventListener("click",e=>{e.stopPropagation()})})</script></body></html>